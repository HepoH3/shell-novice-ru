<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>The Unix Shell: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="manifest" href="site.webmanifest">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Software Carpentry" src="assets/images/software-logo.svg">
</div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="assets/images/software-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      The Unix Shell
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            The Unix Shell
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="discuss.html">Обсуждение</a></li>
<li><a class="dropdown-item" href="reference.html">Сводка основных команд</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  The Unix Shell
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-intro.html">1. Введение в командную оболочку</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-filedir.html">2. Навигация по файлам и каталогам</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-create.html">3. Работа с файлами и каталогами</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-pipefilter.html">4. Каналы и фильтры</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-loop.html">5. Циклы</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-script.html">6. Скрипты оболочки</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-find.html">7. Поиск</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Обсуждение</a></li>
<li><a href="reference.html">Сводка основных команд</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-intro"><p>Content from <a href="01-intro.html">Введение в командную оболочку</a></p>
<hr>
<p>Last updated on 2024-09-07 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/01-intro.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Что такое командная оболочка и зачем она может понадобиться?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Объяснить, как командная оболочка взаимодействует с клавиатурой,
экраном, операционной системой и пользовательскими программами.</li>
<li>Объяснить, когда и почему следует использовать интерфейсы командной
строки вместо графических интерфейсов.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="введение">Введение<a class="anchor" aria-label="anchor" href="#%D0%B2%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5"></a>
</h3>
<p>Люди и компьютеры обычно взаимодействуют различными способами: с
помощью клавиатуры и мыши, сенсорных экранов или систем распознавания
речи. Наиболее распространённым способом взаимодействия с персональными
компьютерами является <strong>графический пользовательский
интерфейс</strong> (<strong>graphical user interface</strong>,
<strong>GUI</strong>). В GUI команды передаются через клики мышью и
меню.</p>
<p>Несмотря на то, что GUI интуитивно понятен, такой способ
взаимодействия плохо масштабируется. Представьте задачу: вам нужно
скопировать третью строку из тысячи текстовых файлов, расположенных в
разных папках, и вставить их в один файл. Используя GUI, вы бы кликами
потратили часы и могли бы совершить ошибку. В таких случаях приходит на
помощь командная оболочка Unix. Она является <strong>интерфейсом
командной строки</strong> (<strong>command-line interface</strong>,
<strong>CLI</strong>) и языком сценариев (скриптов), что позволяет
выполнять повторяющиеся задачи быстро и в автоматическом режиме. С
правильными командами оболочка может повторять операции с необходимыми
изменениями столько раз, сколько потребуется. В приведённом примере с
файлами задача выполняется за секунды.</p>
</div>
<div class="section level3">
<h3 id="оболочка">Оболочка<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%B1%D0%BE%D0%BB%D0%BE%D1%87%D0%BA%D0%B0"></a>
</h3>
<p><strong>Оболочка</strong> (<strong>Shell</strong>) — это программа, в
которой пользователи вводят команды. С её помощью всего одной строкой
кода можно запускать как сложные программы, наподобие программы для
моделирования климата, так и простые команды для создания пустых папок.
Самая популярная оболочка Unix — это <strong>Bash</strong>
(<strong>Bourne Again SHell</strong>), которая создана на основе
оболочки Стивена Борна. Bash — это оболочка по умолчанию во многих
системах Unix, а также в пакетах Unix-подобных инструментов для Windows
(например, Git Bash).</p>
<p>Работа с оболочкой требует времени на изучение. В отличие от
графического интерфейса, где доступные операции находятся на виду у
пользователя, в интерфейсе командной строки они не показываются
автоматически, поэтому команды учатся подобно новым словам в незнакомом
языке. Однако, даже небольшой набор команд позволяет выполнять широкий
спектр задач, и сегодня мы рассмотрим самые важные из них.</p>
<p>Синтаксис командной оболочки позволяет комбинировать существующие
инструменты в мощные последовательности операций и обрабатывать большие
объёмы данных автоматически. Последовательности команд могут быть
сохранены в виде скриптов, что повышает воспроизводимость рабочих
процессов.</p>
<p>Кроме того, командная строка — это часто самый простой способ
взаимодействия с удалёнными машинами и суперкомпьютерами. Знание
оболочки является ключевым при работы с специализированными
инструментами и высокопроизводительными системами. По мере
распространения облачных и кластерных вычислений, навыки работы с
оболочкой становятся всё более востребованными для решения научных и
вычислительных задач.</p>
<p>Итак, приступим.</p>
<p>Когда оболочка запускается, появляется приглашение
(<strong>prompt</strong>), которое показывает, что оболочка ожидает
ввода:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span></span></code></pre>
</div>
<p>Обычно в качестве приглашения используется символ <code>$</code>, но
это может быть другой символ. В примерах этого урока приглашение будет
показано как <code>$</code>. Важно <strong>не вводить</strong> сам
символ <code>$</code>, когда вы набираете команды, а только то, что
следует за ним. Это правило действует как в данном уроке, так и в других
материалах. Также стоит отметить, что после ввода команды, необходимо
нажать на клавишу <kbd>Enter</kbd>, чтобы исполнить её.</p>
<p>Приглашение сопровождается <strong>текстовым курсором</strong>,
который показывает, где будет появляться ваш ввод. Курсор может быть
мигающим блоком, подчёркиванием или вертикальной чертой. Вы могли видеть
его в текстовых редакторах.</p>
<p>Ваше приглашение может выглядеть иначе, например, может содержать имя
пользователя и хоста (имени компьютера в используемой сети):</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">nelle@localhost</span> $</span></code></pre>
</div>
<p>Приглашение может включать и большее количество информации (и даже
располагаться в несколько строк). Не беспокойтесь, если приглашение
представляет собой не просто символ <code>$</code>. Данный урок не будет
полагаться на эту дополнительную информацию. Единственное на что пока
стоит обращать внимание в приглашении — это непосредственно символ
<code>$</code> и позже мы разберёмся почему.</p>
<p>Теперь попробуем нашу первую команду ls, которая выводит список
содержимого текущей директории:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Desktop     Downloads   Movies      Pictures
Documents   Library     Music       Public</code></pre>
</div>
<div id="команда-не-найдена" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="команда-не-найдена" class="callout-inner">
<h3 class="callout-title">Команда не найдена</h3>
<div class="callout-content">
<p>Если оболочка не может найти программу с введённым именем команды,
она выведет сообщение об ошибке:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> ks</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ks: command not found</code></pre>
</div>
<p>Это может произойти, если команда введена неправильно или
соответствующая программа не установлена.</p>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="пример-задачи-нелли">Пример задачи Нелли<a class="anchor" aria-label="anchor" href="#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B8-%D0%BD%D0%B5%D0%BB%D0%BB%D0%B8"></a>
</h2>
<hr class="half-width">
<p>Нелли Немо, морской биолог, вернулась после шестимесячного
исследования <a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%B5%D0%B2%D0%B5%D1%80%D0%BE-%D0%A2%D0%B8%D1%85%D0%BE%D0%BE%D0%BA%D0%B5%D0%B0%D0%BD%D1%81%D0%BA%D0%BE%D0%B5_%D1%82%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D0%B5" class="external-link">Северо-Тихоокеанского
течения</a>, где она собирала образцы медуз в <a href="https://ru.wikipedia.org/wiki/%D0%91%D0%BE%D0%BB%D1%8C%D1%88%D0%BE%D0%B5_%D1%82%D0%B8%D1%85%D0%BE%D0%BE%D0%BA%D0%B5%D0%B0%D0%BD%D1%81%D0%BA%D0%BE%D0%B5_%D0%BC%D1%83%D1%81%D0%BE%D1%80%D0%BD%D0%BE%D0%B5_%D0%BF%D1%8F%D1%82%D0%BD%D0%BE" class="external-link">Большом
тихоокеанском мусорном пятне</a>. У неё есть 1520 образцов, которые она
исследовала на анализаторе, измеряющем относительное содержание 300
белков. Ей нужно обработать полученные файлы с помощью программы
<code>goostats.sh</code>, но у неё также есть статья, которую нужно
написать до конца месяца для публикации в спец-выпуске журнала
<em>“Записки о жиже”</em>.</p>
<p>Если бы Нелли запускала <code>goostats.sh</code> вручную через GUI,
ей пришлось бы открывать файлы 1520 раз. Исходя из того, что
<code>goostats.sh</code> требуется порядка 30с для обработки каждого
файла, весь этот процесс потребовал бы более 12 часов внимания Нелли. С
использованием оболочки она может автоматизировать этот процесс и
сосредоточиться на написании статьи.</p>
<p>Далее будет рассмотрено, как Нелли может использовать оболочку для
автоматизации этой задачи. В частности, как использовать оболочку для
запуска программы <code>goostats.sh</code>, использовать циклы для
автоматизации повторяющихся этапов ввода имён файлов так, чтобы поручить
выполнение этой задачи компьютеру, пока Нелли сможет сосредоточиться на
написании её статьи.</p>
<p>И в качестве бонуса: однажды автоматизировав этот процесс, Нелли
сможет повторить его когда угодно, в случае, если у нее получится
собрать новые образцы.</p>
<p>Чтобы выполнить задачу, Нелли нужно уметь:</p>
<ul>
<li>перемещаться по файловой системе</li>
<li>создавать файлы/каталоги</li>
<li>проверять длину файла</li>
<li>объединять команды в цепочки</li>
<li>извлекать набор файлов</li>
<li>использовать циклы для повторения команд</li>
<li>запускать скрипты</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Оболочка — это программа, основная задача которой — обработка команд
и запуск других программ.</li>
<li>Этот урок использует Bash — оболочку, используемую по умолчанию во
многих Unix-системах.</li>
<li>Программы в Bash запускаются через интерфейс командной строки.</li>
<li>Основные преимущества оболочки — высокая эффективность ввода команд,
автоматизация повторяющихся задач и доступ к удалённым компьютерам.</li>
<li>Одной из сложностей работы с оболочкой является знание нужных команд
и их правильного использования.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-02-filedir"><p>Content from <a href="02-filedir.html">Навигация по файлам и каталогам</a></p>
<hr>
<p>Last updated on 2024-09-07 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/02-filedir.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Как я могу перемещаться по компьютеру?</li>
<li>Как я могу увидеть, какие файлы и каталоги у меня есть?</li>
<li>Как я могу указать расположение файла или каталога на своем
компьютере?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Объяснить сходства и различия между файлом и каталогом.</li>
<li>Преобразовать абсолютный путь в относительный и наоборот.</li>
<li>Построить абсолютные и относительные пути, идентифицирующие
конкретные файлы и каталоги.</li>
<li>Использовать опции и аргументы для изменения поведения команды
оболочки.</li>
<li>Продемонстрировать использование автодополнения по клавише Tab и
объяснить его преимущества.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Часть операционной системы, отвечающая за управление файлами и
каталогами, называется <strong>файловой системой</strong>. Она
организует наши данные в файлы, которые хранят информацию, и каталоги
(также называемые “папками”), которые хранят файлы или другие
каталоги.</p>
<p>Существует несколько команд, которые часто используются для создания,
просмотра, переименования и удаления файлов и каталогов. Чтобы начать их
изучение, мы откроем окно оболочки.</p>
<p>Для начала узнаем, где мы находимся, запустив команду
<code>pwd</code> (которая расшифровывается как “print working directory”
— вывести рабочий каталог). Каталоги можно рассматривать как некоторые
<em>места</em> — в любой момент, когда мы используем оболочку, мы
находимся в месте, которое именуется <strong>“текущим рабочим
каталогом”</strong>. Команды обычно читают и записывают файлы в текущем
рабочем каталоге, то есть “здесь”, поэтому важно знать, где вы
находитесь перед запуском команды. <code>pwd</code> показывает, где мы
находимся:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle</code></pre>
</div>
<p>В этих листингах, ответом компьютера является
<code>/Users/nelle</code> — <strong>домашний каталог</strong>:</p>
<div id="вариации-домашнего-каталога" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="вариации-домашнего-каталога" class="callout-inner">
<h3 class="callout-title">Вариации домашнего каталога</h3>
<div class="callout-content">
<p>Путь домашнего каталога будет выглядеть по-разному на разных
операционных системах. На Linux он может выглядеть как
<code>/home/nelle</code>, а на Windows будет похож на
<code>C:\Documents and Settings\nelle</code> или
<code>C:\Users\nelle</code>. (Обратите внимание, что для разных версий
Windows он может немного отличаться.) В будущих примерах мы используем
по умолчанию вывод для <code>MacOS</code> — вывод на Linux и Windows
может немного отличаться, но должен быть в целом схожим.</p>
<p>Дальнейшее повествование будет исходить, что команда <code>pwd</code>
вернула домашний каталог вашего пользователя. Если <code>pwd</code>
возвращает что-то другое, вам, возможно, придется перейти туда с помощью
команды <code>cd</code>, иначе некоторые команды в этом уроке не будут
работать как написано. Подробности о команде <code>cd</code> см. в
разделе <a href="#%D0%B8%D1%81%D1%81%D0%BB%D0%B5%D0%B4%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D1%85-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2">Исследование других
каталогов</a>.</p>
</div>
</div>
</div>
<p>Чтобы понять, что такое “домашний каталог”, давайте рассмотрим, как
организована файловая система в целом. Для примера мы будем
иллюстрировать файловую систему на компьютере нашего ученого Нелли.
После этого примера вы изучите команды для изучения вашей собственной
файловой системы, которая будет построена аналогично, но не будет точно
такой же.</p>
<p>Файловая система на компьютере Нелли выглядит следующим образом:</p>
<figure><img src="fig/filesystem.svg" alt="Файловая система состоит из корневого каталога, который содержит подкаталоги с названиями bin, data, users и tmp" class="figure mx-auto d-block"><div class="figcaption">Файловая система состоит из корневого каталога,
который содержит подкаталоги с названиями bin, data, users и tmp</div>
</figure><p>Файловая система напоминает перевернутое дерево. Верхний каталог —
это <strong>корневой каталог</strong>, который содержит всё остальное.
Мы обозначаем его с помощью одиночного символа “слэш” (<code>/</code>).
В строке <code>/Users/nelle</code> корень обозначен ведущим (самым
левым) слэшем.</p>
<p>Внутри этого каталога находятся несколько других каталогов:</p>
<ul>
<li>
<code>bin</code>, где хранятся некоторые встроенные программы,</li>
<li>
<code>data</code>, для различных файлов данных,</li>
<li>
<code>Users</code>, где находятся персональные каталоги
пользователей,</li>
<li>
<code>tmp</code>, для временных файлов, которые не нужно хранить
долго</li>
</ul>
<p>и т. д.</p>
<p>Мы знаем, что наш текущий рабочий каталог <code>/Users/nelle</code>
находится внутри <code>/Users</code>, потому что <code>/Users</code> —
это первая часть его имени. Аналогично, мы знаем, что
<code>/Users</code> находится в корневом каталоге <code>/</code>, потому
что его имя начинается с /.</p>
<div id="символы-слэш" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="символы-слэш" class="callout-inner">
<h3 class="callout-title">Символы слэш</h3>
<div class="callout-content">
<p>Обратите внимание, что символ <code>/</code> имеет два значения.
Когда является самым первым символом в имени файла или каталога, он
указывает на корневой каталог. Когда он появляется внутри пути, это
просто разделитель.</p>
</div>
</div>
</div>
<p>В каталоге <code>/Users</code>, мы видим отдельные каталоги для
каждого пользователя, зарегистрированного на компьютере Нелли: ее коллег
<em>imhotep</em> и <em>larry</em>.</p>
<figure><img src="fig/home-directories.svg" alt="Подкаталог “/Users” включает домашние директории таких пользователей, как “/Users/imhotep”, “/Users/larry” и “/Users/nelle" class="figure mx-auto d-block"><div class="figcaption">Подкаталог “/Users” включает домашние директории
таких пользователей, как “/Users/imhotep”, “/Users/larry” и
“/Users/nelle</div>
</figure><p>Файлы пользователя <em>imhotep</em> хранятся в
<code>/Users/imhotep</code>, файлы пользователя <em>larry</em> — в
<code>/Users/larry</code>, а файлы Нелли — в <code>/Users/nelle</code>.
В наших примерах мы работаем с пользователем Нелли, поэтому мы видим
<code>/Users/nelle</code> как домашний каталог. Обычно при открытии
нового командного окна вы начинаете в своем домашнем каталоге.</p>
<p>Теперь давайте изучим команду, которая позволит нам увидеть
содержимое нашей файловой системы. Мы можем увидеть, что находится в
нашем домашнем каталоге, выполнив команду <code>ls</code>:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Applications Documents    Library      Music        Public
Desktop      Downloads    Movies       Pictures</code></pre>
</div>
<blockquote>
<p>[!Note]<br>
Ваши результаты могут немного отличаться в зависимости от вашей
операционной системы и настройки файловой системы.</p>
</blockquote>
<p>Команда <code>ls</code> выводит названия файлов и каталогов в текущем
каталоге. Мы можем сделать вывод более понятным, используя опцию
<code>-F</code>, которая указывает <code>ls</code> классифицировать
вывод, добавляя маркеры в конец имён файлов и каталогов для указания их
типа:</p>
<ul>
<li>
<code>/</code> указывает, что это каталог;</li>
<li>
<code>@</code> указывает на ссылку;</li>
<li>
<code>*</code> указывает на исполняемый файл.</li>
</ul>
<p>В зависимости от настроек вашей оболочки, оболочка также может
использовать цвета для указания, является ли элемент файлом или
каталогом.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Applications/ Documents/    Library/      Music/        Public/
Desktop/      Downloads/    Movies/       Pictures/</code></pre>
</div>
<p>Вывод показывает, что домашний каталог содержит только
<strong>подкаталоги</strong>. Любые имена в выводе без
классификационного символа — это <strong>файлы</strong> в текущем
рабочем каталоге.</p>
<div id="очистка-терминала" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="очистка-терминала" class="callout-inner">
<h3 class="callout-title">Очистка терминала</h3>
<div class="callout-content">
<p>Если экран становится слишком загроможденным, вы можете очистить
терминал с помощью команды <code>clear</code>. Вы по-прежнему сможете
получить доступ к предыдущим командам, используя <kbd>↑</kbd> и
<kbd>↓</kbd> для перемещения по строкам, или прокручивая окно
терминала.</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="получение-справки">Получение справки<a class="anchor" aria-label="anchor" href="#%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D1%81%D0%BF%D1%80%D0%B0%D0%B2%D0%BA%D0%B8"></a>
</h3>
<p>У команды <code>ls</code> есть множество других опций. Существует два
распространенных способа узнать, как пользоваться командой и какие опции
она поддерживает — <strong>в зависимости от вашей среды, может работать
только один из этих способов:</strong></p>
<ol style="list-style-type: decimal">
<li>Мы можем передать опцию <code>--help</code> любой команде (доступно
на Linux и Git Bash), например:</li>
</ol>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">--help</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Мы можем прочитать руководство с помощью команды <code>man</code>
(доступно на Linux и macOS):</li>
</ol>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> man ls</span></code></pre>
</div>
<p>Далее будет разобрано оба способа.</p>
<div id="справка-для-встроенных-команд" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="справка-для-встроенных-команд" class="callout-inner">
<h3 class="callout-title">Справка для встроенных команд</h3>
<div class="callout-content">
<p>Некоторые команды встроены в оболочку Bash, а не существуют как
отдельные программы на файловой системе. Примером является команда
<code>cd</code> (смена каталога). Если вы получите сообщение вроде
<code>No manual entry for cd</code>, то попробуйте <code>help cd</code>.
Команда <code>help</code> предоставляет информацию по использованию <a href="https://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html" class="external-link">встроенных
команд Bash</a>.</p>
</div>
</div>
</div>
<div class="section level4">
<h4 id="опция-help">Опция –help<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%BF%D1%86%D0%B8%D1%8F-help"></a>
</h4>
<p>Большинство команд Bash и программ, которые были написаны для запуска
из Bash, поддерживают опцию <code>--help</code>, которая выводит больше
информации о том, как использовать команду или программу.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">--help</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Usage: ls [OPTION]... [FILE]...
List information about the FILEs (the current directory by default).
Sort entries alphabetically if neither -cftuvSUX nor --sort is specified.

Mandatory arguments to long options are mandatory for short options, too.
  -a, --all                  do not ignore entries starting with .
  -A, --almost-all           do not list implied . and ..
      --author               with -l, print the author of each file
  -b, --escape               print C-style escapes for nongraphic characters
      --block-size=SIZE      scale sizes by SIZE before printing them; e.g.,
                               '--block-size=M' prints sizes in units of
                               1,048,576 bytes; see SIZE format below
  -B, --ignore-backups       do not list implied entries ending with ~
  -c                         with -lt: sort by, and show, ctime (time of last
                               modification of file status information);
                               with -l: show ctime and sort by name;
                               otherwise: sort by ctime, newest first
  -C                         list entries by columns
      --color[=WHEN]         colorize the output; WHEN can be 'always' (default
                               if omitted), 'auto', or 'never'; more info below
  -d, --directory            list directories themselves, not their contents
  -D, --dired                generate output designed for Emacs' dired mode
  -f                         do not sort, enable -aU, disable -ls --color
  -F, --classify             append indicator (one of */=&gt;@|) to entries
...        ...        ...</code></pre>
</div>
<div id="когда-использовать-короткие-и-длинные-опции" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="когда-использовать-короткие-и-длинные-опции" class="callout-inner">
<h3 class="callout-title">Когда использовать “короткие” и “длинные” опции</h3>
<div class="callout-content">
<p>Справка для команды <code>ls</code> показывает, что та имеет два
формата опций: “короткие” и “длинные”. К примеру, для отображения файлов
и папкой, начинающихся с символа <code>.</code>, которые не отображаются
по умолчанию командой <code>ls</code>, можно воспользоваться как
короткой опцией <code>-a</code>, так и длинной опцией
<code>--all</code></p>
<p>Когда команда поддерживает оба вида опций:</p>
<ul>
<li>Используйте короткие опции при вводе команд непосредственно в
оболочке, чтобы сократить количество нажатий клавиш и быстрее выполнить
задачу.</li>
<li>Используйте длинные опции в скриптах для ясности. Скрипт будет
прочитан много раз, а написан — один раз.</li>
</ul>
</div>
</div>
</div>
<div id="не-поддерживаемые-опции-командной-строки" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="не-поддерживаемые-опции-командной-строки" class="callout-inner">
<h3 class="callout-title">Не поддерживаемые опции командной строки</h3>
<div class="callout-content">
<p>Если вы попробуете использовать опцию, которая не поддерживается,
команда <code>ls</code> и другие команды обычно выведут сообщение об
ошибке наподобие:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-j</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>ls: invalid option -- 'j'
Try 'ls --help' for more information.</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="команда-man">Команда <code>man</code>
<a class="anchor" aria-label="anchor" href="#%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B0-man"></a>
</h4>
<p>Другой способ узнать о команде <code>ls</code> — ввести:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> man ls</span></code></pre>
</div>
<p>Эта команда превратит ваш терминал в страницу с описанием команды
<code>ls</code> и ее опций.</p>
<p>Чтобы перемещаться по страницам руководства man, вы можете
использовать <kbd>↑</kbd> и <kbd>↓</kbd> для покадрового перемещения,
или попробовать <kbd>b</kbd> и <kbd>Spacebar</kbd> для прокрутки
страницы целиком вверх и вниз. Чтобы искать символ или слово в
руководстве man, используйте <kbd>/</kbd>, за которым введите искомый
символ или слово. Если поиск найдет несколько совпадений, вы можете
перемещаться между ними с помощью <kbd>N</kbd> (для перемещения вперед)
и <kbd>Shift</kbd> + <kbd>N</kbd> (для перемещения назад).</p>
<p>Чтобы выйти из руководства <code>man</code>, нажмите
<kbd>q</kbd>.</p>
<div id="страницы-руководства-в-интернете" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="страницы-руководства-в-интернете" class="callout-inner">
<h3 class="callout-title">Страницы руководства в интернете</h3>
<div class="callout-content">
<p>Конечно, есть третий способ получить справку по командам: поиск в
интернете через браузер. При поиске в интернете включение фразы
<code>unix man page</code> в поисковый запрос поможет найти
соответствующие результаты.</p>
<p>GNU предоставляет ссылки на свои <a href="https://www.gnu.org/manual/manual.html" class="external-link">руководства</a>, включая
<a href="https://www.gnu.org/software/coreutils/manual/coreutils.html" class="external-link">основные
утилиты GNU</a>, которые охватывают многие команды, представленные в
этом уроке.</p>
<div class="section level3">
<h3 id="использование-проекта-tldr">Использование проекта <code>tl;dr</code>
<a class="anchor" aria-label="anchor" href="#%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0-tldr"></a>
</h3>
<p>Часто, очень подробные справки и мануалы могут отпугнуть впервые
столкнувшемуся с ними пользователя. Проект <a href="https://tldr.sh/" class="external-link"><code>tl;dr</code></a> (анг.: “Too long; don’t
read”, что на сленге означает: “многа букаф, ниасилил”) позволяет
вывести краткое резюме по указанной команде с примерами частых сценариев
использования. Данный проект может быть установлен в систему в качестве
отдельной программы, наряду с программой <code>man</code>, либо же
использован <a href="https://tldr.inbrowser.app/" class="external-link">онлайн</a>.</p>
</div>
</div>
</div>
</div>
<div id="изучение-дополнительных-опций-ls" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="изучение-дополнительных-опций-ls" class="callout-inner">
<h3 class="callout-title">Изучение дополнительных опций
<code>ls</code>
</h3>
<div class="callout-content">
<p>Вы также можете использовать две опции одновременно. Что делает
команда <code>ls</code> с опцией <code>-l</code>? А что, если
использовать опции <code>-l</code> и <code>-h</code> вместе?</p>
<p>Некоторая информация в выводе будет касаться свойств, которые мы не
рассматриваем в этом уроке (таких как права доступа к файлам и их
владение), остальная информация будет полезной.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Решение </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Опция <code>-l</code> заставляет команду <code>ls</code> использовать
формат длинного (<strong>l</strong>ong) списка, показывая не только
имена файлов/каталогов, но и дополнительную информацию, такую как размер
файла и время его последнего изменения. Если вы используете обе опции
<code>-l</code> и <code>-h</code>, это делает размер файла
человекочитаемым (<strong>h</strong>uman readable), то есть отображает
что-то вроде <code>5.3K</code> вместо <code>5369</code>.</p>
</div>
</div>
</div>
</div>
<div id="список-в-обратном-хронологическом-порядке" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="список-в-обратном-хронологическом-порядке" class="callout-inner">
<h3 class="callout-title">Список в обратном хронологическом порядке</h3>
<div class="callout-content">
<p>По умолчанию <code>ls</code> выводит содержимое каталога в алфавитном
порядке по имени. Команда <code>ls -t</code> сортирует элементы по
времени последнего изменения, вместо алфавитного порядка. Команда
<code>ls -r</code> выводит содержимое каталога в обратном порядке. Какой
файл отображается последним, если использовать обе опции <code>-t</code>
и <code>-r</code> вместе? Подсказка: вам может понадобиться использовать
опцию <code>-l</code>, чтобы увидеть даты последних изменений.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Решение </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>При использовании опций <code>-rt</code>, самый недавний измененный
файл будет отображен последним . Это может быть очень полезно для поиска
ваших последних правок или проверки, был ли создан новый файл.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="изучение-других-каталогов">Изучение других каталогов<a class="anchor" aria-label="anchor" href="#%D0%B8%D0%B7%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D1%85-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2"></a>
</h3>
<p>Мы можем использовать команду <code>ls</code> не только для текущего
рабочего каталога, но и для просмотра содержимого другого каталога.
Давайте посмотрим на наш каталог <code>Desktop</code>, выполнив команду
<code>ls -F Desktop</code>, то есть команду <code>ls</code> с опцией
<code>-F</code> и <a href="https://hepoh3.github.io/shell-novice-ru/reference.html#%D0%B0%D1%80%D0%B3%D1%83%D0%BC%D0%B5%D0%BD%D1%82" class="external-link"><strong>аргументом</strong></a>
<code>Desktop</code>. Аргумент <code>Desktop</code> указывает
<code>ls</code>, что мы хотим просмотреть содержимое не текущего
рабочего каталога (а вложенного каталога <code>Desktop</code>):</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> Desktop</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>shell-lesson-data/</code></pre>
</div>
<p>Обратите внимание, что если каталог с именем <code>Desktop</code> не
существует в вашем текущем рабочем каталоге, эта команда вернёт ошибку.
Обычно каталог <code>Desktop</code> существует в домашнем каталоге,
который, как предполагает данный текст, является текущим рабочим
каталогом вашей bash-оболочки.</p>
<p>Вывод должен содержать список всех файлов и подкаталогов в вашем
каталоге <code>Desktop</code>, включая каталог
<code>shell-lesson-data</code>, который вы скачали на этапе <a href="index.html#setup">настройки для этого урока</a>. На большинстве систем
содержимое каталога Desktop в оболочке будет отображаться как значки в
графическом интерфейсе за всеми открытыми окнами. Проверьте, так ли это
у вас.</p>
<p>Организация данных по иерархии помогает нам следить за своим рабочим
процессом. Хотя можно поместить сотни файлов в домашний каталог, так же
как можно сложить сотни напечатанных бумаг на столе, намного проще
находить нужное, когда они организованы в подкаталоги с осмысленными
именами.</p>
<p>Теперь, когда мы знаем, что каталог <code>shell-lesson-data</code>
находится в каталоге <code>Desktop</code>, мы можем сделать две
вещи.</p>
<p>Во-первых, используя ту же стратегию, что и ранее, мы можем
посмотреть его содержимое, передав имя каталога команде
<code>ls</code>:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> Desktop/shell-lesson-data</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>exercise-data/  north-pacific-gyre/</code></pre>
</div>
<p>Во-вторых, мы можем сменить наше местоположение на другой каталог,
чтобы больше не находиться в домашнем каталоге.</p>
<p>Команда для смены местоположения — это <code>cd</code>, за которой
следует имя каталога для смены рабочего каталога. <code>cd</code>
расшифровывается как ‘<strong>c</strong>hange
<strong>d</strong>irectory’ (сменить каталог), что немного вводит в
заблуждение. Команда не меняет каталог; она изменяет текущий рабочий
каталог оболочки. Другими словами, она говорит оболочке в каком каталоге
мы находимся. Команда <code>cd</code> похожа на двойной щелчок по папке
в графическом интерфейсе, чтобы попасть в эту папку.</p>
<p>Допустим, мы хотим перейти в каталог <code>exercise-data</code>,
который мы видели выше. Мы можем выполнить следующие команды:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> cd Desktop</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="ex">$</span> cd shell-lesson-data</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="ex">$</span> cd exercise-data</span></code></pre>
</div>
<p>Эти команды переместят нас из домашнего каталога в каталог
<code>Desktop</code>, затем в <code>shell-lesson-data</code>, а после в
каталог <code>exercise-data</code>. Вы можете заметить, что
<code>cd</code> ничего не выводит на экран. Это нормально. Многие
команды оболочки при успешном выполнении ничего не выводят на экран. Но
если мы выполним <code>pwd</code> после данных команд, мы увидим, что
сейчас находимся в каталоге
<code>/Users/nelle/Desktop/shell-lesson-data/exercise-data</code>.</p>
<p>Если мы теперь выполним <code>ls -F</code> без аргументов, то увидим
содержимое каталога
<code>/Users/nelle/Desktop/shell-lesson-data/exercise-data</code>,
потому что именно там мы сейчас находимся:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle/Desktop/shell-lesson-data/exercise-data</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>alkanes/  animal-counts/  creatures/  numbers.txt  writing/</code></pre>
</div>
<p>Теперь мы знаем, как спуститься по дереву каталогов (то есть как
войти в подкаталог), но как подняться вверх (то есть как выйти из
каталога и войти в его родительский каталог)? Мы могли бы попробовать
следующее:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> cd shell-lesson-data</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>-bash: cd: shell-lesson-data: No such file or directory</code></pre>
</div>
<p>Но мы получаем ошибку! Почему так?</p>
<p>С нашими текущими методами работы, команда <code>cd</code> видит
только подкаталоги внутри вашего текущего каталога. Есть разные способы
увидеть каталоги выше текущего местоположения, начнём с самого
простого.</p>
<p>Существует сокращение в оболочке для перемещения на один уровень выше
по каталогу. Это делается следующим образом:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> cd ..</span></code></pre>
</div>
<p><code>..</code> — это специальное имя каталога, означающее “каталог,
содержащий этот”, или, короче, <strong>родительский каталог</strong>. И
действительно, если мы выполним <code>pwd</code> после выполнения
<code>cd ..</code>, мы увидим, что снова оказались в
<code>/Users/nelle/Desktop/shell-lesson-data</code>:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle/Desktop/shell-lesson-data</code></pre>
</div>
<p>Специальный каталог <code>..</code> обычно не отображается, когда мы
выполняем <code>ls</code>. Если мы хотим его увидеть, мы можем добавить
опцию <code>-a</code> к <code>ls -F</code>:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> <span class="at">-a</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>./  ../  exercise-data/  north-pacific-gyre/</code></pre>
</div>
<p><code>-a</code> означает ‘показать все’ (show <strong>a</strong>ll),
включая скрытые файлы. Эта опция сообщает команде <code>ls</code>
показывать нам имена файлов и каталогов, которые начинаются с
<code>.</code>, которым является и <code>..</code>. Как вы можете
видеть, такой вывод также отображает другой специальный каталог —
<code>.</code>, который обозначает ‘текущий рабочий каталог’. Это может
показаться излишним, но вскоре мы увидим, как это можно
использовать.</p>
<p>Обратите внимание, что в большинстве утилит командной строки можно
объединять несколько коротких опций, используя один символ
<code>-</code> без пробелов между опциями: <code>ls -F -a</code>
эквивалентно <code>ls -Fa</code>.</p>
<div id="другие-скрытые-файлы" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="другие-скрытые-файлы" class="callout-inner">
<h3 class="callout-title">Другие скрытые файлы</h3>
<div class="callout-content">
<p>Помимо скрытых каталогов <code>..</code> и <code>.</code>, вы также
можете увидеть файл под названием <code>.bash_profile</code>. Этот файл
обычно содержит настройки конфигурации оболочки. Вы также можете увидеть
другие файлы и каталоги, начинающиеся с <code>.</code>. Эти файлы и
каталоги обычно используются для настройки различных программ на вашем
компьютере. Префикс <code>.</code> используется, чтобы предотвратить
загромождение терминала этими конфигурационными файлами при выполнении
стандартной команды ls.</p>
</div>
</div>
</div>
<p>Эти три команды — основные команды для навигации по файловой системе
на вашем компьютере: <code>pwd</code>, <code>ls</code> и
<code>cd</code>. Давайте изучим некоторые вариации этих команд. Что
произойдет, если вы введете <code>cd</code> без указания каталога?</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> cd</span></code></pre>
</div>
<p>Как можно проверить, что произошло? Команда pwd даст нам ответ!</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle</code></pre>
</div>
<p>Оказывается, что команда <code>cd</code> без аргументов вернёт вас в
домашний каталог, что очень полезно, если вы потерялись в своей файловой
системе.</p>
<p>Попробуем вернуться в каталог <code>exercise-data</code>. В прошлый
раз мы использовали три команды, но на самом деле можно указать
последовательность каталогов для перехода в <code>exercise-data</code>
за один шаг:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">$</span> cd Desktop/shell-lesson-data/exercise-data</span></code></pre>
</div>
<p>Проверьте, что мы перешли в нужное место, выполнив команды
<code>pwd</code> и <code>ls -F</code>.</p>
<p>Если мы хотим подняться на один уровень выше от каталога данных, мы
могли бы использовать <code>cd ..</code>. Но есть и другой способ
перейти в любой каталог, независимо от вашего текущего
местоположения.</p>
<p>До сих пор при указании имен каталогов или даже пути к каталогу (как
в примере выше) мы использовали <strong>относительные пути</strong>.
Когда вы используете относительный путь с командой, такой как
<code>ls</code> или <code>cd</code>, она пытается найти это
местоположение относительно вашего текущего каталога, а не корня
файловой системы.</p>
<p>Однако можно указать <strong>абсолютный путь</strong> к каталогу,
указав весь путь от корневого каталога. Начало такого пути обозначается
слэшем. <code>/</code> в качестве первого символа пути сообщает
компьютеру следовать по пути от корня файловой системы, поэтому он
всегда указывает на один и тот же каталог, независимо от того, где мы
находимся при выполнении команды.</p>
<p>Это позволяет нам перейти в каталог <code>shell-lesson-data</code> из
любого места файловой системы (включая каталог
<code>exercise-data</code>). Для помощи в написании абсолютного пути, мы
можем использовать команду <code>pwd</code>, которая возвращает
абсолютный путь до текущего рабочего каталога.</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle/Desktop/shell-lesson-data/exercise-data</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> cd /Users/nelle/Desktop/shell-lesson-data</span></code></pre>
</div>
<p>Выполните команды <code>pwd</code> и <code>ls -F</code>, чтобы
убедиться, что мы находимся в том каталоге, в котором ожидаем.</p>
<div id="ещё-два-полезных-сокращения" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="ещё-два-полезных-сокращения" class="callout-inner">
<h3 class="callout-title">Ещё два полезных сокращения</h3>
<div class="callout-content">
<p>Оболочка интерпретирует символ тильды (<code>~</code>) в начале пути
как “домашний каталог текущего пользователя”. Например, если домашний
каталог Нелли — это <code>/Users/nelle</code>, то <code>~/data</code>
эквивалентно <code>/Users/nelle/data</code>. Это работает только если
тильда стоит в начале пути: <code>here/there/~/elsewhere</code>
<em>не</em> будет интерпретировано как
<code>here/there/Users/nelle/elsewhere</code>.</p>
<p>Еще одной полезной командой является символ тире (<code>-</code>).
<code>cd</code> интерпретирует <code>-</code> как <em>предыдущий
каталог, в котором я был</em>, что удобнее, чем запоминать и вводить
полный путь. Это <em>очень</em> эффективный способ перемещаться
<em>между двумя каталогами</em> — если выполнить <code>cd -</code>
дважды, вы вернетесь в исходный каталог.</p>
<p>Разница между <code>cd ..</code> и <code>cd -</code> заключается в
том, что первая команда перемещает вас <em>вверх</em> (в родительский
каталог), а вторая — <em>назад</em> (в тот каталог, где вы были до
крайнего вызова <code>cd</code>).</p>
<hr>
<p>Попробуйте сами! Сначала перейдите в каталог
<code>~/Desktop/shell-lesson-data</code> (вы, вероятно, уже там).</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/shell-lesson-data</span></code></pre>
</div>
<p>Затем перейдите в каталог <code>exercise-data/creatures</code></p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> cd exercise-data/creatures</span></code></pre>
</div>
<p>Теперь, если вы выполните команду:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> cd <span class="at">-</span></span></code></pre>
</div>
<p>вы вернётесь в каталог <code>~/Desktop/shell-lesson-data</code>.
Выполните <code>cd -</code> снова, и вы вернётесь в
<code>~/Desktop/shell-lesson-data/exercise-data/creatures</code>.</p>
</div>
</div>
</div>
<div id="абсолютные-и-относительные-пути" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="абсолютные-и-относительные-пути" class="callout-inner">
<h3 class="callout-title">Абсолютные и относительные пути</h3>
<div class="callout-content">
<p>Начиная с каталога <code>/Users/nelle/data</code>, какую из следующих
команд могла бы использовать Нелли, чтобы перейти в свой домашний
каталог, который находится по адресу <code>/Users/nelle</code>?</p>
<ol style="list-style-type: decimal">
<li><code>cd .</code></li>
<li><code>cd /</code></li>
<li><code>cd /home/nelle</code></li>
<li><code>cd ../..</code></li>
<li><code>cd ~</code></li>
<li><code>cd home</code></li>
<li><code>cd ~/data/..</code></li>
<li><code>cd</code></li>
<li><code>cd ..</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Нет: <code>.</code> обозначает текущий каталог.</li>
<li>Нет: <code>/</code> обозначает корневой каталог.</li>
<li>Нет: домашний каталог Нелли — это <code>/Users/nelle</code>.</li>
<li>Нет: эта команда поднимет на два уровня вверх, то есть окажемся в
<code>/Users</code>.</li>
<li>Да: <code>~</code> обозначает домашний каталог пользователя, в
данном случае <code>/Users/nelle</code>.</li>
<li>Нет: эта команда попытается перейти в каталог <code>home</code> в
текущем каталоге, если он существует. if it exists.</li>
<li>Да: хоть это и избыточно сложный, но правильный путь.</li>
<li>Да: это сокращение для перехода в домашний каталог
пользователя.</li>
<li>Да: переход на уровень вверх из каталога
<code>/Users/nelle/data</code> перенесёт вас в домашний каталог
Нелли.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="разрешение-относительных-путей" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="разрешение-относительных-путей" class="callout-inner">
<h3 class="callout-title">Разрешение относительных путей</h3>
<div class="callout-content">
<p>Используя диаграмму файловой системы ниже, ответьте: если команда
<code>pwd</code> выводит /<code>Users/thing</code>, что покажет
<code>ls -F ../backup</code>?</p>
<ol style="list-style-type: decimal">
<li><code>../backup: No such file or directory</code></li>
<li><code>2012-12-01 2013-01-08 2013-01-27</code></li>
<li><code>2012-12-01/ 2013-01-08/ 2013-01-27/</code></li>
<li><code>original/ pnas_final/ pnas_sub/</code></li>
</ol>
<figure><img src="fig/filesystem-challenge.svg" alt="Дерево каталогов ниже директории Users, где “/Users” содержит каталоги “backup” и “thing”; “/Users/backup” содержит “original”, “pnas_final” и “pnas_sub”; “/Users/thing” содержит “backup”; а “/Users/thing/backup” содержит “2012-12-01”, “2013-01-08” и “2013-01-27”" class="figure mx-auto d-block"><div class="figcaption">Дерево каталогов ниже директории Users, где
“/Users” содержит каталоги “backup” и “thing”; “/Users/backup” содержит
“original”, “pnas_final” и “pnas_sub”; “/Users/thing” содержит “backup”;
а “/Users/thing/backup” содержит “2012-12-01”, “2013-01-08” и
“2013-01-27”</div>
</figure>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Решение </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Нет: каталог <code>backup</code> существует в
<code>/Users</code>.</li>
<li>Нет: это содержимое каталога <code>Users/thing/backup</code>, но с
<code>..</code> мы запрашиваем уровень выше.</li>
<li>Нет: см. п.2.</li>
<li>Да: <code>../backup/</code> ссылается на
<code>/Users/backup/</code>.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="понимание-вывода-команды-ls" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="понимание-вывода-команды-ls" class="callout-inner">
<h3 class="callout-title">Понимание вывода команды <code>ls</code>
</h3>
<div class="callout-content">
<p>Используя диаграмму файловой системы ниже, ответьте: если команда
<code>pwd</code> выводит <code>/Users/backup</code>, и опция
<code>-r</code> заставляет <code>ls</code> отображать содержимое в
обратном порядке, какая команда приведёт к следующему выводу:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>pnas_sub/ pnas_final/ original/</code></pre>
</div>
<figure><img src="fig/filesystem-challenge.svg" alt="Дерево каталогов ниже директории Users, где “/Users” содержит каталоги “backup” и “thing”; “/Users/backup” содержит “original”, “pnas_final” и “pnas_sub”; “/Users/thing” содержит “backup”; а “/Users/thing/backup” содержит “2012-12-01”, “2013-01-08” и “2013-01-27”" class="figure mx-auto d-block"><div class="figcaption">Дерево каталогов ниже директории Users, где
“/Users” содержит каталоги “backup” и “thing”; “/Users/backup” содержит
“original”, “pnas_final” и “pnas_sub”; “/Users/thing” содержит “backup”;
а “/Users/thing/backup” содержит “2012-12-01”, “2013-01-08” и
“2013-01-27”</div>
</figure><ol style="list-style-type: decimal">
<li><code>ls pwd</code></li>
<li><code>ls -r -F</code></li>
<li><code>ls -r -F /Users/backup</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Решение </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Нет: <code>pwd</code> — это не имя каталога.</li>
<li>Да: ls без каталога, переданного в качестве аргумента выводит файлы
и подкаталоги в текущем каталоге.</li>
<li>Да: команда использует абсолютный путь.</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="общий-синтаксис-команд-оболочки">Общий синтаксис команд оболочки<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%B1%D1%89%D0%B8%D0%B9-%D1%81%D0%B8%D0%BD%D1%82%D0%B0%D0%BA%D1%81%D0%B8%D1%81-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4-%D0%BE%D0%B1%D0%BE%D0%BB%D0%BE%D1%87%D0%BA%D0%B8"></a>
</h2>
<hr class="half-width">
<p>Мы уже познакомились с командами, опциями и аргументами, но полезно
формализовать некоторые термины.</p>
<p>Рассмотрим следующую команду в качестве общего примера, который мы
разберем на составные части:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> /</span></code></pre>
</div>
<figure><img src="fig/shell_command_syntax.svg" alt="Общий синтаксис команды оболочки" class="figure mx-auto d-block"><div class="figcaption">Общий синтаксис команды оболочки</div>
</figure><p><code>ls</code> — это <strong>команда</strong> с
<strong>опцией</strong> <code>-F</code> и <strong>аргументом</strong>
<code>/</code>. Мы уже видели, что опции могут начинаться с одного
дефиса (<code>-</code>), такие опции называются
<strong>короткими</strong>, или с двух дефисов (<code>--</code>), такие
опции называются <strong>длинными</strong>. [Опции] изменяют поведение
команды, а <a href="https://hepoh3.github.io/shell-novice-ru/reference.html#%D0%B0%D1%80%D0%B3%D1%83%D0%BC%D0%B5%D0%BD%D1%82" class="external-link">аргументы</a>
указывают, над чем команда должна работать (например, файлы и каталоги).
Иногда опции и аргументы называют параметрами. Команда может быть
вызвана с несколькими опциями и аргументами, но они не всегда являются
обязательными.</p>
<p>Иногда опции называют <strong>переключателями</strong> или
<strong>флагами</strong>, особенно если опции не принимают аргументов. В
этом уроке мы будем использовать термин <em>опция</em>.</p>
<p>Каждая часть команды разделена пробелами. Если опустить пробел между
<code>ls</code> и <code>-F</code>, оболочка попытается найти команду под
названием <code>ls-F</code>, которой не существует. Кроме того, важно
учитывать регистр. Например, <code>ls -s</code> выводит размер файлов и
каталогов рядом с их именами, тогда как <code>ls -S</code> сортирует
файлы и каталоги по размеру, как показано ниже:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/shell-lesson-data</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-s</span> exercise-data</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>total 28
 4 animal-counts   4 creatures  12 numbers.txt   4 alkanes   4 writing</code></pre>
</div>
<p>Обратите внимание, что размеры, возвращаемые командой
<code>ls -s</code>, указаны в <em>блоках</em>. Эти блоки могут быть
определены по-разному в зависимости от операционной системы, поэтому вы
можете получить результаты, отличные от приведенных в примере.</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-S</span> exercise-data</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>animal-counts  creatures  alkanes  writing  numbers.txt</code></pre>
</div>
<p>Таким образом, команда <code>ls -F /</code> из примера выше выведет
список файлов и каталогов в корневом каталоге <code>/</code>. Пример
возможного вывода для этой команды:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> /</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Applications/         System/
Library/              Users/
Network/              Volumes/</code></pre>
</div>
<div class="section level3">
<h3 id="работа-нелли-организация-файлов">Работа Нелли: Организация файлов<a class="anchor" aria-label="anchor" href="#%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D0%BD%D0%B5%D0%BB%D0%BB%D0%B8-%D0%BE%D1%80%D0%B3%D0%B0%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2"></a>
</h3>
<p>Зная все это о файлах и каталогах, Нелли готова организовать файлы,
которые будут созданы анализатором белков.</p>
<p>Она создает каталог под названием <code>north-pacific-gyre</code>
(чтобы напомнить себе, откуда пришли данные), который будет содержать
файлы данных с машины и ее скрипты для обработки данных.</p>
<p>Каждая из ее физических проб отличается уникальным десятизначным
идентификатором, например ‘NENE01729A’. Этот идентификатор используется
в её журнале для записи местоположения, времени, глубины и других
характеристик образца, поэтому она решает использовать его в названиях
файлов данных. Поскольку выходные данные анализатора являются простым
текстом, тот назовёт свои файлы <code>NENE01729A.txt</code>,
<code>NENE01812A.txt</code> и так далее. Все 1520 файлов будут размещены
в одном каталоге.</p>
<p>Теперь, находясь в своем текущем каталоге
<code>shell-lesson-data</code>, Нелли может увидеть, какие файлы у неё
есть, используя команду:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="ex">$</span> ls north-pacific-gyre/</span></code></pre>
</div>
<p>Эта команда требует много ввода, но Нелли может позволить оболочке
выполнить большую часть работы за неё с помощью <strong>автодополнения
по клавише Tab</strong>. Если она введет:</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="ex">$</span> ls nor</span></code></pre>
</div>
<p>а затем нажмёт <kbd>Tab</kbd> (клавишу табуляции на клавиатуре),
оболочка автоматически завершит имя каталога за неё:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="ex">$</span> ls north-pacific-gyre/</span></code></pre>
</div>
<p>Если нажать <kbd>Tab</kbd> снова, ничего не произойдет, так как
существует несколько вариантов для заполнения. Двойное нажатие
<kbd>Tab</kbd> выведет список всех файлов.</p>
<p>Если после Нелли нажмёт <kbd>G</kbd>, а затем снова <kbd>Tab</kbd>,
оболочка добавит ‘goo’, так как все файлы, начинающиеся с ‘g’, содержат
первые три символа ‘goo’.</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="ex">$</span> ls north-pacific-gyre/goo</span></code></pre>
</div>
<p>Чтобы увидеть все эти файлы, Нелли может снова дважды нажать
<kbd>Tab</kbd>.</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="fu">ls</span> north-pacific-gyre/goo</span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a><span class="ex">goodiff.sh</span>   goostats.sh</span></code></pre>
</div>
<p><strong>Автодополнением по клавише Tab</strong> используется во
многих других инструментах.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Файловая система отвечает за управление информацией на диске.</li>
<li>Информация хранится в файлах, которые размещены в каталогах
(папках).</li>
<li>Каталоги также могут содержать другие каталоги, образуя дерево
каталогов.</li>
<li>
<code>pwd</code> выводит текущий рабочий каталог пользователя.</li>
<li>
<code>ls [path]</code> выводит список конкретного файла или
каталога. <code>ls</code> без аргументов выводит содержимое текущего
рабочего каталога.</li>
<li>
<code>cd [path]</code> изменяет текущий рабочий каталог.</li>
<li>Большинство команд имеют опции, начинающиеся с одного дефиса
(<code>-</code>).</li>
<li>Имена каталогов в пути разделяются символом <code>/</code> в Unix и
<code>\</code> в Windows.</li>
<li>
<code>/</code> обозначает корневой каталог всей файловой
системы.</li>
<li>Абсолютный путь указывает местоположение, начиная с корневого
каталога файловой системы.</li>
<li>Относительный путь указывает местоположение относительно текущего
рабочего каталога.</li>
<li>
<code>.</code> означает ‘текущий каталог’, <code>..</code> означает
‘каталог уровнем выше’.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-03-create"><p>Content from <a href="03-create.html">Работа с файлами и каталогами</a></p>
<hr>
<p>Last updated on 2024-09-07 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/03-create.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Как я могу создать, скопировать и удалить файлы и каталоги?</li>
<li>Как я могу редактировать файлы?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Создать иерархию каталогов, соответствующую заданной схеме.</li>
<li>Создать файлы в этой иерархии с помощью редактора или путем
копирования и переименования существующих файлов.</li>
<li>Удалить, скопировать и переместить указанные файлы и/или
каталоги.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="создание-каталогов">Создание каталогов<a class="anchor" aria-label="anchor" href="#%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2"></a>
</h2>
<hr class="half-width">
<p>Теперь мы знаем, как исследовать файлы и каталоги, но как их
создать?</p>
<p>В этом разделе мы узнаем, как создавать и перемещать файлы и
каталоги, используя каталог <code>exercise-data/writing</code> в
качестве примера.</p>
<div class="section level3">
<h3 id="шаг-первый-проверим-где-мы-находимся-и-что-у-нас-уже-есть">Шаг первый: проверим, где мы находимся и что у нас уже есть<a class="anchor" aria-label="anchor" href="#%D1%88%D0%B0%D0%B3-%D0%BF%D0%B5%D1%80%D0%B2%D1%8B%D0%B9-%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%B8%D0%BC-%D0%B3%D0%B4%D0%B5-%D0%BC%D1%8B-%D0%BD%D0%B0%D1%85%D0%BE%D0%B4%D0%B8%D0%BC%D1%81%D1%8F-%D0%B8-%D1%87%D1%82%D0%BE-%D1%83-%D0%BD%D0%B0%D1%81-%D1%83%D0%B6%D0%B5-%D0%B5%D1%81%D1%82%D1%8C"></a>
</h3>
<p>Мы всё ещё должны находиться в каталоге
<code>shell-lesson-data</code>, расположенном на рабочем столе, в чём
можно убедиться с помощью:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle/Desktop/shell-lesson-data</code></pre>
</div>
<p>Далее перейдём в каталог <code>exercise-data/writing</code> и
посмотрим, что в нём содержится:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> cd exercise-data/writing/</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>haiku.txt  LittleWomen.txt</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="создание-каталога">Создание каталога<a class="anchor" aria-label="anchor" href="#%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B0"></a>
</h3>
<p>Создадим новый каталог под названием <code>thesis</code>, используя
команду <code>mkdir thesis</code> (которая не выведет никакого
результата):</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> mkdir thesis</span></code></pre>
</div>
<p>Как можно догадаться по названию, <code>mkdir</code> означает
‘<strong>m</strong>a<strong>k</strong>e <strong>dir</strong>ectory
(’создать каталог’). Так как <code>thesis</code> — это относительный
путь (т.е. не имеет ведущего слэша, как в
<code>/what/ever/thesis</code>), новый каталог создаётся в текущем
рабочем каталоге:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>haiku.txt  LittleWomen.txt  thesis/</code></pre>
</div>
<p>Поскольку мы только что создали каталог <code>thesis</code>, в нём
пока ничего нет:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> thesis</span></code></pre>
</div>
<p>Обратите внимание, что <code>mkdir</code> не ограничивается созданием
одного каталога за раз. Опция -p позволяет <code>mkdir</code> создать
каталог с вложенными подкаталогами за одну операцию:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> mkdir <span class="at">-p</span> ../project/data ../project/results</span></code></pre>
</div>
<p>Опция <code>-R</code> для команды <code>ls</code> выведет все
вложенные подкаталоги внутри каталога. Давайте используем команду
<code>ls -FR</code>, чтобы рекурсивно вывести новую иерархию каталогов,
которую мы только что создали в каталоге <code>project</code>:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-FR</span> ../project</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>../project/:
data/  results/

../project/data:

../project/results:</code></pre>
</div>
<div id="два-способа-сделать-одно-и-то-же" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="два-способа-сделать-одно-и-то-же" class="callout-inner">
<h3 class="callout-title">Два способа сделать одно и то же</h3>
<div class="callout-content">
<p>Использование оболочки для создания каталога ничем не отличается от
использования файлового менеджера. Если вы откроете текущий каталог с
помощью графического файлового менеджера вашей операционной системы,
каталог <code>thesis</code> также появится там. Хотя оболочка и файловый
менеджер — это два разных способа взаимодействия с файлами, сами файлы и
каталоги остаются одними и теми же.</p>
</div>
</div>
</div>
<div id="хорошие-имена-для-файлов-и-каталогов" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="хорошие-имена-для-файлов-и-каталогов" class="callout-inner">
<h3 class="callout-title">Хорошие имена для файлов и каталогов</h3>
<div class="callout-content">
<p>Сложные имена файлов и каталогов могут сильно усложнить вашу работу в
командной строке. Вот несколько полезных советов по именованию файлов и
каталогов.</p>
<ol style="list-style-type: decimal">
<li>Не используйте пробелы.</li>
</ol>
<p>Пробелы могут делать имена более понятными, но так как пробелы
используются для разделения аргументов в командной строке, лучше
избегать их в именах файлов и каталогов. Вместо этого можно использовать
<code>-</code> или <code>_</code> (например,
<code>north-pacific-gyre/</code> вместо
<code>north pacific gyre/</code>). Попробуйте ввести
<code>mkdir north pacific gyre</code> и посмотрите, какой каталог (а
точнее, каталоги!) будут созданы, когда вы проверите результат командой
<code>ls -F</code>.</p>
<ol start="2" style="list-style-type: decimal">
<li>Не начинайте имя с дефиса (символа <code>-</code>).</li>
</ol>
<p>Команды интерпретируют имена, начинающиеся с -, как опции
команды.</p>
<ol start="3" style="list-style-type: decimal">
<li>Ограничьтесь использованием букв, цифр и символов <code>.</code>,
<code>-</code> и <code>_</code>.</li>
</ol>
<p>Многие другие символы имеют особые значения в командной строке. Мы
изучим некоторые из них в этом уроке. Существуют специальные символы,
которые могут привести к тому, что ваша команда не сработает так, как
ожидалось, и даже могут вызвать потерю данных.</p>
<p>Если вам нужно обратиться к файлам или каталогам с пробелами или
другими специальными символами в именах, окружите имя в одинарные <a href="https://www.gnu.org/software/bash/manual/html_node/Quoting.html" class="external-link">кавычки</a>
(<code>''</code>).</p>
</div>
</div>
</div>

</div>
<div class="section level3">
<h3 id="создание-текстового-файла">Создание текстового файла<a class="anchor" aria-label="anchor" href="#%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D1%82%D0%B5%D0%BA%D1%81%D1%82%D0%BE%D0%B2%D0%BE%D0%B3%D0%BE-%D1%84%D0%B0%D0%B9%D0%BB%D0%B0"></a>
</h3>
<p>Давайте изменим наш рабочий каталог на <code>thesis</code>, используя
команду <code>cd</code>, а затем запустим текстовый редактор под
названием Nano, чтобы создать файл с именем <code>draft.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> cd thesis</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="ex">$</span> nano draft.txt</span></code></pre>
</div>
<div id="какой-редактор" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="какой-редактор" class="callout-inner">
<h3 class="callout-title">Какой редактор?</h3>
<div class="callout-content">
<p>Когда мы говорим, что nano — это текстовый редактор, мы действительно
имеем в виду именно “текстовый”. Он может работать только с текстовыми
данными, а не с таблицами, изображениями или другими типами медиа. Мы
используем его в примерах, потому что это один из самых простых
текстовых редакторов. Однако из-за этой простоты он может оказаться
недостаточно мощным или гибким для работы, которую вам нужно будет
выполнять после этого урока. На Unix-системах (таких как Linux и macOS)
многие программисты используют <a href="https://www.gnu.org/software/emacs/" class="external-link">Emacs</a> или <a href="https://www.vim.org/" class="external-link">Vim</a> (оба требуют больше времени для
изучения), или графический редактор, такой как <a href="https://projects.gnome.org/gedit/" class="external-link">Gedit</a> или <a href="https://code.visualstudio.com/" class="external-link">VScode</a>. На Windows вы можете
использовать <a href="https://notepad-plus-plus.org/" class="external-link">Notepad++</a>. В
Windows также есть встроенный редактор <code>notepad</code>, который
можно запустить из командной строки так же, как и <code>nano</code>, для
целей этого урока.</p>
<p>Независимо от того, какой редактор вы используете, вам нужно знать,
где он сохраняет файлы. Если вы запускаете его из оболочки, он
(вероятно) будет использовать ваш текущий рабочий каталог в качестве
места по умолчанию. Если вы используете меню “Пуск” на компьютере,
редактор может захотеть сохранить файлы на вашем рабочем столе или в
папке “Документы”. Это можно изменить, перейдя в другой каталог при
первом сохранении файла с помощью команды “Сохранить как…”.</p>
</div>
</div>
</div>
<p>Давайте наберём несколько строк текста.</p>
<figure><img src="fig/nano-screenshot.png" alt="Скриншот работы в текстовом редакторе nano с текстом ‘It’s not publish or perish any more, it’s share and thrive’" class="figure mx-auto d-block"><div class="figcaption">Скриншот работы в текстовом редакторе nano с
текстом ‘It’s not publish or perish any more, it’s share and
thrive’</div>
</figure><p>Когда мы будем довольны нашим текстом, мы можем нажать
<kbd>Ctrl</kbd>+<kbd>O</kbd> (удерживая клавишу <kbd>Ctrl</kbd>, нажмите
клавишу <kbd>O</kbd>), чтобы записать данные на диск. Нам будет
предложено ввести имя файла, в котором будет сохранён текст. Нажмите
<kbd>Return</kbd>, чтобы подтвердить предлагаемое имя
<code>draft.txt</code>.</p>
<p>После того как файл будет сохранён, мы можем использовать
<kbd>Ctrl</kbd>+<kbd>X</kbd>, чтобы выйти из редактора и вернуться в
оболочку.</p>
<div id="клавиша-control-ctrl-или" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="клавиша-control-ctrl-или" class="callout-inner">
<h3 class="callout-title">Клавиша Control (Ctrl или ^)</h3>
<div class="callout-content">
<p>Клавиша Control также называется клавишей ‘Ctrl’. Существует
несколько способов обозначить использование клавиши Control. Например,
вы можете увидеть инструкцию нажать <kbd>Control</kbd>, удерживая ее,
нажать клавишу <kbd>X</kbd>. Это можно обозначить как:</p>
<ul>
<li><code>Control-X</code></li>
<li><code>Control+X</code></li>
<li><code>Ctrl-X</code></li>
<li><code>Ctrl+X</code></li>
<li><code>^X</code></li>
<li><code>C-x</code></li>
</ul>
<p>В nano внизу экрана вы увидите <code>^G Get Help ^O WriteOut</code>.
Это означает, что вы можете использовать <code>Control-G</code> для
получения справки и <code>Control-O</code> для сохранения файла.</p>
</div>
</div>
</div>
<p>После выхода, <code>nano</code> не выводит какие-либо сообщения на
экран, но команда <code>ls</code> теперь покажет, что мы создали файл
под названием <code>draft.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">draft.txt</span></span></code></pre>
</div>
<div id="создание-файлов-другим-способом" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="создание-файлов-другим-способом" class="callout-inner">
<h3 class="callout-title">Создание файлов другим способом</h3>
<div class="callout-content">
<p>Мы уже увидели, как создавать текстовые файлы с помощью редактора
<code>nano</code>. Теперь попробуйте следующую команду:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> touch my_file.txt</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li><p>Что делает команда <code>touch</code>? Появляется ли файл в вашем
текущем каталоге при просмотре через графический файловый
менеджер?</p></li>
<li><p>Используйте <code>ls -l</code>, чтобы исследовать файлы. Какого
размера файл <code>my_file.txt</code>?</p></li>
<li><p>Когда может быть полезно создать файл таким способом?</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Решение </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><p>Команда <code>touch</code> создает новый файл под названием
<code>my_file.txt</code> в вашем текущем каталоге. Вы можете увидеть
этот созданный файл, набрав команду <code>ls</code> в командной строке.
Файл <code>my_file.txt</code> также будет виден в вашем графическом
файловом менеджере.</p></li>
<li><p>Если вы исследуете файл с помощью команды <code>ls -l</code>, то
заметите, что размер файла <code>my_file.txt</code> равен 0 байтам.
Другими словами, он не содержит данных. Если вы откроете файл
<code>my_file.txt</code> в текстовом редакторе, он будет пуст.</p></li>
<li><p>Некоторые программы не создают выходные файлы самостоятельно, а
требуют, чтобы пустые файлы уже были созданы. Когда программа
запускается, она ищет существующий файл, чтобы заполнить его своими
данными. Команда <code>touch</code> позволяет эффективно создавать
пустой текстовый файл, который можно использовать такими
программами.</p></li>
</ol>
</div>
</div>
</div>
</div>
<div id="создание-файлов-другим-способом" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="создание-файлов-другим-способом" class="callout-inner">
<h3 class="callout-title">Создание файлов другим способом<em>
(continued)</em>
</h3>
<div class="callout-content">
<p>Чтобы избежать путаницы в дальнейшем, рекомендуем удалить только что
созданный файл перед продолжением урока, иначе дальнейшие выводы могут
отличаться от приведённых в примере. Для этого используйте следующую
команду:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> rm my_file.txt</span></code></pre>
</div>
</div>
</div>
</div>
<div id="что-в-имени" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="что-в-имени" class="callout-inner">
<h3 class="callout-title">Что в имени?</h3>
<div class="callout-content">
<p>Вы могли заметить, что все файлы Нелли названы по шаблону ‘что-то
точка что-то’, и в этой части урока мы всегда использовали расширение
<code>.txt</code>. Это всего лишь соглашение; мы можем назвать файл
<code>mythesis</code> или как угодно иначе. Однако большинство людей
используют двухсоставные имена, чтобы помочь себе (и своим программам)
различать разные типы файлов. Вторая часть такого имени называется
<strong>расширением файла</strong> и указывает на тип данных, которые
содержит файл: <code>.txt</code> обозначает простой текстовый файл,
<code>.pdf</code> указывает на PDF-документ, <code>.cfg</code> — это
файл конфигурации, полный параметров для какой-либо программы,
<code>.png</code> — это изображение в формате PNG и так далее.</p>
<p>Это всего лишь соглашение, хотя и важное. Файлы содержат только
байты; нам и нашим программам предстоит интерпретировать эти байты в
соответствии с правилами для текстовых файлов, PDF-документов,
конфигурационных файлов, изображений и так далее.</p>
<p>Назвав PNG-изображение кита как <code>whale.mp3</code>, вы не
превратите его в запись звуков китов, хотя это <em>может</em> привести к
тому, что операционная система свяжет файл с музыкальным плеером. В этом
случае, если кто-то дважды щёлкнет на <code>whale.mp3</code> в файловом
менеджере, музыкальный плеер автоматически (и ошибочно) попытается
открыть файл <code>whale.mp3</code>.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="перемещение-файлов-и-каталогов">Перемещение файлов и каталогов<a class="anchor" aria-label="anchor" href="#%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D1%89%D0%B5%D0%BD%D0%B8%D0%B5-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D0%B8-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2"></a>
</h2>
<hr class="half-width">
<p>Возвращаемся в каталог
<code>shell-lesson-data/exercise-data/writing</code>:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/shell-lesson-data/exercise-data/writing</span></code></pre>
</div>
<p>В нашем каталоге <code>thesis</code> есть файл
<code>draft.txt</code>, который не очень информативно назван, поэтому
давайте изменим имя файла с помощью команды <code>mv</code>, которая
сокращённо означает ‘<strong>m</strong>o<strong>v</strong>e’
(переместить):</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> mv thesis/draft.txt thesis/quotes.txt</span></code></pre>
</div>
<p>Первый аргумент указывает <code>mv</code>, что мы перемещаем, а
второй — куда. В данном случае мы перемещаем
<code>thesis/draft.txt</code> в <code>thesis/quotes.txt</code>, что
фактически равносильно переименованию файла. Как и ожидалось, команда
<code>ls</code> показывает, что теперь в каталоге <code>thesis</code>
находится один файл под названием <code>quotes.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> ls thesis</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">quotes.txt</span></span></code></pre>
</div>
<p>Будьте осторожны при указании имени целевого файла, так как команда
<code>mv</code> без лишних слов перезапишет любой существующий файл с
тем же именем, что может привести к потере данных. По умолчанию
<code>mv</code> не запрашивает подтверждения перед перезаписью файлов.
Однако дополнительная опция, <code>mv -i</code> (или
<code>mv --interactive</code>), заставит команду <code>mv</code>
запрашивать такое подтверждение.</p>
<p>Обратите внимание, что команда <code>mv</code> также работает и с
каталогами.</p>
<p>Давайте переместим файл <code>quotes.txt</code> в текущий рабочий
каталог. Мы снова используем команду <code>mv</code>, но на этот раз
укажем только имя каталога в качестве второго аргумента, чтобы сообщить
<code>mv</code>, что мы хотим сохранить имя файла, но поместить файл в
новое место. (Именно поэтому команда называется ‘move’.) В данном случае
каталог, который мы укажем, — это специальный каталог <code>.</code>,
который мы упоминали ранее.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> mv thesis/quotes.txt .</span></code></pre>
</div>
<p>В результате этой команды файл переместится из каталога, в котором он
находился, в текущий рабочий каталог. Теперь команда <code>ls</code>
показывает, что каталог <code>thesis</code> пуст:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> ls thesis</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$</code></pre>
</div>
<p>Кроме того, мы можем убедиться, что файл quotes.txt больше не
находится в каталоге thesis, пытаясь вывести его с помощью
<code>ls</code> в явном виде:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> ls thesis/quotes.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>ls: cannot access 'thesis/quotes.txt': No such file or directory</code></pre>
</div>
<p>Команда <code>ls</code> с указанием имени файла или каталога в
качестве аргумента выводит только запрашиваемый файл или содержимое
каталога. Если файл, указанный в аргументе, не существует, оболочка
вернёт ошибку, как показано выше. Мы можем использовать это, чтобы
убедиться, что файл <code>quotes.txt</code> теперь находится в нашем
текущем каталоге:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="ex">$</span> ls quotes.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">quotes.txt</span></span></code></pre>
</div>
<div id="перемещение-файлов-в-новую-папку" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="перемещение-файлов-в-новую-папку" class="callout-inner">
<h3 class="callout-title">Перемещение файлов в новую папку</h3>
<div class="callout-content">
<p>После выполнения следующих команд Джейми понимает, что она поместила
файлы <code>sucrose.dat</code> и <code>maltose.dat</code> не в ту папку.
Эти файлы должны были быть помещены в папку <code>raw</code>.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a> <span class="ex">analyzed/</span> raw/</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> analyzed</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="ex">fructose.dat</span> glucose.dat maltose.dat sucrose.dat</span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="ex">$</span> cd analyzed</span></code></pre>
</div>
<p>Заполните пропуски, чтобы переместить эти файлы в папку
<code>raw/</code> (ту, куда Джейми забыла их поместить).</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">$</span> mv sucrose.dat maltose.dat ____/____</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Решение </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> mv sucrose.dat maltose.dat ../raw</span></code></pre>
</div>
<p>Напомним, что <code>..</code> ссылается на родительский каталог (т.е.
на один уровень выше текущего каталога), а <code>.</code> ссылается на
текущий каталог.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="копирование-файлов-и-каталогов">Копирование файлов и каталогов<a class="anchor" aria-label="anchor" href="#%D0%BA%D0%BE%D0%BF%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D0%B8-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2"></a>
</h2>
<hr class="half-width">
<p>Команда <code>cp</code> работает так же, как и <code>mv</code>, за
исключением того, что она копирует файл вместо его перемещения. Мы можем
проверить, что она сработала правильно, используя команду
<code>ls</code> с двумя путями в качестве аргументов — как и большинство
команд Unix, <code>ls</code> может принимать несколько путей сразу:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="ex">$</span> cp quotes.txt thesis/quotations.txt</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="ex">$</span> ls quotes.txt thesis/quotations.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>quotes.txt   thesis/quotations.txt</code></pre>
</div>
<p>Мы также можем скопировать каталог со всем его содержимым, используя
опцию <a href="https://ru.wikipedia.org/wiki/%D0%A0%D0%B5%D0%BA%D1%83%D1%80%D1%81%D0%B8%D1%8F" class="external-link">рекурсии</a>
<code>-r</code>, например, для создания резервной копии каталога:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">$</span> cp <span class="at">-r</span> thesis thesis_backup</span></code></pre>
</div>
<p>Мы можем проверить результат, перечислив содержимое обоих каталогов
<code>thesis</code> и <code>thesis_backup</code>:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">$</span> ls thesis thesis_backup</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">thesis</span><span class="op">:</span></span>
<span><span class="va">quotations.txt</span></span>
<span></span>
<span><span class="va">thesis_backup</span><span class="op">:</span></span>
<span><span class="va">quotations.txt</span></span></code></pre>
</div>
<p>Важно включить флаг <code>-r</code>. Если вы хотите скопировать
каталог и не укажете эту опцию, вы увидите сообщение, что каталог
пропущен, потому что <code>-r</code> не указано.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> cp thesis thesis_backup</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="ex">cp:</span> <span class="at">-r</span> not specified<span class="kw">;</span> <span class="ex">omitting</span> directory <span class="st">'thesis'</span></span></code></pre>
</div>
<div id="переименование-файлов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="переименование-файлов" class="callout-inner">
<h3 class="callout-title">Переименование файлов</h3>
<div class="callout-content">
<p>Предположим, вы создали текстовый файл в вашем текущем каталоге,
чтобы содержать список статистических тестов, которые вам нужно будет
провести для анализа данных, и назвали его
<code>statstics.txt</code>.</p>
<p>После создания и сохранения файла вы понимаете, что ошиблись в
названии! Вы хотите исправить ошибку. Какую из следующих команд можно
использовать для этого?</p>
<ol style="list-style-type: decimal">
<li><code>cp statstics.txt statistics.txt</code></li>
<li><code>mv statstics.txt statistics.txt</code></li>
<li><code>mv statstics.txt .</code></li>
<li><code>cp statstics.txt .</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Решение </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Нет. Хотя это создаст файл с правильным именем, файл с неправильным
именем всё ещё останется в каталоге, и его нужно будет удалить.</li>
<li>Да, это сработает для переименования файла.</li>
<li>Нет, точка (<code>.</code>) указывает, куда переместить файл, но не
предоставляет новое имя файла, программа не будет работать, если имя
конечного файла совпадает с исходным.</li>
<li>Нет, точка (<code>.</code>) указывает, куда копировать файл, но не
предоставляет новое имя файла, программа не будет работать, если имя
конечного файла совпадает с исходным.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="перемещение-и-копирование" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="перемещение-и-копирование" class="callout-inner">
<h3 class="callout-title">Перемещение и копирование</h3>
<div class="callout-content">
<p>Каков результат выполнения заключительной команды <code>ls</code> в
приведённой ниже последовательности?</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/jamie/data</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">proteins.dat</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="ex">$</span> mkdir recombined</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="ex">$</span> mv proteins.dat recombined/</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a><span class="ex">$</span> cp recombined/proteins.dat ../proteins-saved.dat</span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li><code>proteins-saved.dat recombined</code></li>
<li><code>recombined</code></li>
<li><code>proteins.dat recombined</code></li>
<li><code>proteins-saved.dat</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Решение </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>Мы начинаем в каталоге <code>/Users/jamie/data</code> и создаём новую
папку под названием <code>recombined</code>. Вторая строка перемещает
(<code>mv</code>) файл <code>proteins.dat</code> в новую папку
(<code>recombined</code>). Третья строка создаёт копию файла, который мы
только что переместили. Сложность здесь заключается в том, куда был
скопирован файл. Напомним, что <code>..</code> означает ‘подняться на
уровень выше’, поэтому скопированный файл теперь находится в
<code>/Users/jamie</code>. Обратите внимание, что <code>..</code>
интерпретируется относительно текущего рабочего каталога, а не
относительно местоположения копируемого файла. Таким образом,
единственное, что покажет <code>ls</code> в каталоге
<code>/Users/jamie/data</code>, — это папка <code>recombined</code>.</p>
<ol style="list-style-type: decimal">
<li>Нет, см. объяснение выше. <code>proteins-saved.dat</code> находится
в <code>/Users/jamie</code>.</li>
<li>Да.</li>
<li>Нет, см. объяснение выше. Файл <code>proteins.dat</code> находится в
<code>/Users/jamie/data/recombined</code>.</li>
<li>Нет, см. объяснение выше. <code>proteins-saved.dat</code> находится
в <code>/Users/jamie</code>.</li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="удаление-файлов-и-каталогов">Удаление файлов и каталогов<a class="anchor" aria-label="anchor" href="#%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D0%B8-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2"></a>
</h2>
<hr class="half-width">
<p>Возвращаемся в каталог
<code>shell-lesson-data/exercise-data/writing</code>. Давайте приведём
этот каталог в порядок, удалив файл <code>quotes.txt</code>, который мы
создали. Команда Unix, которую мы будем использовать для этого, — это
<code>rm</code> (сокращение от
‘<strong>r</strong>e<strong>m</strong>ove’ — удалить):</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> rm quotes.txt</span></code></pre>
</div>
<p>Мы можем проверить, что файл был удалён, с помощью команды ls:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="ex">$</span> ls quotes.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>ls: cannot access 'quotes.txt': No such file or directory</code></pre>
</div>
<div id="удаление-безвозвратно" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="удаление-безвозвратно" class="callout-inner">
<h3 class="callout-title">Удаление безвозвратно</h3>
<div class="callout-content">
<p>В Unix-оболочке нет корзины, из которой можно было бы восстановить
удалённые файлы (хотя большинство графических интерфейсов для Unix её
имеют). Вместо этого, когда мы удаляем файлы, они отвязываются от
файловой системы, чтобы их место на диске можно было перераспределить.
Существуют инструменты для поиска и восстановления удалённых файлов, но
нет никакой гарантии, что они сработают в каждом конкретном случае, так
как компьютер может сразу перераспределить место на диске, где был
файл.</p>
</div>
</div>
</div>
<div id="безопасное-использование-rm" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="безопасное-использование-rm" class="callout-inner">
<h3 class="callout-title">Безопасное использование <code>rm</code>
</h3>
<div class="callout-content">
<p>Что произойдёт, когда мы выполним команду
<code>rm -i thesis_backup/quotations.txt</code>? Зачем может
понадобиться эта защита при использовании <code>rm</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Решение </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>rm: remove regular file 'thesis_backup/quotations.txt'? y</code></pre>
</div>
<p>Опция <code>-i</code> перед каждым удалением запрашивает
подтверждение (используйте <kbd>Y</kbd>, чтобы подтвердить удаление, или
<kbd>N</kbd>, чтобы сохранить файл). Поскольку в Unix-оболочке нет
корзины, все удалённые файлы исчезают навсегда. Используя опцию
<code>-i</code>, у нас есть шанс проверить, удаляем ли мы только те
файлы, которые действительно хотим удалить.</p>
</div>
</div>
</div>
</div>
<p>Если мы попробуем удалить каталог <code>thesis</code> с помощью
команды <code>rm thesis</code>, то получим сообщение об ошибке:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="ex">$</span> rm thesis</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>rm: cannot remove 'thesis': Is a directory</code></pre>
</div>
<p>Это происходит потому, что по умолчанию команда <code>rm</code>
работает только с файлами, а не с каталогами.</p>
<p>Команда <code>rm</code> может удалить каталог <em>вместе со всем его
содержимым</em>, если мы используем опцию рекурсии <code>-r</code>, и
сделает это <em>без запросов подтверждения</em>:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="ex">$</span> rm <span class="at">-r</span> thesis</span></code></pre>
</div>
<p>Учитывая, что в оболочке нет возможности восстановить удалённые
файлы, команду <code>rm -r</code> нужно использовать с большой
осторожностью (можно рассмотреть вариант использования интерактивной
опции <code>rm -r -i</code>).</p>
</section><section><h2 class="section-heading" id="операции-с-несколькими-файлами-и-каталогами">Операции с несколькими файлами и каталогами<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8-%D1%81-%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%B8%D0%BC%D0%B8-%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC%D0%B8-%D0%B8-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B0%D0%BC%D0%B8"></a>
</h2>
<hr class="half-width">
<p>Часто возникает необходимость скопировать или переместить сразу
несколько файлов. Это можно сделать, указав список отдельных имён файлов
или задать шаблон с использованием символов подстановки. Подстановочные
символы — это специальные символы, которые можно использовать для
обозначения неизвестных символов или наборов символов при работе с
файловой системой Unix.</p>
<div id="копирование-нескольких-файлов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="копирование-нескольких-файлов" class="callout-inner">
<h3 class="callout-title">Копирование нескольких файлов</h3>
<div class="callout-content">
<p>Для этого упражнения можно протестировать команды в каталоге
<code>shell-lesson-data/exercise-data</code>.</p>
<p>В приведённом ниже примере, что делает команда <code>cp</code>, когда
ей передают несколько имён файлов и имя каталога?</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="ex">$</span> mkdir backup</span>
<span id="cb49-2"><a href="#cb49-2" tabindex="-1"></a><span class="ex">$</span> cp creatures/minotaur.dat creatures/unicorn.dat backup/</span></code></pre>
</div>
<p>В следующем примере, что делает команда <code>cp</code>, когда ей
передают три или более имён файлов?</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="ex">$</span> cd creatures</span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>basilisk.dat  minotaur.dat  unicorn.dat</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="ex">$</span> cp minotaur.dat unicorn.dat basilisk.dat</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Решение </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<p>Если команде <code>cp</code> передаются несколько имён файлов, а
затем имя каталога (т.е. каталог назначения должен быть последним
аргументом), <code>cp</code> копирует файлы в указанный каталог.</p>
<p>Если команде передать три имени файлов, она выдаст ошибку, как
показано ниже, потому что команда ожидает последним аргументом имя
каталога.</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>cp: target 'basilisk.dat' is not a directory</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="использование-подстановочных-символов-для-работы-с-несколькими-файлами-одновременно">Использование подстановочных символов для работы с несколькими
файлами одновременно<a class="anchor" aria-label="anchor" href="#%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BF%D0%BE%D0%B4%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BE%D1%87%D0%BD%D1%8B%D1%85-%D1%81%D0%B8%D0%BC%D0%B2%D0%BE%D0%BB%D0%BE%D0%B2-%D0%B4%D0%BB%D1%8F-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B-%D1%81-%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%B8%D0%BC%D0%B8-%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC%D0%B8-%D0%BE%D0%B4%D0%BD%D0%BE%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE"></a>
</h3>
<div id="подстановочные-символы" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="подстановочные-символы" class="callout-inner">
<h3 class="callout-title">Подстановочные символы</h3>
<div class="callout-content">
<p><code>*</code> — это <strong>подстановочный символ</strong>
(<strong>wildcard</strong>), который представляет <strong>ноль или
более</strong> других символов. Рассмотрим каталог
<code>shell-lesson-data/exercise-data/alkanes</code>: <code>*.pdb</code>
обозначает <code>ethane.pdb</code>, <code>propane.pdb</code> и любой
файл, который оканчивается на <code>.pdb</code>. С другой стороны,
<code>p*.pdb</code> обозначает только <code>pentane.pdb</code> и
<code>propane.pdb</code>, так как символ ‘p’ в начале может представлять
только те имена файлов, которые начинаются с буквы ‘p’.</p>
<p><code>?</code> также является подстановочным символом, но он
обозначает <strong>ровно один</strong> символ. Таким образом,
<code>?ethane.pdb</code> может обозначать <code>methane.pdb</code>, в то
время как <code>*ethane.pdb</code> обозначает и <code>ethane.pdb</code>,
и <code>methane.pdb</code>.</p>
<p>Подстановочные символы могут использоваться в сочетании друг с
другом. Например, <code>???ane.pdb</code> указывает три любых символа,
за которыми следует <code>ane.pdb</code>, что даёт
<code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>octane.pdb</code>.</p>
<p>Когда оболочка видит подстановочный символ, она разворачивает его в
список совпадающих имён файлов до выполнения команды. Исключением
является случай, когда выражение с подстановочными символами не
соответствует ни одному файлу: в этом случае Bash передаёт выражение как
аргумент команды без изменений. Например, если ввести
<code>ls *.pdf</code> в каталоге <code>alkanes</code> (где содержатся
только файлы с именами, оканчивающимися на <code>.pdb</code>), то вы
получите сообщение с ошибкой о том, что файл с именем <code>*.pdf</code>
не найден. Однако обычно команды, такие как <code>wc</code> и
<code>ls</code>, видят списки имён файлов, соответствующих этим
выражениям, но не видят сами подстановочные символы. Разворачивает
подстановочные символы именно оболочка, а не другие программы.</p>
</div>
</div>
</div>
<div id="список-имён-файлов-соответствующих-шаблону" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="список-имён-файлов-соответствующих-шаблону" class="callout-inner">
<h3 class="callout-title">Список имён файлов, соответствующих шаблону</h3>
<div class="callout-content">
<p>Какая команда <code>ls</code>, запущенная в каталоге
<code>alkanes</code>, выведет следующий результат?</p>
<p><code>ethane.pdb   methane.pdb</code></p>
<ol style="list-style-type: decimal">
<li><code>ls *t*ane.pdb</code></li>
<li><code>ls *t?ne.*</code></li>
<li><code>ls *t??ne.pdb</code></li>
<li><code>ls ethane.*</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Решение </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<p>Решением является вариант №3.</p>
<ol style="list-style-type: decimal">
<li><p>Выводит все файлы, имена которых содержат ноль или более символов
(<code>*</code>), за которыми следует буква <code>t</code>, затем ноль
или более символов (<code>*</code>), за которыми следует
<code>ane.pdb</code>. Это даст <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code>,
<code>pentane.pdb</code>.</p></li>
<li><p>Выводит все файлы, имена которых начинаются с нуля или более
символов (<code>*</code>), за которыми следует буква <code>t</code>,
затем один символ (<code>?</code>), затем <code>ne.</code>, за которыми
следуют ноль или более символов (<code>*</code>). Это даст
<code>octane.pdb</code> и <code>pentane.pdb</code>, но не совпадёт с
именами, оканчивающимися на <code>thane.pdb</code>.</p></li>
<li><p>Исправляет проблему варианта 2, совпадая с двумя символами
(<code>??</code>) между <code>t</code> и <code>ne</code>. Это правильное
решение.</p></li>
<li><p>Выводит только файлы, начинающиеся с
<code>ethane.</code>.</p></li>
</ol>
</div>
</div>
</div>
</div>
<div id="ещё-о-подстановочных-символах" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="ещё-о-подстановочных-символах" class="callout-inner">
<h3 class="callout-title">Ещё о подстановочных символах</h3>
<div class="callout-content">
<p>У Сэма есть каталог, содержащий данные калибровки (calibration),
наборы данных (dataset) и описания этих наборов (dataset_overview):</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-calibration.txt</span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset1.txt</span>
<span id="cb54-4"><a href="#cb54-4" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset2.txt</span>
<span id="cb54-5"><a href="#cb54-5" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset_overview.txt</span>
<span id="cb54-6"><a href="#cb54-6" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-calibration.txt</span>
<span id="cb54-7"><a href="#cb54-7" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset1.txt</span>
<span id="cb54-8"><a href="#cb54-8" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset2.txt</span>
<span id="cb54-9"><a href="#cb54-9" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset_overview.txt</span>
<span id="cb54-10"><a href="#cb54-10" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-calibration.txt</span>
<span id="cb54-11"><a href="#cb54-11" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset1.txt</span>
<span id="cb54-12"><a href="#cb54-12" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset2.txt</span>
<span id="cb54-13"><a href="#cb54-13" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset_overview.txt</span>
<span id="cb54-14"><a href="#cb54-14" tabindex="-1"></a><span class="ex">├──</span> backup</span>
<span id="cb54-15"><a href="#cb54-15" tabindex="-1"></a><span class="ex">│  </span> ├── calibration</span>
<span id="cb54-16"><a href="#cb54-16" tabindex="-1"></a><span class="ex">│  </span> └── datasets</span>
<span id="cb54-17"><a href="#cb54-17" tabindex="-1"></a><span class="ex">└──</span> send_to_bob</span>
<span id="cb54-18"><a href="#cb54-18" tabindex="-1"></a>    <span class="ex">├──</span> all_datasets_created_on_a_23rd</span>
<span id="cb54-19"><a href="#cb54-19" tabindex="-1"></a>    <span class="ex">└──</span> all_november_files</span></code></pre>
</div>
<p>Перед тем как отправиться в новую экспедицию, Сэм хочет сделать
резервную копию данных и отправить некоторые наборы данных своему
коллеге Бобу. Сэм использует следующие команды для выполнения
задачи:</p>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>dataset<span class="pp">*</span> backup/datasets</span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a><span class="ex">$</span> cp ____calibration____ backup/calibration</span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a><span class="ex">$</span> cp 2015-____-____ send_to_bob/all_november_files/</span>
<span id="cb55-4"><a href="#cb55-4" tabindex="-1"></a><span class="ex">$</span> cp ____ send_to_bob/all_datasets_created_on_a_23rd/</span></code></pre>
</div>
<p>Помогите Сэму заполнить пропуски.</p>
<p>Окончательная структура каталогов должна выглядеть так:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-calibration.txt</span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset1.txt</span>
<span id="cb56-4"><a href="#cb56-4" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset2.txt</span>
<span id="cb56-5"><a href="#cb56-5" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset_overview.txt</span>
<span id="cb56-6"><a href="#cb56-6" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-calibration.txt</span>
<span id="cb56-7"><a href="#cb56-7" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset1.txt</span>
<span id="cb56-8"><a href="#cb56-8" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset2.txt</span>
<span id="cb56-9"><a href="#cb56-9" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset_overview.txt</span>
<span id="cb56-10"><a href="#cb56-10" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-calibration.txt</span>
<span id="cb56-11"><a href="#cb56-11" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset1.txt</span>
<span id="cb56-12"><a href="#cb56-12" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset2.txt</span>
<span id="cb56-13"><a href="#cb56-13" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset_overview.txt</span>
<span id="cb56-14"><a href="#cb56-14" tabindex="-1"></a><span class="ex">├──</span> backup</span>
<span id="cb56-15"><a href="#cb56-15" tabindex="-1"></a><span class="ex">│  </span> ├── calibration</span>
<span id="cb56-16"><a href="#cb56-16" tabindex="-1"></a><span class="ex">│  </span> │   ├── 2015-10-23-calibration.txt</span>
<span id="cb56-17"><a href="#cb56-17" tabindex="-1"></a><span class="ex">│  </span> │   ├── 2015-10-26-calibration.txt</span>
<span id="cb56-18"><a href="#cb56-18" tabindex="-1"></a><span class="ex">│  </span> │   └── 2015-11-23-calibration.txt</span>
<span id="cb56-19"><a href="#cb56-19" tabindex="-1"></a><span class="ex">│  </span> └── datasets</span>
<span id="cb56-20"><a href="#cb56-20" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-23-dataset1.txt</span>
<span id="cb56-21"><a href="#cb56-21" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-23-dataset2.txt</span>
<span id="cb56-22"><a href="#cb56-22" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-23-dataset_overview.txt</span>
<span id="cb56-23"><a href="#cb56-23" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-26-dataset1.txt</span>
<span id="cb56-24"><a href="#cb56-24" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-26-dataset2.txt</span>
<span id="cb56-25"><a href="#cb56-25" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-26-dataset_overview.txt</span>
<span id="cb56-26"><a href="#cb56-26" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-11-23-dataset1.txt</span>
<span id="cb56-27"><a href="#cb56-27" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-11-23-dataset2.txt</span>
<span id="cb56-28"><a href="#cb56-28" tabindex="-1"></a><span class="ex">│  </span>     └── 2015-11-23-dataset_overview.txt</span>
<span id="cb56-29"><a href="#cb56-29" tabindex="-1"></a><span class="ex">└──</span> send_to_bob</span>
<span id="cb56-30"><a href="#cb56-30" tabindex="-1"></a>    <span class="ex">├──</span> all_datasets_created_on_a_23rd</span>
<span id="cb56-31"><a href="#cb56-31" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-10-23-dataset1.txt</span>
<span id="cb56-32"><a href="#cb56-32" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-10-23-dataset2.txt</span>
<span id="cb56-33"><a href="#cb56-33" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-10-23-dataset_overview.txt</span>
<span id="cb56-34"><a href="#cb56-34" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-11-23-dataset1.txt</span>
<span id="cb56-35"><a href="#cb56-35" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-11-23-dataset2.txt</span>
<span id="cb56-36"><a href="#cb56-36" tabindex="-1"></a>    <span class="ex">│  </span> └── 2015-11-23-dataset_overview.txt</span>
<span id="cb56-37"><a href="#cb56-37" tabindex="-1"></a>    <span class="ex">└──</span> all_november_files</span>
<span id="cb56-38"><a href="#cb56-38" tabindex="-1"></a>        <span class="ex">├──</span> 2015-11-23-calibration.txt</span>
<span id="cb56-39"><a href="#cb56-39" tabindex="-1"></a>        <span class="ex">├──</span> 2015-11-23-dataset1.txt</span>
<span id="cb56-40"><a href="#cb56-40" tabindex="-1"></a>        <span class="ex">├──</span> 2015-11-23-dataset2.txt</span>
<span id="cb56-41"><a href="#cb56-41" tabindex="-1"></a>        <span class="ex">└──</span> 2015-11-23-dataset_overview.txt</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8"> Решение </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" data-bs-parent="#accordionSolution8" aria-labelledby="headingSolution8">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>calibration.txt backup/calibration</span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a><span class="ex">$</span> cp 2015-11-<span class="pp">*</span> send_to_bob/all_november_files/</span>
<span id="cb57-3"><a href="#cb57-3" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>-23-dataset<span class="pp">*</span> send_to_bob/all_datasets_created_on_a_23rd/</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="организация-каталогов-и-файлов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="организация-каталогов-и-файлов" class="callout-inner">
<h3 class="callout-title">Организация каталогов и файлов</h3>
<div class="callout-content">
<p>Джейми работает над проектом и замечает, что её файлы не очень хорошо
организованы:</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>analyzed/  fructose.dat    raw/   sucrose.dat</code></pre>
</div>
<p>Файлы <code>fructose.dat</code> и <code>sucrose.dat</code> содержат
результаты её анализа данных. Какие команды, рассмотренные в этом уроке,
она должна выполнить, чтобы получить следующий результат?</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>analyzed/   raw/</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a><span class="ex">$</span> ls analyzed</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>fructose.dat    sucrose.dat</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution9" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution9" aria-expanded="false" aria-controls="collapseSolution9">
  <h4 class="accordion-header" id="headingSolution9"> Решение </h4>
</button>
<div id="collapseSolution9" class="accordion-collapse collapse" data-bs-parent="#accordionSolution9" aria-labelledby="headingSolution9">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a><span class="fu">mv</span> <span class="pp">*</span>.dat analyzed</span></code></pre>
</div>
<p>Джейми нужно переместить файлы <code>fructose.dat</code> и
<code>sucrose.dat</code> в каталог <code>analyzed</code>. Оболочка
развернёт <code>*.dat</code>, чтобы совпадать со всеми файлами,
заканчивающимися на <code>.dat</code> в текущем каталоге. Затем команда
<code>mv</code> переместит список файлов <code>.dat</code> в каталог
<code>analyzed</code>.</p>
</div>
</div>
</div>
</div>
<div id="воспроизведение-структуры-каталогов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="воспроизведение-структуры-каталогов" class="callout-inner">
<h3 class="callout-title">Воспроизведение структуры каталогов</h3>
<div class="callout-content">
<p>Вы начинаете новый эксперимент и хотите дублировать структуру
каталогов из предыдущего эксперимента, чтобы добавить новые данные.</p>
<p>Предположим, что предыдущий эксперимент находится в каталоге
<code>2016-05-18</code>, который содержит папку <code>data</code>,
которая, в свою очередь, содержит папки с именами <code>raw</code> и
<code>processed</code>, в которых находятся файлы данных. Цель —
скопировать структуру каталогов из папки <code>2016-05-18</code> в папку
<code>2016-05-20</code>, чтобы ваша окончательная структура каталогов
выглядела так:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2016-05-20/
└── data
   ├── processed
   └── raw</code></pre>
</div>
<p>Какой из следующих наборов команд позволит достичь этой цели? Что
делают остальные команды?</p>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20</span>
<span id="cb66-2"><a href="#cb66-2" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data</span>
<span id="cb66-3"><a href="#cb66-3" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/processed</span>
<span id="cb66-4"><a href="#cb66-4" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/raw</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20</span>
<span id="cb67-2"><a href="#cb67-2" tabindex="-1"></a><span class="ex">$</span> cd 2016-05-20</span>
<span id="cb67-3"><a href="#cb67-3" tabindex="-1"></a><span class="ex">$</span> mkdir data</span>
<span id="cb67-4"><a href="#cb67-4" tabindex="-1"></a><span class="ex">$</span> cd data</span>
<span id="cb67-5"><a href="#cb67-5" tabindex="-1"></a><span class="ex">$</span> mkdir raw processed</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/raw</span>
<span id="cb68-2"><a href="#cb68-2" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/processed</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb69">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb69-1"><a href="#cb69-1" tabindex="-1"></a><span class="ex">$</span> mkdir <span class="at">-p</span> 2016-05-20/data/raw</span>
<span id="cb69-2"><a href="#cb69-2" tabindex="-1"></a><span class="ex">$</span> mkdir <span class="at">-p</span> 2016-05-20/data/processed</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20</span>
<span id="cb70-2"><a href="#cb70-2" tabindex="-1"></a><span class="ex">$</span> cd 2016-05-20</span>
<span id="cb70-3"><a href="#cb70-3" tabindex="-1"></a><span class="ex">$</span> mkdir data</span>
<span id="cb70-4"><a href="#cb70-4" tabindex="-1"></a><span class="ex">$</span> mkdir raw processed</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution10" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution10" aria-expanded="false" aria-controls="collapseSolution10">
  <h4 class="accordion-header" id="headingSolution10"> Решение </h4>
</button>
<div id="collapseSolution10" class="accordion-collapse collapse" data-bs-parent="#accordionSolution10" aria-labelledby="headingSolution10">
<div class="accordion-body">
<p>Первые два набора команд достигают цели.</p>
<p>Третий набор команд вызовет ошибку, так как по умолчанию команда
<code>mkdir</code> не создаёт подкаталоги в несуществующем каталоге:
сначала должны быть созданы промежуточные уровни каталогов.</p>
<p>Четвёртый набор команд достигает цели. Напомним, что опция
<code>-p</code>, за которой следует путь из одного или нескольких
каталогов, заставляет <code>mkdir</code> создавать все необходимые
промежуточные подкаталоги.</p>
<p>Последний набор команд создаст каталоги <code>raw</code> и
<code>processed</code> на том же уровне, что и каталог
<code>data</code>.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>cp [старое] [новое]</code> копирует файл.</li>
<li>
<code>mkdir [путь]</code> создаёт новый каталог.</li>
<li>
<code>mv [старое] [новое]</code> перемещает (переименовывает) файл
или каталог.</li>
<li>
<code>rm [путь]</code> удаляет (удаляет) файл.</li>
<li>
<code>*</code> соответствует <strong>нулю или более</strong>
символам в имени файла, например <code>*.txt</code> соответствует всем
файлам, заканчивающимся на <code>.txt</code>.</li>
<li>ё соответствует любому <strong>одному</strong> символу в имени
файла, например <code>?.txt</code> соответствует <code>a.txt</code>, но
не <code>any.txt</code>.</li>
<li>Использование клавиши Control может быть описано разными способами,
включая <code>Ctrl-X</code>, <code>Control-X</code> и
<code>^X</code>.</li>
<li>В оболочке нет корзины: если что-то удалено, оно действительно
исчезло навсегда.</li>
<li>Большинство имён файлов имеют формат <code>что-то.расширение</code>.
Расширение не обязательно, и оно не гарантирует ничего, но обычно
используется для указания типа данных в файле.</li>
<li>В зависимости от типа вашей работы вам может понадобиться более
мощный текстовый редактор, чем Nano.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-04-pipefilter"><p>Content from <a href="04-pipefilter.html">Каналы и фильтры</a></p>
<hr>
<p>Last updated on 2024-09-07 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/04-pipefilter.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Как я могу комбинировать существующие команды для получения нужного
результата?</li>
<li>Как я могу показать только часть вывода?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Объяснить преимущество связывания команд с помощью каналов (pipes) и
фильтров.</li>
<li>Комбинировать последовательности команд для получения нового
вывода.</li>
<li>Перенаправлять вывод команды в файл.</li>
<li>Объяснить, что обычно происходит, если программа или конвейер не
получают входных данных для обработки.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Теперь, когда мы знаем несколько базовых команд, мы можем наконец-то
рассмотреть одну из самых мощных возможностей оболочки: простоту, с
которой она позволяет комбинировать существующие программы новыми
способами. Мы начнём с каталога
<code>shell-lesson-data/exercise-data/alkanes</code>, который содержит
шесть файлов, описывающих простые органические молекулы. Расширение
<code>.pdb</code> указывает на то, что эти файлы находятся в формате
Protein Data Bank, простом текстовом формате, который указывает тип и
положение каждого атома в молекуле.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb    methane.pdb    pentane.pdb
ethane.pdb    octane.pdb     propane.pdb</code></pre>
</div>
<p>Запустим пример команды:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> wc cubane.pdb</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>20  156 1158 cubane.pdb</code></pre>
</div>
<p>wc — это команда “word count” (подсчёт слов): она считает количество
строк, слов и символов в файлах (возвращая значения в таком порядке
слева направо).</p>
<p>Если мы запустим команду <code>wc *.pdb</code>, <code>*</code> в
<code>*.pdb</code> заменяется на ноль или более символов, поэтому
оболочка преобразует <code>*.pdb</code> в список всех файлов с
расширением <code>.pdb</code> в текущем каталоге:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="pp">*</span>.pdb</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  20  156  1158  cubane.pdb
  12  84   622   ethane.pdb
   9  57   422   methane.pdb
  30  246  1828  octane.pdb
  21  165  1226  pentane.pdb
  15  111  825   propane.pdb
 107  819  6081  total</code></pre>
</div>
<p>Обратите внимание, что <code>wc *.pdb</code> также показывает общее
количество строк в последней строке вывода.</p>
<p>Если мы запустим <code>wc -l</code> вместо обычного <code>wc</code>,
то вывод покажет только количество строк на файл:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  20  cubane.pdb
  12  ethane.pdb
   9  methane.pdb
  30  octane.pdb
  21  pentane.pdb
  15  propane.pdb
 107  total</code></pre>
</div>
<p>С командой <code>wc</code> можно также использовать опции
<code>-m</code> и <code>-w</code>, чтобы показать только количество
символов или слов соответственно.</p>
<div id="почему-команда-ничего-не-делает" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="почему-команда-ничего-не-делает" class="callout-inner">
<h3 class="callout-title">Почему команда ничего не делает?</h3>
<div class="callout-content">
<p>Что произойдёт, если команда должна обработать файл, но мы не укажем
имя файла? Например, что будет, если мы наберём:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span></span></code></pre>
</div>
<p>но не укажем <code>*.pdb</code> (или что-то ещё) после команды?
Поскольку файлы не указаны, <code>wc</code> предполагает, что нужно
обрабатывать ввод, предоставленный непосредственно в командной строке,
поэтому она просто ждёт, пока мы не дадим ей какие-либо данные
интерактивно. Со стороны может показаться, что команда просто зависла и
ничего не делает.</p>
<p>Если вы совершите такую ошибку, вы можете выйти из этого состояния,
удерживая клавишу <kbd>Ctrl</kbd> и нажав клавишу <kbd>C</kbd> один раз:
<kbd>Ctrl</kbd>+<kbd>C</kbd>. Затем отпустите обе клавиши.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="перехват-вывода-команд">Перехват вывода команд<a class="anchor" aria-label="anchor" href="#%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%B2%D0%B0%D1%82-%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4"></a>
</h2>
<hr class="half-width">
<p>Какой из этих файлов содержит наименьшее количество строк? Это
простой вопрос, когда файлов всего шесть, но что, если их 6000? Наш
первый шаг к решению — это запустить команду:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="op">&gt;</span> lengths.txt</span></code></pre>
</div>
<p>Символ <code>&gt;</code>, который здесь используется, указывает
оболочке перенаправить вывод команды в файл вместо вывода на экран. Эта
команда не выдаст вывода на экран, потому что всё, что команда
<code>wc</code> должна была вывести, теперь записано в файл
<code>lengths.txt</code>. Если файла не существовало до запуска команды,
оболочка создаст его. Если файл уже существует, он будет перезаписан без
лишних слов, что может привести к потере данных. Таким образом, команды
с перенаправлением требуют осторожности.</p>
<p>Команда ls lengths.txt подтверждает, что теперь файл существует:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> ls lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">lengths.txt</span></span></code></pre>
</div>
<p>Теперь мы можем вывести содержимое файла <code>lengths.txt</code> на
экран, используя команду <code>cat lengths.txt</code>. Команда cat
получила своё название от “con<strong>cat</strong>enate”
(конкатенировать), то есть объединять, и она выводит содержимое файлов
поочерёдно. В данном случае у нас только один файл, поэтому
<code>cat</code> просто покажет его содержимое:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> cat lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  20  cubane.pdb
  12  ethane.pdb
   9  methane.pdb
  30  octane.pdb
  21  pentane.pdb
  15  propane.pdb
 107  total</code></pre>
</div>
<div id="постраничный-вывод" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="постраничный-вывод" class="callout-inner">
<h3 class="callout-title">Постраничный вывод</h3>
<div class="callout-content">
<p>Мы будем продолжать использовать команду <code>cat</code> в этом
уроке для удобства и воспроизводимости, но у неё есть недостаток — она
всегда выводит весь файл на экран. Более полезной на практике является
команда <code>less</code> (например, <code>less lengths.txt</code>). Она
выводит на экран один экранный блок файла и останавливается. Вы можете
пролистывать вперёд, нажимая пробел, или назад, нажимая <code>b</code>.
Для выхода нажмите <code>q</code>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="фильтрация-вывода">Фильтрация вывода<a class="anchor" aria-label="anchor" href="#%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0"></a>
</h2>
<hr class="half-width">
<p>Теперь мы воспользуемся командой <code>sort</code>, чтобы
отсортировать содержимое файла <code>lengths.txt</code>. Но сначала мы
сделаем упражнение, чтобы узнать больше о команде сортировки:</p>
<div id="что-делает-sort--n" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="что-делает-sort--n" class="callout-inner">
<h3 class="callout-title">Что делает <code>sort -n</code>?</h3>
<div class="callout-content">
<p>Файл <code>shell-lesson-data/exercise-data/numbers.txt</code>
содержит следующие строки:</p>
<pre class="source"><code><span><span class="fl">10</span></span>
<span><span class="fl">2</span></span>
<span><span class="fl">19</span></span>
<span><span class="fl">22</span></span>
<span><span class="fl">6</span></span></code></pre>
<p>Если мы запустим команду <code>sort</code>, передав её имя этого
файла, результат будет следующим:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">10</span></span>
<span><span class="fl">19</span></span>
<span><span class="fl">2</span></span>
<span><span class="fl">22</span></span>
<span><span class="fl">6</span></span></code></pre>
</div>
<p>Если мы запустим <code>sort -n</code> на том же файле, результат
будет следующим:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">2</span></span>
<span><span class="fl">6</span></span>
<span><span class="fl">10</span></span>
<span><span class="fl">19</span></span>
<span><span class="fl">22</span></span></code></pre>
</div>
<p>Объясните, почему опция <code>-n</code> даёт такой результат.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Решение </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Опция <code>-n</code> указывает на числовую сортировку вместо
алфавитной.</p>
</div>
</div>
</div>
</div>
<p>Мы также будем использовать опцию <code>-n</code>, чтобы указать, что
сортировка должна быть числовой, а не алфавитной. Команда <em>не
изменяет</em> файл, а просто выводит отсортированный результат на
экран:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  9  methane.pdb
 12  ethane.pdb
 15  propane.pdb
 20  cubane.pdb
 21  pentane.pdb
 30  octane.pdb
107  total</code></pre>
</div>
<p>Мы можем поместить отсортированный список строк в другой временный
файл под названием <code>sorted-lengths.txt</code>, добавив
<code>&gt; sorted-lengths.txt</code> после команды, как мы сделали с
<code>&gt; lengths.txt</code>, чтобы поместить вывод команды
<code>wc</code> в файл <code>lengths.txt</code>. После этого мы можем
запустить другую команду, называемую <code>head</code>, чтобы получить
первые несколько строк из файла <code>sorted-lengths.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lengths.txt <span class="op">&gt;</span> sorted-lengths.txt</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 1 sorted-lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  9  methane.pdb</code></pre>
</div>
<p>Использование опции <code>-n 1</code> с командой <code>head</code>
указывает, что мы хотим получить только первую строку файла;
<code>-n 20</code> даст первые 20 строк и так далее. Поскольку файл
<code>sorted-lengths.txt</code> содержит длины наших файлов,
отсортированные от меньшего к большему, вывод команды <code>head</code>
покажет файл с наименьшим количеством строк.</p>
<div id="перенаправление-в-тот-же-файл" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="перенаправление-в-тот-же-файл" class="callout-inner">
<h3 class="callout-title">Перенаправление в тот же файл</h3>
<div class="callout-content">
<p>Очень плохой идеей будет пытаться перенаправить вывод команды,
которая работает с файлом, в тот же файл. Например:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lengths.txt <span class="op">&gt;</span> lengths.txt</span></code></pre>
</div>
<p>Выполнение подобной команды может привести к неверным результатам
и/или удалению содержимого файла <code>lengths.txt</code>.</p>
</div>
</div>
</div>
<div id="что-означает" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="что-означает" class="callout-inner">
<h3 class="callout-title">Что означает &gt;&gt;?</h3>
<div class="callout-content">
<p>Мы уже видели использование <code>&gt;</code>, но существует похожий
оператор <code>&gt;&gt;</code>, который работает немного иначе. Мы
узнаем о различиях между этими двумя операторами, напечатав несколько
строк. Мы можем использовать команду <code>echo</code>, чтобы вывести
строки, например:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> echo The echo command prints text</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The echo command prints text</code></pre>
</div>
<p>Теперь протестируйте следующие команды, чтобы выявить разницу между
двумя операторами:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> echo hello <span class="op">&gt;</span> testfile01.txt</span></code></pre>
</div>
<p>и:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="ex">$</span> echo hello <span class="op">&gt;&gt;</span> testfile02.txt</span></code></pre>
</div>
<p>Подсказка: Попробуйте выполнить каждую команду дважды подряд, а затем
исследуйте файлы вывода.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Решение </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>В первом примере с <code>&gt;</code>, строка ‘hello’ записывается в
файл <code>testfile01.txt</code>, но файл перезаписывается каждый раз
при выполнении команды.</p>
<p>Из второго примера мы видим, что оператор <code>&gt;&gt;</code> также
записывает ‘hello’ в файл (в данном случае в
<code>testfile02.txt</code>), но если файл уже существует — он его не
перезаписывает, а добавляет эту строку в конец файла (что и произошло
при повторном вызове команды).</p>
</div>
</div>
</div>
</div>
<div id="добавление-данных" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="добавление-данных" class="callout-inner">
<h3 class="callout-title">Добавление данных</h3>
<div class="callout-content">
<p>Мы уже познакомились с командой <code>head</code>, которая выводит
строки из начала файла. Команда <code>tail</code> аналогична, но выводит
строки из конца файла.</p>
<p>Рассмотрим файл
<code>shell-lesson-data/exercise-data/animal-counts/animals.csv</code>.
После выполнения этих команд выберите правильный вариант, который
соответствует файлу <code>animals-subset.csv</code>:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 3 animals.csv <span class="op">&gt;</span> animals-subset.csv</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="ex">$</span> tail <span class="at">-n</span> 2 animals.csv <span class="op">&gt;&gt;</span> animals-subset.csv</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>Первые три строки файла <code>animals.csv</code>
</li>
<li>Последние две строки файла <code>animals.csv</code>
</li>
<li>Первые три строки и последние две строки файла
<code>animals.csv</code>
</li>
<li>Вторая и третья строки файла <code>animals.csv</code>
</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Решение </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Правильный вариант — 3. Для варианта 1 мы бы выполнили только команду
<code>head</code>. Для варианта 2 мы бы выполнили только команду
<code>tail</code>. Для варианта 4 мы бы должны были передать вывод
команды <code>head</code> команде <code>tail -n 2</code> через конвейер
с помощью команды
<code>head -n 3 animals.csv | tail -n 2 &gt; animals-subset.csv</code>.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="передача-вывода-другой-команде">Передача вывода другой команде<a class="anchor" aria-label="anchor" href="#%D0%BF%D0%B5%D1%80%D0%B5%D0%B4%D0%B0%D1%87%D0%B0-%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D0%B0-%D0%B4%D1%80%D1%83%D0%B3%D0%BE%D0%B9-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B5"></a>
</h2>
<hr class="half-width">
<p>В нашем примере поиска файла с наименьшим количеством строк мы
используем два промежуточных файла: <code>lengths.txt</code> и
<code>sorted-lengths.txt</code> для хранения вывода. Это может запутать,
потому что даже после того, как вы поймёте, что делают команды
<code>wc</code>, <code>sort</code> и <code>head</code>, эти
промежуточные файлы затрудняют отслеживание процесса. Мы можем сделать
это понятнее, запустив <code>sort</code> и <code>head</code> вместе:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lengths.txt <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  9  methane.pdb</code></pre>
</div>
<p>Вертикальная черта, <code>|</code>, между двумя командами называется
<strong>каналом</strong> (<strong>pipe</strong>). Она сообщает оболочке,
что мы хотим использовать вывод команды слева в качестве ввода для
команды справа.</p>
<p>Это устраняет необходимость в файле
<code>sorted-lengths.txt</code>.</p>
</section><section><h2 class="section-heading" id="комбинирование-нескольких-команд">Комбинирование нескольких команд<a class="anchor" aria-label="anchor" href="#%D0%BA%D0%BE%D0%BC%D0%B1%D0%B8%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%B8%D1%85-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4"></a>
</h2>
<hr class="half-width">
<p>Ничто не мешает нам последовательно связывать команды через каналы.
Мы можем, например, отправить вывод команды <code>wc</code> напрямую в
команду <code>sort</code>, а затем отправить полученный вывод в команду
<code>head</code>. Это устраняет необходимость в любых промежуточных
файлах.</p>
<p>Начнём с использования канала для передачи вывода команды
<code>wc</code> в команду <code>sort</code>:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   9 methane.pdb
  12 ethane.pdb
  15 propane.pdb
  20 cubane.pdb
  21 pentane.pdb
  30 octane.pdb
 107 total</code></pre>
</div>
<p>Затем мы можем передать этот вывод через другой канал в команду
<code>head</code>, так что полная последовательность будет выглядеть
так:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   9  methane.pdb</code></pre>
</div>
<p>Это похоже на математическую запись, когда функции вкладываются друг
в друга, например, log(3x), где говорится: “логарифм от трёх,
помноженных на x”. В нашем случае алгоритм выглядит так: “head от sort
от количества строк для <code>*.pdb</code>”.</p>
<p>Использование перенаправлений и каналов в последних нескольких
командах можно проиллюстрировать следующим образом:</p>
<figure><img src="fig/redirects-and-pipes.svg" alt="Перенаправления и каналы для различных команд: “wc -l .pdb” отправляет вывод в оболочку. ”wc -l .pdb &gt; lengths” перенаправляет вывод в файл “lengths”. “wc -l *.pdb | sort -n | head -n 1” создаёт конвейер, где вывод команды “wc” становится вводом для команды “sort”, вывод команды “sort” становится вводом для команды “head”, а вывод команды “head” отправляется в оболочку" class="figure mx-auto d-block"><div class="figcaption">Перенаправления и каналы для различных команд:
“wc -l <em>.pdb” отправляет вывод в оболочку. ”wc -l </em>.pdb &gt;
lengths” перенаправляет вывод в файл “lengths”. “wc -l *.pdb | sort -n |
head -n 1” создаёт конвейер, где вывод команды “wc” становится вводом
для команды “sort”, вывод команды “sort” становится вводом для команды
“head”, а вывод команды “head” отправляется в оболочку</div>
</figure><div id="объединение-команд-через-каналы" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="объединение-команд-через-каналы" class="callout-inner">
<h3 class="callout-title">Объединение команд через каналы</h3>
<div class="callout-content">
<p>В нашем текущем каталоге мы хотим найти 3 файла с наименьшим
количеством строк. Какая из перечисленных команд будет работать?</p>
<ol style="list-style-type: decimal">
<li><code>wc -l * &gt; sort -n &gt; head -n 3</code></li>
<li><code>wc -l * | sort -n | head -n 1-3</code></li>
<li><code>wc -l * | head -n 3 | sort -n</code></li>
<li><code>wc -l * | sort -n | head -n 3</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Решение </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Правильный ответ — 4. Символ канала <code>|</code> используется для
соединения вывода одной команды с вводом другой команды. Символ
<code>&gt;</code> используется для перенаправления стандартного вывода в
файл. Попробуйте это в каталоге
<code>shell-lesson-data/exercise-data/alkanes</code>!</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="инструменты-разработанные-для-совместной-работы">Инструменты, разработанные для совместной работы<a class="anchor" aria-label="anchor" href="#%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B-%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5-%D0%B4%D0%BB%D1%8F-%D1%81%D0%BE%D0%B2%D0%BC%D0%B5%D1%81%D1%82%D0%BD%D0%BE%D0%B9-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B"></a>
</h2>
<hr class="half-width">
<p>Идея связывания программ друг с другом — одна из причин успеха Unix.
Вместо создания огромных программ, которые пытаются выполнять множество
различных задач, программисты Unix сосредотачиваются на создании
множества простых инструментов, каждый из которых выполняет одну задачу
хорошо и при этом хорошо взаимодействует с другими инструментами. Эта
модель программирования называется «каналы и фильтры». Мы уже видели
каналы; <strong>фильтр</strong> — это программа, такая как
<code>wc</code> или <code>sort</code>, которая преобразует поток входных
данных в поток выходных данных. Почти все стандартные инструменты Unix
могут работать таким образом. Если не указано иное, они читают данные из
стандартного ввода, выполняют с ними определённую задачу и записывают
результат в стандартный вывод.</p>
<p>Ключевая идея заключается в том, что любая программа, которая читает
строки текста из стандартного ввода и записывает строки текста в
стандартный вывод, может быть скомбинирована с любой другой программой,
работающей таким же образом. Вы можете <em>должны</em> писать программы
таким образом, чтобы вы и другие люди могли включать их в каналы и тем
самым увеличивать их мощность.</p>
<div id="понимание-работы-канала" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="понимание-работы-канала" class="callout-inner">
<h3 class="callout-title">Понимание работы канала</h3>
<div class="callout-content">
<p>Файл под названием <code>animals.csv</code> (в каталоге
<code>shell-lesson-data/exercise-data/animal-counts</code>) содержит
следующие данные:</p>
<pre class="source"><code>2012-11-05,deer,5
2012-11-05,rabbit,22
2012-11-05,raccoon,7
2012-11-06,rabbit,19
2012-11-06,deer,2
2012-11-06,fox,4
2012-11-07,rabbit,16
2012-11-07,bear,1</code></pre>
<p>Какой текст проходит через каждый из каналов и окончательное
перенаправление в конвейере ниже? Обратите внимание, что команда
<code>sort -r</code> сортирует в обратном порядке.</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="ex">$</span> cat animals.csv <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 5 <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 3 <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-r</span> <span class="op">&gt;</span> final.txt</span></code></pre>
</div>
<p>Подсказка: стройте конвейер команд поочерёдно, чтобы проверить своё
понимание.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Решение </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>Команда <code>head</code> извлекает первые 5 строк из файла
<code>animals.csv</code>. Затем команда <code>tail</code> извлекает
последние 3 строки из этих 5. Команда <code>sort -r</code> сортирует эти
3 строки в обратном порядке. Наконец, результат записывается в файл
<code>final.txt</code>. Содержимое этого файла можно проверить, выполнив
команду <code>cat final.txt</code>. Файл должен содержать следующие
строки:</p>
<pre class="source"><code>2012-11-06,rabbit,19
2012-11-06,deer,2
2012-11-05,raccoon,7</code></pre>
</div>
</div>
</div>
</div>
<div id="построение-канала" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="построение-канала" class="callout-inner">
<h3 class="callout-title">Построение канала</h3>
<div class="callout-content">
<p>Для файла <code>animals.csv</code> из предыдущего упражнения
рассмотрим следующую команду:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span> , <span class="at">-f</span> 2 animals.csv</span></code></pre>
</div>
<p>Команда <code>cut</code> используется для удаления или “вырезания”
определённых разделов из каждой строки файла. <code>cut</code> ожидает,
что строки будут разделены на столбцы с помощью символа <kbd>Tab</kbd>.
Символ, используемый таким образом, называется разделителем. В
приведённом выше примере мы используем опцию <code>-d</code>, чтобы
указать запятую в качестве символа-разделителя. Мы также использовали
опцию <code>-f</code>, чтобы указать, что мы хотим извлечь второй
столбец. Это даст следующий вывод:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">deer</span></span>
<span><span class="va">rabbit</span></span>
<span><span class="va">raccoon</span></span>
<span><span class="va">rabbit</span></span>
<span><span class="va">deer</span></span>
<span><span class="va">fox</span></span>
<span><span class="va">rabbit</span></span>
<span><span class="va">bear</span></span></code></pre>
</div>
<p>Команда <code>uniq</code> фильтрует соседние повторяющиеся строки в
файле. Как можно расширить этот конвейер (с помощью <code>uniq</code> и
другой команды), чтобы узнать, какие животные содержатся в файле (без
повторений в их именах)?</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span> , <span class="at">-f</span> 2 animals.csv <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="какой-канал" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="какой-канал" class="callout-inner">
<h3 class="callout-title">Какой канал?</h3>
<div class="callout-content">
<p>Файл <code>animals.csv</code> содержит 8 строк данных в следующем
формате:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2012-11-05,deer,5
2012-11-05,rabbit,22
2012-11-05,raccoon,7
2012-11-06,rabbit,19
...</code></pre>
</div>
<p>Команда <code>uniq</code> имеет опцию <code>-c</code>, которая
выводит количество вхождений каждой строки во входных данных.
Предположим, что текущий каталог — это
<code>shell-lesson-data/exercise-data/animal-counts</code>. Какую
команду вы бы использовали для создания таблицы, которая показывает
общее количество каждого типа животных в файле?</p>
<ol style="list-style-type: decimal">
<li><code>sort animals.csv | uniq -c</code></li>
<li><code>sort -t, -k2,2 animals.csv | uniq -c</code></li>
<li><code>cut -d, -f 2 animals.csv | uniq -c</code></li>
<li><code>cut -d, -f 2 animals.csv | sort | uniq -c</code></li>
<li><code>cut -d, -f 2 animals.csv | sort | uniq -c | wc -l</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Решение </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<p>Правильный ответ — вариант 4. Если вам сложно понять, почему,
попробуйте запустить команды или отдельные части конвейера (убедитесь,
что вы находитесь в каталоге
<code>shell-lesson-data/exercise-data/animal-counts</code>).</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="конвейер-нелли-проверка-файлов">Конвейер Нелли: проверка файлов<a class="anchor" aria-label="anchor" href="#%D0%BA%D0%BE%D0%BD%D0%B2%D0%B5%D0%B9%D0%B5%D1%80-%D0%BD%D0%B5%D0%BB%D0%BB%D0%B8-%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2"></a>
</h2>
<hr class="half-width">
<p>Нелли исследовала образцы с помощью анализатора и создала 17 файлов в
каталоге <code>north-pacific-gyre/2012-07-03</code>, описанном ранее.
Для быстрой проверки, начиная с каталога <code>shell-lesson-data</code>,
Нелли вводит:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="ex">$</span> cd north-pacific-gyre/2012-07-03</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.txt</span></code></pre>
</div>
<p>Вывод состоит из 18 строк, которые выглядят так:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>300 NENE01729A.txt
300 NENE01729B.txt
300 NENE01736A.txt
300 NENE01751A.txt
300 NENE01751B.txt
300 NENE01812A.txt
... ...</code></pre>
</div>
<p>Затем она вводит:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.txt <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> 240 NENE02018B.txt
 300 NENE01729A.txt
 300 NENE01729B.txt
 300 NENE01736A.txt
 300 NENE01751A.txt</code></pre>
</div>
<p>Ой, один из файлов на 60 строк короче остальных. Когда она проверила
его, она вспомнила, что провела этот анализ в 8 утра в понедельник —
кто-то, вероятно, пользовался машиной на выходных, и она забыла сбросить
настройки. Прежде чем повторно запустить этот образец, она проверяет,
есть ли файлы с избыточными данными:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.txt <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> 300 NENE02040B.txt
 300 NENE02040Z.txt
 300 NENE02043A.txt
 300 NENE02043B.txt
5040 total</code></pre>
</div>
<p>Эти числа выглядят нормально — но что делает ‘Z’ в третьей строке с
конца? Все её образцы должны быть помечены как ‘A’ или ‘B’; по правилам
её лаборатории, буква ‘Z’ используется для обозначения образцов с
отсутствующей информацией. Чтобы найти другие такие файлы, она
вводит:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="pp">*</span>Z.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>NENE01971Z.txt    NENE02040Z.txt</code></pre>
</div>
<p>Действительно, когда она проверила журнал на своём ноутбуке,
оказалось, что для этих образцов не была записана глубина. Поскольку
слишком поздно получать эту информацию каким-либо другим способом, ей
придётся исключить эти два файла из анализа. Она могла бы удалить их с
помощью <code>rm</code>, но для некоторых будущих анализов глубина не
важна, поэтому ей нужно будет быть внимательной и использовать для
выбора файлов выражения с подстановочными символами, такие как
NENE<em>A.txt NENE</em>B.txt.</p>
<div id="удаление-ненужных-файлов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="удаление-ненужных-файлов" class="callout-inner">
<h3 class="callout-title">Удаление ненужных файлов</h3>
<div class="callout-content">
<p>Предположим, вы хотите удалить обработанные файлы данных и оставить
только сырые файлы и скрипт обработки для экономии места. Сырые файлы
имеют расширение <code>.dat</code>, а обработанные файлы — расширение
<code>.txt</code>. Какой из следующих вариантов удалит все обработанные
файлы данных и <em>только</em> их?</p>
<ol style="list-style-type: decimal">
<li><code>rm ?.txt</code></li>
<li><code>rm *.txt</code></li>
<li><code>rm * .txt</code></li>
<li><code>rm *.*</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8"> Решение </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" aria-labelledby="headingSolution8" data-bs-parent="#accordionSolution8">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Это удалит <code>.txt</code>-файлы с односимвольными именами.</li>
<li>Это правильный ответ.</li>
<li>Оболочка расширит <code>*</code>, чтобы соответствовать всем файлам
в текущем каталоге, поэтому команда попытается удалить все совпадающие
файлы и дополнительный файл под названием <code>.txt</code> (обратите
внимание на пробел в команде).</li>
<li>Оболочка расширит <code>*.*</code>, чтобы соответствовать всем
именам файлов, содержащим хотя бы одну точку, включая обработанные файлы
(<code>.txt</code>) и сырые файлы (<code>.dat</code>).</li>
</ol>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>wc</code> подсчитывает количество строк, слов и символов во
входных данных.</li>
<li>
<code>cat</code> отображает содержимое входных данных.</li>
<li>
<code>sort</code> сортирует входные данные.</li>
<li>
<code>head</code> отображает первые 10 строк входных данных.</li>
<li>
<code>tail</code> отображает последние 10 строк входных данных.</li>
<li>command <code>&gt; [file]</code> перенаправляет вывод команды в файл
(перезаписывая его содержимое).</li>
<li>command <code>&gt;&gt; [file]</code> добавляет вывод команды в конец
файла.</li>
<li>
<code>[first] | [second]</code> — это конвейер: вывод первой команды
используется в качестве ввода для второй команды.</li>
<li>Лучший способ использования оболочки — это использование каналов для
объединения простых однопрофильных программ (фильтров).</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-05-loop"><p>Content from <a href="05-loop.html">Циклы</a></p>
<hr>
<p>Last updated on 2024-09-07 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/05-loop.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Как можно выполнить одинаковые действия для множества различных
файлов?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Написать цикл, который применяет одну или несколько команд отдельно
к каждому файлу из набора файлов.</li>
<li>Отслеживать значения, принимаемые переменной цикла во время
выполнения цикла.</li>
<li>Объяснить разницу между именем переменной и её значением.</li>
<li>Объяснить, почему в именах файлов не следует использовать пробелы и
некоторые символы пунктуации.</li>
<li>Показать, как посмотреть недавно выполненные команды.</li>
<li>Повторить недавно выполненные команды без их повторного ввода.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p><strong>Циклы</strong> — это программная конструкция, которая
позволяет нам повторять команду или набор команд для каждого элемента из
списка. Это ключевой элемент повышения производительности посредством
автоматизации. Как и использование подстановочных символов и
автодополнения, циклы сокращают количество вводимых данных (а значит,
уменьшают вероятность ошибок).</p>
<p>Предположим, у нас есть несколько сотен файлов с данными о геномах,
таких как <code>basilisk.dat</code>, <code>minotaur.dat</code> и
<code>unicorn.dat</code>. Для этого примера мы будем использовать
каталог <code>exercise-data/creatures</code>, в котором есть только три
примера файлов, но принципы можно применить к гораздо большему
количеству файлов одновременно.</p>
<p>Структура этих файлов одинакова: общее название, классификация и дата
обновления представлены в первых трёх строках, а последовательности ДНК
— в следующих строках. Давайте посмотрим на файлы:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 5 basilisk.dat minotaur.dat unicorn.dat</span></code></pre>
</div>
<p>Мы хотим вывести классификацию каждого вида, которая указана во
второй строке каждого файла. Для каждого файла нам нужно выполнить
команду <code>head -n 2</code>, передав её результат команде
<code>tail -n 1</code>. Мы используем цикл для решения этой задачи, но
сначала рассмотрим общую форму цикла, используя псевдокод:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Слово "for" указывает на начало команды цикла "For"</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="cf">for</span> thing <span class="kw">in</span> list_of_things</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co"># Слово "do" указывает на начало списка выполняемых команд</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    <span class="co"># Отступы в цикле не обязательны, но улучшают читаемость</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    <span class="ex">operation_using/command</span> <span class="va">$thing</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co"># Слово "done" указывает на конец цикла</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>и мы можем применить это к нашему примеру вот так:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> for filename in basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$filename</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 2 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>basilisk.dat
CLASSIFICATION: basiliscus vulgaris
minotaur.dat
CLASSIFICATION: bos hominus
unicorn.dat
CLASSIFICATION: equus monoceros</code></pre>
</div>
<div id="следите-за-приглашением" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="следите-за-приглашением" class="callout-inner">
<h3 class="callout-title">Следите за приглашением</h3>
<div class="callout-content">
<p>При вводе нашего цикла приглашение оболочки меняется с <code>$</code>
на <code>&gt;</code>, а затем обратно. Второе приглашение
<code>&gt;</code> отличается, чтобы напомнить нам, что мы ещё не
закончили вводить полную команду. Для разделения двух команд на одной
строке можно использовать точку с запятой <code>;</code>.</p>
</div>
</div>
</div>
<p>Когда оболочка видит ключевое слово <code>for</code>, она знает, что
нужно повторить команду (или группу команд) для каждого элемента списка.
Каждый раз, когда цикл выполняется (это называется итерацией), элемент
списка последовательно присваивается переменной, а команды внутри цикла
выполняются, после чего цикл переходит к следующему элементу. Внутри
цикла мы вызываем значение переменной, поставив перед её именем знак
<code>$</code>. Этот символ сообщает интерпретатору оболочки, что это
имя переменной, и нужно подставить её значение, а не рассматривать как
текст или внешнюю команду.</p>
<p>В этом примере список — это три имени файлов:
<code>basilisk.dat</code>, <code>minotaur.dat</code> и
<code>unicorn.dat</code>. Каждый раз, когда выполняется итерация, мы
сначала используем команду <code>echo</code>, чтобы вывести текущее
значение переменной <code>$filename</code>. Это не обязательно для
результата, но полезно для наглядности. Затем мы выполняем команду
<code>head</code> для файла, на который ссылается
<code>$filename</code>. В первый раз, когда цикл выполняется,
<code>$filename</code> равно <code>basilisk.dat</code>. Интерпретатор
выполняет команду <code>head</code> для <code>basilisk.dat</code> и
передаёт первые две строки в команду <code>tail</code>, которая затем
выводит вторую строку файла. На второй итерации <code>$filename</code>
становится <code>minotaur.dat</code>, и процесс повторяется. На третьей
итерации <code>$filename</code> становится <code>unicorn.dat</code>, и
снова выполняется команда <code>head</code>, а затем <code>tail</code>.
После третьей итерации оболочка завершает цикл <code>for</code>.</p>
<div id="одинаковые-символы-разные-значения" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="одинаковые-символы-разные-значения" class="callout-inner">
<h3 class="callout-title">Одинаковые символы, разные значения</h3>
<div class="callout-content">
<p>Здесь мы видим, что <code>&gt;</code> используется как приглашение
оболочки, в то время как <code>&gt;</code> также используется для
перенаправления вывода. Аналогично, <code>$</code> используется как
приглашение оболочки, но, как мы видели ранее, также используется для
получения значения переменной.</p>
<p>Если <em>оболочка</em> выводит <code>&gt;</code> или <code>$</code>,
она ожидает, что вы что-то введёте, и эти символы являются
приглашением.</p>
<p>Если <em>вы</em> вводите <code>&gt;</code> или <code>$</code>, это
инструкция для оболочки перенаправить вывод или получить значение
переменной.</p>
</div>
</div>
</div>
<p>При использовании переменных можно также заключать их имена в
фигурные скобки, чтобы явно выделить имя переменной:
<code>$filename</code> эквивалентно <code>${filename}</code>, но
отличается от <code>${file}name</code>. Вы можете встретить такую
нотацию в программах других людей.</p>
<p>Мы назвали переменную в этом цикле <code>filename</code>, чтобы её
назначение было более очевидным для читателей. Самой оболочке всё равно,
как называется переменная; если бы мы написали этот цикл так:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> for x in basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 2 <span class="va">$x</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>или так:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> for temperature in basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 2 <span class="va">$temperature</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>он работал бы точно так же. <em>Не делайте так</em>. Программы
полезны только тогда, когда их могут понять люди, поэтому бессмысленные
имена (например, <code>x</code>) или вводящие в заблуждение имена
(например, <code>temperature</code>) увеличивают вероятность того, что
программа не будет делать то, что ожидают её пользователи.</p>
<p>В приведённых выше примерах переменные (<code>thing</code>,
<code>filename</code>, <code>x</code> и <code>temperature</code>) могли
быть названы как угодно, главное, чтобы это было понятно и тому, кто
пишет код, и тому, кто его читает.</p>
<p>Отметим также, что циклы можно использовать не только для обработки
имён файлов, но и для работы с числами или подмножествами данных.</p>
<div id="напишите-свой-цикл" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="напишите-свой-цикл" class="callout-inner">
<h3 class="callout-title">Напишите свой цикл</h3>
<div class="callout-content">
<p>Как бы вы написали цикл, который выводит все числа от 0 до 9?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Решение </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> for loop_variable in 0 1 2 3 4 5 6 7 8 9</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$loop_variable</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">0</span></span>
<span><span class="fl">1</span></span>
<span><span class="fl">2</span></span>
<span><span class="fl">3</span></span>
<span><span class="fl">4</span></span>
<span><span class="fl">5</span></span>
<span><span class="fl">6</span></span>
<span><span class="fl">7</span></span>
<span><span class="fl">8</span></span>
<span><span class="fl">9</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="переменные-в-циклах" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="переменные-в-циклах" class="callout-inner">
<h3 class="callout-title">Переменные в циклах</h3>
<div class="callout-content">
<p>Это упражнение относится к каталогу
<code>shell-lesson-data/exercise-data/alkanes</code>. Команда
<code>ls *.pdb</code> выводит следующий результат:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</code></pre>
</div>
<p>Каков результат выполнения следующего кода?</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="ex">*.pdb</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Теперь, каков результат выполнения следующего кода?</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$datafile</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Почему эти два цикла дают разные результаты?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Решение </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Первый блок кода выводит один и тот же результат на каждой итерации
цикла. Оболочка расширяет подстановочный символ <code>*.pdb</code>
внутри тела цикла (а также до начала цикла), чтобы он соответствовал
всем файлам, оканчивающимся на <code>.pdb</code>, и затем выводит их с
помощью <code>ls</code>. Цикл будет выглядеть так:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> for datafile in cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="ex">cubane.pdb</span>  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</code></pre>
</div>
<p>Во втором блоке кода на каждой итерации цикла выводится разный файл.
Значение переменной <code>datafile</code> вычисляется с использованием
<code>$datafile</code> и затем выводится с помощью <code>ls</code>.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">cubane.pdb</span></span>
<span><span class="va">ethane.pdb</span></span>
<span><span class="va">methane.pdb</span></span>
<span><span class="va">octane.pdb</span></span>
<span><span class="va">pentane.pdb</span></span>
<span><span class="va">propane.pdb</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="ограничение-набора-файлов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="ограничение-набора-файлов" class="callout-inner">
<h3 class="callout-title">Ограничение набора файлов</h3>
<div class="callout-content">
<p>Каков будет результат выполнения следующего цикла в каталоге
<code>shell-lesson-data/exercise-data/alkanes</code>?</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> for filename in c<span class="pp">*</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$filename</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>Файлы не будут перечислены.</li>
<li>Будут перечислены все файлы.</li>
<li>Будут перечислены только <code>cubane.pdb</code>,
<code>octane.pdb</code> и <code>pentane.pdb</code>.</li>
<li>Будет перечислен только <code>cubane.pdb</code>.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Решение </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Правильный ответ — 4. <code>*</code> соответствует нулю или более
символам, поэтому будет совпадение с любым именем файла, начинающимся с
буквы <code>c</code> и содержащим ноль или более других символов.</p>
</div>
</div>
</div>
</div>
<div id="ограничение-набора-файлов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="ограничение-набора-файлов" class="callout-inner">
<h3 class="callout-title">Ограничение набора файлов<em>
(continued)</em>
</h3>
<div class="callout-content">
<p>Чем будет отличаться вывод, если вместо этого использовать следующую
команду?</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>c<span class="pp">*</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$filename</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>Будут перечислены те же файлы.</li>
<li>На этот раз будут перечислены все файлы.</li>
<li>На этот раз файлы не будут перечислены.</li>
<li>Будут перечислены файлы <code>cubane.pdb</code> и
<code>octane.pdb</code>.</li>
<li>Будет перечислен только файл <code>octane.pdb</code>.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Правильный ответ — 4. <code>*</code> соответствует нулю или более
символам, поэтому имя файла, в котором есть ноль или более символов
перед буквой <code>c</code> и ноль или более символов после неё, будет
совпадать.</p>
</div>
</div>
</div>
</div>
<div id="сохранение-в-файл-в-цикле-часть-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="сохранение-в-файл-в-цикле-часть-1" class="callout-inner">
<h3 class="callout-title">Сохранение в файл в цикле — Часть 1</h3>
<div class="callout-content">
<p>При запуске в каталоге
<code>shell-lesson-data/exercise-data/alkanes,</code> каков эффект этого
цикла?</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="cf">for</span> alkanes <span class="kw">in</span> <span class="pp">*</span>.pdb</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$alkanes</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>    <span class="fu">cat</span> <span class="va">$alkanes</span> <span class="op">&gt;</span> alkanes.pdb</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>Будут выведены <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code>,
<code>pentane.pdb</code> и <code>propane.pdb</code>, а текст из
<code>propane.pdb</code> будет сохранён в файл
<code>alkanes.pdb</code>.</li>
<li>Будут выведены <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, и текст всех трёх файлов будет объединён и
сохранён в файл под названием <code>alkanes.pdb</code>.</li>
<li>Будут выведены <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code> и
<code>pentane.pdb</code>, а текст из <code>propane.pdb</code> будет
сохранён в файл <code>alkanes.pdb</code>.</li>
<li>Ничего из вышеперечисленного.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Решение </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>Правильный ответ — <code>1</code>. Текст из каждого файла по очереди
записывается в файл <code>alkanes.pdb</code>. Однако файл
перезаписывается на каждой итерации цикла, поэтому конечное содержимое
файла <code>alkanes.pdb</code> будет текстом из файла
<code>propane.pdb</code>.</p>
</div>
</div>
</div>
</div>
<div id="сохранение-в-файл-в-цикле-часть-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="сохранение-в-файл-в-цикле-часть-2" class="callout-inner">
<h3 class="callout-title">Сохранение в файл в цикле — Часть 2</h3>
<div class="callout-content">
<p>Также при запуске в каталоге shell-lesson-data/exercise-data/alkanes,
каков будет результат выполнения следующего цикла?</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> <span class="pp">*</span>.pdb</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>    <span class="fu">cat</span> <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>Весь текст из файлов <code>cubane.pdb</code>,
<code>ethane.pdb</code>, <code>methane.pdb</code>,
<code>octane.pdb</code> и <code>pentane.pdb</code> будет объединён и
сохранён в файл под названием <code>all.pdb</code>.</li>
<li>Текст из файла <code>ethane.pdb</code> будет сохранён в файл под
названием <code>all.pdb</code>.</li>
<li>Весь текст из файлов <code>cubane.pdb</code>,
<code>ethane.pdb</code>, <code>methane.pdb</code>,
<code>octane.pdb</code>, <code>pentane.pdb</code> и
<code>propane.pdb</code> будет объединён и сохранён в файл под названием
<code>all.pdb</code>.</li>
<li>Весь текст из файлов <code>cubane.pdb</code>,
<code>ethane.pdb</code>, <code>methane.pdb</code>,
<code>octane.pdb</code>, pentane.pdb и <code>propane.pdb</code> будет
напечатан на экране и сохранён в файл под названием
<code>all.pdb</code>.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Решение </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<p>Правильный ответ — 3. Оператор <code>&gt;&gt;</code> добавляет данные
в файл, а не перезаписывает его. Поскольку вывод команды
<code>cat</code> перенаправляется, на экране ничего не будет
напечатано.</p>
</div>
</div>
</div>
</div>
<p>Продолжим наш пример в каталоге
<code>shell-lesson-data/exercise-data/creatures</code>. Вот немного
более сложный цикл:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$filename</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 100 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Оболочка начинает с расширения <code>*.dat</code>, создавая список
файлов для обработки. <strong>Тело цикла</strong> затем выполняет две
команды для каждого из этих файлов. Первая команда, <code>echo</code>,
выводит свои аргументы командной строки в стандартный вывод.
Например:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> echo hello there</span></code></pre>
</div>
<p>выведет:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>hello there</code></pre>
</div>
<p>В данном случае, поскольку оболочка расширяет <code>$filename</code>
до имени файла, <code>echo</code> <code>$filename</code> выводит имя
файла. Обратите внимание, что мы не можем записать это так:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="op">&gt;</span>     <span class="va">$filename</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 100 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>потому что тогда при первом прохождении цикла, когда
<code>$filename</code> расширится до <code>basilisk.dat</code>, оболочка
попытается запустить <code>basilisk.dat</code> как программу. Наконец,
комбинация команд <code>head</code> и <code>tail</code> выбирает строки
с 81 по 100 из любого обрабатываемого файла (предполагая, что в файле не
менее 100 строк).</p>
<div id="пробелы-в-именах" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="пробелы-в-именах" class="callout-inner">
<h3 class="callout-title">Пробелы в именах</h3>
<div class="callout-content">
<p>Пробелы используются для разделения элементов списка, по которому мы
собираемся пройти в цикле. Если один из этих элементов содержит символ
пробела, нам нужно окружить его кавычками, и то же самое сделать с
переменной цикла. Предположим, что наши файлы данных называются:</p>
<pre class="source"><code>red dragon.dat
purple unicorn.dat</code></pre>
<p>Чтобы пройти по этим файлам в цикле, нам нужно добавить двойные
кавычки следующим образом:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="st">"red dragon.dat"</span> <span class="st">"purple unicorn.dat"</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 100 <span class="st">"</span><span class="va">$filename</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Проще избегать использования пробелов (или других специальных
символов) в именах файлов.</p>
<p>Указанные файлы не существуют, поэтому, если мы запустим приведённый
выше код, команда <code>head</code> не сможет найти их; однако
возвращённое сообщение об ошибке покажет имена файлов, которые она
ожидает:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>head: cannot open ‘red dragon.dat' for reading: No such file or directory
head: cannot open ‘purple unicorn.dat' for reading: No such file or directory</code></pre>
</div>
<p>Попробуйте убрать кавычки вокруг <code>$filename</code> в приведённом
выше цикле, чтобы увидеть, как кавычки влияют на пробелы. Обратите
внимание, что при выполнении кода в каталоге <code>creatures</code> мы
получаем результат для файла <code>unicorn.dat</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>head: cannot open ‘red' for reading: No such file or directory
head: cannot open ‘dragon.dat' for reading: No such file or directory
head: cannot open ‘purple' for reading: No such file or directory
CGGTACCGAA
AAGGGTCGCG
CAAGTGTTCC
...</code></pre>
</div>
</div>
</div>
</div>
<p>Мы хотим изменить каждый файл в каталоге
<code>shell-lesson-data/exercise-data/creatures</code>, но при этом
сохранить версию исходных файлов. Мы хотим скопировать исходные файлы в
новые с именами, такими как <code>original-basilisk.dat</code> и
<code>original-unicorn.dat</code>. Мы не можем использовать:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>.dat original-<span class="pp">*</span>.dat</span></code></pre>
</div>
<p>потому что это расширится до:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> cp basilisk.dat minotaur.dat unicorn.dat original-<span class="pp">*</span>.dat</span></code></pre>
</div>
<p>Команда не создаст резервные копии файлов, вместо этого мы получим
ошибку:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>cp: target `original-*.dat' is not a directory</code></pre>
</div>
<p>Эта проблема возникает, когда <code>cp</code> получает более двух
входных аргументов. В этом случае он ожидает, что последний аргумент
будет каталогом, куда можно скопировать все переданные ему файлы.
Поскольку в каталоге <code>creatures</code> нет каталога с именем
<code>original-*.dat</code>, возникает ошибка.</p>
<p>Вместо этого можно использовать цикл:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a><span class="op">&gt;</span>     cp <span class="va">$filename</span> original-<span class="va">$filename</span></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Этот цикл выполняет команду <code>cp</code> один раз для каждого
имени файла. В первый раз, когда <code>$filename</code> разворачивается
до <code>basilisk.dat</code>, оболочка выполняет:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">cp</span> basilisk.dat original-basilisk.dat</span></code></pre>
</div>
<p>Во второй раз команда будет такой:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">cp</span> minotaur.dat original-minotaur.dat</span></code></pre>
</div>
<p>В третий и последний раз команда будет такой:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="fu">cp</span> unicorn.dat original-unicorn.dat</span></code></pre>
</div>
<p>Поскольку команда <code>cp</code> обычно не выводит ничего на экран,
сложно проверить, что цикл работает правильно. Однако, как мы узнали
ранее, можно использовать команду <code>echo</code> для вывода строк, и
мы можем изменить цикл, чтобы он выводил наши команды без их
фактического выполнения. Таким образом, мы можем проверить, какие
команды будут выполнены в неизменённом цикле.</p>
<p>Следующая схема показывает, что происходит, когда модифицированный
цикл выполняется, и демонстрирует, как разумное использование echo
является хорошей техникой отладки.</p>
<figure><img src="fig/shell_script_for_loop_flow_chart.svg" alt="Цикл for “for filename in .dat; do echo cp filename original-filename; done” последовательно присваивает переменной “$filename” имена всех файлов “.dat” в текущем каталоге и выполняет команду. С файлами “basilisk.dat”, “minotaur.dat” и “unicorn.dat” в текущем каталоге цикл последовательно вызовет команду echo трижды и выведет три строки: “cp basilisk.dat original-basilisk.dat”, затем “cp minotaur.dat original-minotaur.dat” и наконец “cp unicorn.dat original-unicorn.dat”" class="figure mx-auto d-block"><div class="figcaption">Цикл for “for filename in .dat; do echo cp <span class="math inline">\(filename original-\)</span>filename; done”
последовательно присваивает переменной “$filename” имена всех файлов
“.dat” в текущем каталоге и выполняет команду. С файлами “basilisk.dat”,
“minotaur.dat” и “unicorn.dat” в текущем каталоге цикл последовательно
вызовет команду echo трижды и выведет три строки: “cp basilisk.dat
original-basilisk.dat”, затем “cp minotaur.dat original-minotaur.dat” и
наконец “cp unicorn.dat original-unicorn.dat”</div>
</figure><section><h2 class="section-heading" id="конвейер-нелли-обработка-файлов">Конвейер Нелли: обработка файлов<a class="anchor" aria-label="anchor" href="#%D0%BA%D0%BE%D0%BD%D0%B2%D0%B5%D0%B9%D0%B5%D1%80-%D0%BD%D0%B5%D0%BB%D0%BB%D0%B8-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2"></a>
</h2>
<hr class="half-width">
<p>Теперь Нелли готова обработать свои файлы данных с помощью
<code>goostats.sh</code> — скрипта оболочки, написанного её
руководителем. Этот скрипт вычисляет некоторые статистические данные из
файла с образцом белка и принимает два аргумента:</p>
<ol style="list-style-type: decimal">
<li>входной файл (содержащий сырые данные)</li>
<li>выходной файл (для хранения вычисленных статистических данных)</li>
</ol>
<p>Так как она всё ещё учится работать с оболочкой, она решает поэтапно
настраивать команды, которые ей нужно выполнить. Её первый шаг —
убедиться, что она может выбрать правильные входные файлы — помните, это
те файлы, чьи имена заканчиваются на ‘A’ или ‘B’, а не на ‘Z’. Перейдя в
каталог <code>north-pacific-gyre</code>, Нелли вводит:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">$</span> cd</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="ex">$</span> cd Desktop/shell-lesson-data/north-pacific-gyre</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$datafile</span></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">NENE01729A.txt</span></span>
<span><span class="va">NENE01729B.txt</span></span>
<span><span class="va">NENE01736A.txt</span></span>
<span><span class="va">...</span></span>
<span><span class="va">NENE02043A.txt</span></span>
<span><span class="va">NENE02043B.txt</span></span></code></pre>
</div>
<p>Следующим её шагом будет решение о том, как назвать файлы, которые
создаст программа анализа <code>goostats.sh</code>. Добавление префикса
к имени каждого входного файла словом <code>stats</code> кажется простым
решением, поэтому она изменяет свой цикл следующим образом:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>NENE01729A.txt stats-NENE01729A.txt
NENE01729B.txt stats-NENE01729B.txt
NENE01736A.txt stats-NENE01736A.txt
...
NENE02043A.txt stats-NENE02043A.txt
NENE02043B.txt stats-NENE02043B.txt</code></pre>
</div>
<p>Она ещё не запускала <code>goostats.sh</code>, но теперь уверена, что
сможет выбрать правильные файлы и сгенерировать правильные имена
выходных файлов.</p>
<p>Постоянный ввод команд становится утомительным, и Нелли беспокоится о
том, что может допустить ошибку, поэтому, вместо того чтобы снова
вводить цикл, она нажимает <kbd>↑</kbd>. В ответ оболочка выводит весь
цикл на одной строке (с использованием точек с запятой для разделения
частей):</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt<span class="kw">;</span> <span class="cf">do</span> <span class="bu">echo</span> <span class="va">$datafile</span> stats-<span class="va">$datafile</span><span class="kw">;</span> <span class="cf">done</span></span></code></pre>
</div>
<p>Используя клавишу <kbd>←</kbd>, Нелли переходит к команде
<code>echo</code> и изменяет её на <code>bash goostats.sh</code>:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt<span class="kw">;</span> <span class="cf">do</span> <span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span><span class="kw">;</span> <span class="cf">done</span></span></code></pre>
</div>
<p>Когда она нажимает <kbd>Enter</kbd>, оболочка выполняет
модифицированную команду. Однако ничего не происходит — на экране нет
вывода. Через мгновение Нелли понимает, что, так как её скрипт больше
ничего не выводит на экран, она не знает, выполняется ли он вообще, и
насколько быстро. Она завершает выполнение команды, набрав
<kbd>Ctrl</kbd>+<kbd>C</kbd>, использует <kbd>↑</kbd> для повторного
ввода команды и редактирует её, чтобы она выглядела так:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt<span class="kw">;</span> <span class="cf">do</span> <span class="bu">echo</span> <span class="va">$datafile</span><span class="kw">;</span></span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span><span class="kw">;</span> <span class="cf">done</span></span></code></pre>
</div>
<div id="начало-и-конец-строки" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="начало-и-конец-строки" class="callout-inner">
<h3 class="callout-title">Начало и конец строки</h3>
<div class="callout-content">
<p>Мы можем перемещаться к началу строки в оболочке, набрав
<kbd>Ctrl</kbd>+<kbd>A</kbd>, и к концу строки, используя
<kbd>Ctrl</kbd>+<kbd>E</kbd>.</p>
</div>
</div>
</div>
<p>Теперь при выполнении программы выводится одна строка каждые пять
секунд:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">NENE01729A.txt</span></span>
<span><span class="va">NENE01729B.txt</span></span>
<span><span class="va">NENE01736A.txt</span></span>
<span><span class="va">...</span></span></code></pre>
</div>
<p>1518 умножить на 5 секунд, разделить на 60 — это означает, что её
скрипт будет выполняться около двух часов. В качестве последней проверки
она открывает другое окно терминала, заходит в каталог
<code>north-pacific-gyre</code> и использует команду
<code>cat stats-NENE01729B.txt</code>, чтобы проверить один из выходных
файлов. Всё выглядит хорошо, так что она решает пойти выпить кофе и
почитать.</p>
<div id="те-кто-помнят-прошлое-могут-повторить-его-в-будущем" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="те-кто-помнят-прошлое-могут-повторить-его-в-будущем" class="callout-inner">
<h3 class="callout-title">Те кто помнят прошлое, могут повторить его в будущем</h3>
<div class="callout-content">
<p>Ещё один способ повторить предыдущую работу — это использовать
команду <code>history</code> для получения списка последних нескольких
сотен выполненных команд и затем использовать <code>!123</code> (где
‘123’ заменяется номером команды), чтобы повторить одну из этих команд.
Например, если Нелли вводит следующее:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> history <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>456  for datafile in NENE*A.txt NENE*B.txt; do   echo $datafile stats-$datafile; done
457  for datafile in NENE*A.txt NENE*B.txt; do echo $datafile stats-$datafile; done
458  for datafile in NENE*A.txt NENE*B.txt; do bash goostats.sh $datafile stats-$datafile; done
459  for datafile in NENE*A.txt NENE*B.txt; do echo $datafile; bash goostats.sh $datafile
stats-$datafile; done
460  history | tail -n 5</code></pre>
</div>
<p>она может снова запустить <code>goostats.sh</code> для файлов, просто
введя <code>!459</code>.</p>
</div>
</div>
</div>
<div id="другие-команды-истории" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="другие-команды-истории" class="callout-inner">
<h3 class="callout-title">Другие команды истории</h3>
<div class="callout-content">
<p>Существует несколько других команд для работы с историей.</p>
<ul>
<li>
<kbd>Ctrl</kbd>+<kbd>R</kbd> запускает режим поиска по истории
‘reverse-i-search’ и находит самую последнюю команду в вашей истории,
соответствующую введённому тексту. Нажмите <kbd>Ctrl</kbd>+<kbd>R</kbd>
ещё раз (или несколько раз), чтобы найти более ранние совпадения. Затем
можно использовать клавиши со стрелками влево и вправо, чтобы выбрать
эту строку, отредактировать её и нажать <kbd>Return</kbd> для выполнения
команды.</li>
<li>
<code>!!</code> выводит предыдущую команду (возможно, вы найдёте это
более удобным, чем использование <kbd>↑</kbd>).</li>
<li>
<code>!$</code> выводит последнее слово предыдущей команды. Это
может быть полезно чаще, чем вы думаете: после выполнения команды
<code>bash goostats.sh NENE01729B.txt stats-NENE01729B.txt</code> вы
можете ввести <code>less !$</code>, чтобы просмотреть файл
<code>stats-NENE01729B.txt</code>, что быстрее, чем использовать
<kbd>↑</kbd> и редактировать командную строку.</li>
</ul>
</div>
</div>
</div>
<div id="пробный-запуск" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="пробный-запуск" class="callout-inner">
<h3 class="callout-title">Пробный запуск</h3>
<div class="callout-content">
<p>Цикл позволяет выполнять множество действий сразу — или допустить
множество ошибок, если он выполняет что-то неправильно. Один из способов
проверить, что <em>сделает</em> цикл — это вывести команды, которые он
бы запустил, вместо их фактического выполнения с помощью echo.</p>
<p>Предположим, мы хотим предварительно просмотреть команды, которые
выполнит следующий цикл, не запуская их:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="op">&gt;</span>     cat <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>В чём разница между двумя циклами ниже, и какой из них мы бы хотели
запустить?</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="co"># Version 1</span></span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="fu">cat</span> <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="co"># Version 2</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="st">"cat </span><span class="va">$datafile</span><span class="st"> &gt;&gt; all.pdb"</span></span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Решение </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<p>Вторая версия — та, которую мы хотим запустить. Она выводит на экран
всё, что заключено в кавычки, расширяя переменную цикла, так как мы
поставили перед ней знак доллара. При этом не создаётся и не изменяется
файл <code>all.pdb</code>, так как <code>&gt;&gt;</code> воспринимается
буквально как часть строки, а не как инструкция перенаправления.</p>
<p>Первая версия добавляет вывод команды <code>echo cat $datafile</code>
в файл <code>all.pdb</code>. Этот файл будет содержать только список
команд: <code>cat cubane.pdb</code>, <code>cat ethane.pdb</code>,
<code>cat methane.pdb</code> и т.д.</p>
<p>Попробуйте обе версии самостоятельно, чтобы увидеть результат! Не
забудьте открыть файл <code>all.pdb</code>, чтобы посмотреть его
содержимое.</p>
</div>
</div>
</div>
</div>
<div id="вложенные-циклы" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="вложенные-циклы" class="callout-inner">
<h3 class="callout-title">Вложенные циклы</h3>
<div class="callout-content">
<p>Предположим, что мы хотим создать структуру каталогов для организации
экспериментов, измеряющих константы скорости реакции с разными
соединениями и при разных температурах. Каков будет результат выполнения
следующего кода:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="ex">$</span> for species in cubane ethane methane</span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a><span class="op">&gt;</span>     for <span class="ex">temperature</span> in 25 30 37 40</span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a><span class="op">&gt;</span>     do</span>
<span id="cb47-5"><a href="#cb47-5" tabindex="-1"></a><span class="op">&gt;</span>         mkdir <span class="va">$species</span><span class="ex">-</span><span class="va">$temperature</span></span>
<span id="cb47-6"><a href="#cb47-6" tabindex="-1"></a><span class="op">&gt;</span>     done</span>
<span id="cb47-7"><a href="#cb47-7" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8"> Решение </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" aria-labelledby="headingSolution8" data-bs-parent="#accordionSolution8">
<div class="accordion-body">
<p>Мы имеем дело с вложенным циклом, то есть цикл находится внутри
другого цикла. Поэтому для каждого вещества во внешнем цикле, внутренний
цикл (вложенный цикл) проходит по списку температур и создаёт новый
каталог для каждой комбинации.</p>
<p>Попробуйте запустить этот код самостоятельно, чтобы увидеть, какие
каталоги будут созданы!</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Цикл <code>for</code> повторяет команды для каждого элемента
списка.</li>
<li>Каждый цикл <code>for</code> требует переменную, чтобы ссылаться на
элемент, с которым он в данный момент работает.</li>
<li>Используйте <code>$name</code>, чтобы развернуть переменную (то есть
получить её значение). Можно также использовать
<code>${name}</code>.</li>
<li>Не используйте пробелы, кавычки или символы подстановки, такие как
’*’ или ‘?’ в именах файлов, так как это усложняет развёртывание
переменных.</li>
<li>Давайте файлам последовательные имена, которые легко сопоставить с
шаблонами подстановки, чтобы было проще выбирать их для циклов.</li>
<li>Используйте клавишу со стрелкой вверх, чтобы пролистать предыдущие
команды и повторить их с изменениями.</li>
<li>Используйте <kbd>Ctrl</kbd>+<kbd>R</kbd>, чтобы искать ранее
введённые команды.</li>
<li>Используйте команду <code>history</code> для отображения последних
команд и <code>![number]</code>, чтобы повторить команду по её
номеру.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-06-script"><p>Content from <a href="06-script.html">Скрипты оболочки</a></p>
<hr>
<p>Last updated on 2024-09-07 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/06-script.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Как можно сохранить и повторно использовать команды?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Написать скрипт оболочки, который запускает одну или несколько
команд для фиксированного набора файлов.</li>
<li>Запустить скрипт оболочки из командной строки.</li>
<li>Написать скрипт оболочки, который работает с набором файлов,
определяемым пользователем на командной строке.</li>
<li>Создать конвейеры, включающие скрипты оболочки, написанные вами или
другими.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Наконец, мы готовы увидеть, что делает оболочку настолько мощной
средой программирования. Мы собираемся взять команды, которые мы часто
повторяем, и сохранить их в файлах, чтобы затем снова запустить все эти
операции, набрав одну единственную команду. Исторически сложилось, что
набор команд, сохранённых в файле, называется <strong>скриптом
оболочки</strong>, но не заблуждайтесь — это настоящие небольшие
программы.</p>
<p>Запись скриптов оболочки сделает вашу работу не только быстрее, но и
избавит вас от необходимости повторно вводить те же команды. Это также
сделает её более точной (меньше шансов на опечатки) и более
воспроизводимой. Если вы вернётесь к своей работе позже (или кто-то
другой найдёт вашу работу и захочет её использовать), вы сможете
воспроизвести те же результаты, просто запустив свой скрипт, а не
вспоминая или заново вводя длинный список команд.</p>
<p>Давайте начнём с возвращения в директорию <code>alkanes/</code> и
создания нового файла, <code>middle.sh</code>, который станет нашим
скриптом оболочки:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> cd alkanes</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre>
</div>
<p>Команда <code>nano middle.sh</code> откроет файл
<code>middle.sh</code> в текстовом редакторе <code>nano</code> (который
работает внутри оболочки). Если файла не существует, он будет создан. Мы
можем использовать текстовый редактор для прямого редактирования файла,
добавив следующую строку:</p>
<pre class="source"><code>head -n 15 octane.pdb | tail -n 5</code></pre>
<p>Это вариация на тему конвейера, который мы уже создавали ранее. Он
выбирает строки с 11 по 15 из файла <code>octane.pdb</code>. Помните,
что мы пока не запускаем эту команду; мы просто сохраняем её в файл.</p>
<p>Затем мы сохраняем файл (<code>Ctrl-O</code> в <code>nano</code>) и
выходим из текстового редактора (<code>Ctrl-X</code> в
<code>nano</code>). Проверьте, что в директории <code>alkanes</code>
теперь есть файл под названием <code>middle.sh</code>.</p>
<p>Как только файл сохранён, мы можем попросить оболочку выполнить
команды, которые он содержит. Наша оболочка называется
<code>bash</code>, поэтому мы выполняем следующую команду:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> bash middle.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM      9  H           1      -4.502   0.681   0.785  1.00  0.00
ATOM     10  H           1      -5.254  -0.243  -0.537  1.00  0.00
ATOM     11  H           1      -4.357   1.252  -0.895  1.00  0.00
ATOM     12  H           1      -3.009  -0.741  -1.467  1.00  0.00
ATOM     13  H           1      -3.172  -1.337   0.206  1.00  0.00</code></pre>
</div>
<p>И действительно, вывод нашего скрипта точно такой же, как если бы мы
запустили этот конвейер напрямую.</p>
<div id="текст-против-чего-то-другого" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="текст-против-чего-то-другого" class="callout-inner">
<h3 class="callout-title">Текст против чего-то другого</h3>
<div class="callout-content">
<p>Мы часто называем некоторые программы, такие как Microsoft Word или
LibreOffice Writer, “текстовыми редакторами”, но нам нужно быть
осторожнее со словами, когда дело доходит до программирования. По
умолчанию Microsoft Word использует файлы <code>.docx</code>, которые
сохраняют не только текст, но и информацию о форматировании (шрифты,
заголовки и т. д.). Эта дополнительная информация не хранится в виде
символов и не имеет смысла для таких инструментов, как
<code>head</code>, который ожидает, что входные файлы будут содержать
только буквы, цифры и знаки препинания с обычной клавиатуры. Поэтому при
редактировании программ нужно либо использовать редактор для работы с
обычным текстом, либо сохранять файлы как простой текст.</p>
</div>
</div>
</div>
<p>Что если мы захотим выбирать строки из произвольного файла? Мы могли
бы каждый раз редактировать <code>middle.sh</code>, изменять там имя
файла, но это, вероятно, займёт больше времени, чем просто ввести
команду снова и выполнить её с новым именем файла. Вместо этого давайте
отредактируем <code>middle.sh</code> так, чтобы сделать его более
универсальным:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre>
</div>
<p>Теперь в <code>nano</code> заменим текст <code>octane.pdb</code> на
специальную переменную $1:</p>
<pre class="source"><code>head -n 15 "$1" | tail -n 5</code></pre>
<p>Внутри скрипта оболочки <code>$1</code> означает ‘первый аргумент,
поданной из командной строки’. Теперь мы можем запустить наш скрипт вот
так:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> bash middle.sh octane.pdb</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM      9  H           1      -4.502   0.681   0.785  1.00  0.00
ATOM     10  H           1      -5.254  -0.243  -0.537  1.00  0.00
ATOM     11  H           1      -4.357   1.252  -0.895  1.00  0.00
ATOM     12  H           1      -3.009  -0.741  -1.467  1.00  0.00
ATOM     13  H           1      -3.172  -1.337   0.206  1.00  0.00</code></pre>
</div>
<p>а для другого файла вот так:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> bash middle.sh pentane.pdb</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM      9  H           1       1.324   0.350  -1.332  1.00  0.00
ATOM     10  H           1       1.271   1.378   0.122  1.00  0.00
ATOM     11  H           1      -0.074  -0.384   1.288  1.00  0.00
ATOM     12  H           1      -0.048  -1.362  -0.205  1.00  0.00
ATOM     13  H           1      -1.183   0.500  -1.412  1.00  0.00</code></pre>
</div>
<div id="двойные-кавычки-вокруг-аргументов" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="двойные-кавычки-вокруг-аргументов" class="callout-inner">
<h3 class="callout-title">Двойные кавычки вокруг аргументов</h3>
<div class="callout-content">
<p>По той же причине, почему мы использовали переменные цикла в двойных
кавычках, в случае если имя файла содержит пробелы, мы используем
двойные кавычки и вокруг переменной <code>$1</code>.</p>
</div>
</div>
</div>
<p>На данный момент нам нужно редактировать <code>middle.sh</code>
каждый раз, когда мы хотим изменить диапазон строк, которые
возвращаются. Давайте исправим это, настроив наш скрипт так, чтобы он
использовал три аргумента командной строки. После первого аргумента
командной строки (<code>$1</code>), каждый следующий аргумент будет
доступен через специальные переменные <code>$1</code>, <code>$2</code>,
<code>$3</code>, которые ссылаются на первый, второй, третий аргумент
командной строки соответственно.</p>
<p>Зная это, мы можем использовать дополнительные аргументы для задания
диапазона строк, которые будут переданы в <code>head</code> и
<code>tail</code>:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre>
</div>
<pre class="source"><code>head -n "$2" "$1" | tail -n "$3"</code></pre>
<p>Теперь можно выполнить:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> bash middle.sh pentane.pdb 15 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM      9  H           1       1.324   0.350  -1.332  1.00  0.00
ATOM     10  H           1       1.271   1.378   0.122  1.00  0.00
ATOM     11  H           1      -0.074  -0.384   1.288  1.00  0.00
ATOM     12  H           1      -0.048  -1.362  -0.205  1.00  0.00
ATOM     13  H           1      -1.183   0.500  -1.412  1.00  0.00</code></pre>
</div>
<p>Изменяя аргументы в команде, мы можем менять поведение нашего
скрипта:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> bash middle.sh pentane.pdb 20 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM     14  H           1      -1.259   1.420   0.112  1.00  0.00
ATOM     15  H           1      -2.608  -0.407   1.130  1.00  0.00
ATOM     16  H           1      -2.540  -1.303  -0.404  1.00  0.00
ATOM     17  H           1      -3.393   0.254  -0.321  1.00  0.00
TER      18              1</code></pre>
</div>
<p>Это работает, но следующий человек, который откроет
<code>middle.sh</code>, может не сразу понять, что он делает. Мы можем
улучшить скрипт, добавив несколько <strong>комментариев</strong> в
начале:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre>
</div>
<pre class="source"><code># Выбор строк из середины файла.
# Использование: bash middle.sh имя_файла номер_последней_строки количество_строк
head -n "$2" "$1" | tail -n "$3"</code></pre>
<p>Комментарий начинается с символа <code>#</code> и продолжается до
конца строки. Компьютер игнорирует комментарии, но они бесценны для
того, чтобы помочь людям (включая вас в будущем) понять и использовать
скрипты. Единственное предостережение: каждый раз, когда вы
модифицируете скрипт, нужно проверить, чтобы комментарий оставался
точным. Объяснение, которое уводит читателя в неправильном направлении,
хуже, чем его отсутствие.</p>
<p>Что, если мы хотим обработать несколько файлов в одном конвейере?
Например, если мы хотим отсортировать наши <code>.pdb</code> файлы по
длине, мы бы набрали:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code></pre>
</div>
<p>потому что <code>wc -l</code> выводит количество строк в файлах
(напомним, что <code>wc</code> означает ‘подсчёт слов’, добавление опции
<code>-l</code> означает ‘подсчёт строк’) и <code>sort -n</code>
сортирует всё в числовом порядке. Мы могли бы поместить это в файл, но
тогда он будет работать только с <code>.pdb</code> файлами в текущей
директории. Если мы хотим получить отсортированный список других типов
файлов, нам нужно передать их имена в скрипт. Мы не можем использовать
<code>$1</code>, <code>$2</code> и так далее, потому что не знаем,
сколько файлов будет. Вместо этого мы используем специальную переменную
<code>$@</code>, которая означает ‘все аргументы командной строки для
скрипта оболочки’. Мы также должны заключить <code>$@</code> в двойные
кавычки чтобы обрабатывать случаи, когда в аргументах есть пробелы (“$@”
— это специальный синтаксис, эквивалентный “$1” “$2” …).</p>
<p>Вот пример:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> nano sorted.sh</span></code></pre>
</div>
<pre class="source"><code># Сортировка файлов по их длине.
# Использование: bash sorted.sh одно_или_несколько_имён_файлов
wc -l "$@" | sort -n</code></pre>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> bash sorted.sh <span class="pp">*</span>.pdb ../creatures/<span class="pp">*</span>.dat</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>9 methane.pdb
12 ethane.pdb
15 propane.pdb
20 cubane.pdb
21 pentane.pdb
30 octane.pdb
163 ../creatures/basilisk.dat
163 ../creatures/minotaur.dat
163 ../creatures/unicorn.dat
596 total</code></pre>
</div>
<div id="список-уникальных-видов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="список-уникальных-видов" class="callout-inner">
<h3 class="callout-title">Список уникальных видов</h3>
<div class="callout-content">
<p>У Лии есть несколько сотен файлов с данными, каждый из которых
выглядит так:</p>
<pre class="source"><code>2013-11-05,deer,5
2013-11-05,rabbit,22
2013-11-05,raccoon,7
2013-11-06,rabbit,19
2013-11-06,deer,2
2013-11-06,fox,1
2013-11-07,rabbit,18
2013-11-07,bear,1</code></pre>
<p>Пример такого типа файла находится в
<code>shell-lesson-data/exercise-data/animal-counts/animals.csv</code>.</p>
<p>Мы можем использовать команду
<code>cut -d , -f 2 animals.csv | sort | uniq</code>, чтобы вывести
уникальные виды в файле <code>animals.csv</code>. Чтобы не вводить эту
команду каждый раз, учёная может написать скрипт оболочки.</p>
<p>Напишите скрипт оболочки под названием <code>species.sh</code>,
который принимает любое количество имён файлов в качестве аргументов
командной строки и использует вариант этой команды для вывода списка
уникальных видов, встречающихся в каждом из файлов отдельно.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Решение
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># Скрипт для поиска уникальных видов в файлах CSV, где виды находятся во втором</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="co"># столбце</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="co"># Этот скрипт принимает любое количество имён файлов в качестве аргументов</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="co"># командной строки</span></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="co"># Проход по всем файлам</span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="cf">for</span> file <span class="kw">in</span> <span class="va">$@</span></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"Unique species in </span><span class="va">$file</span><span class="st">:"</span></span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a>    <span class="co"># Извлечение названий видов</span></span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a>    <span class="fu">cut</span> <span class="at">-d</span> , <span class="at">-f</span> 2 <span class="va">$file</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span></span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Предположим, что мы только что выполнили серию команд, которые
сделали что-то полезное — например, создали график, который мы хотели бы
использовать в статье. Мы хотим иметь возможность воссоздать этот график
позже, если потребуется, поэтому хотим сохранить команды в файл. Вместо
того чтобы набирать их снова (и, возможно, ошибаться), мы можем сделать
так:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="ex">$</span> history <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5 <span class="op">&gt;</span> redo-figure-3.sh</span></code></pre>
</div>
<p>Теперь файл <code>redo-figure-3.sh</code> содержит:</p>
<pre class="source"><code>297 bash goostats.sh NENE01729B.txt stats-NENE01729B.txt
298 bash goodiff.sh stats-NENE01729B.txt /data/validated/01729.txt &gt; 01729-differences.txt
299 cut -d ',' -f 2-3 01729-differences.txt &gt; 01729-time-series.txt
300 ygraph --format scatter --color bw --borders none 01729-time-series.txt figure-3.png
301 history | tail -n 5 &gt; redo-figure-3.sh</code></pre>
<p>Потратив минуту в редакторе, чтобы убрать порядковые номера команд и
удалить последнюю строку, где была вызвана команда <code>history</code>,
мы получаем точную запись того, как был создан этот график.</p>
<div id="зачем-записывать-команды-в-историю-перед-их-выполнением" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="зачем-записывать-команды-в-историю-перед-их-выполнением" class="callout-inner">
<h3 class="callout-title">Зачем записывать команды в историю перед их выполнением?</h3>
<div class="callout-content">
<p>Если вы выполните команду:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> history <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5 <span class="op">&gt;</span> recent.sh</span></code></pre>
</div>
<p>последняя команда в файле будет командой <code>history</code>, т.е.
оболочка добавила команду <code>history</code> в журнал команд до
фактического её выполнения. На самом деле, оболочка всегда добавляет
команды в журнал перед их выполнением. Как вы думаете, зачем она это
делает?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Решение
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Если команда вызывает сбой или зависание, может быть полезно узнать,
что это была за команда, чтобы расследовать проблему. Если бы команда
записывалась в журнал только после её выполнения, мы бы не имели записи
о последней выполненной команде в случае сбоя.</p>
</div>
</div>
</div>
</div>
<p>На практике большинство людей создают скрипты оболочки, выполняя
команды в командной строке несколько раз, чтобы убедиться, что они
работают правильно, а затем сохраняют их в файл для повторного
использования. Такой стиль работы позволяет людям повторно использовать
то, что они узнали о своих данных и рабочем процессе, с одной командой
<code>history</code> и небольшим редактированием, чтобы очистить вывод и
сохранить его как скрипт оболочки.</p>
<section><h2 class="section-heading" id="конвейер-нелли-создание-скрипта">Конвейер Нелли: Создание скрипта<a class="anchor" aria-label="anchor" href="#%D0%BA%D0%BE%D0%BD%D0%B2%D0%B5%D0%B9%D0%B5%D1%80-%D0%BD%D0%B5%D0%BB%D0%BB%D0%B8-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%B0"></a>
</h2>
<hr class="half-width">
<p>Руководитель Нелли настаивает на том, что вся её аналитика должна
быть воспроизводимой. Самый простой способ зафиксировать все шаги — это
записать их в скрипт.</p>
<p>Сначала мы возвращаемся в проектную директорию Нелли:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">$</span> cd ../../north-pacific-gyre/</span></code></pre>
</div>
<p>Она создаёт файл, используя <code>nano</code> …</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> nano do-stats.sh</span></code></pre>
</div>
<p>…в который она записывает следующее:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="co"># Рассчитать статистику для файлов данных.</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> <span class="st">"</span><span class="va">$@</span><span class="st">"</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$datafile</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a>    <span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>Она сохраняет этот файл под именем <code>do-stats.sh</code>, чтобы
теперь можно было повторно выполнить первый этап её анализа, набрав:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="ex">$</span> bash do-stats.sh NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span></code></pre>
</div>
<p>Она также может выполнить:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">$</span> bash do-stats.sh NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-l</span></span></code></pre>
</div>
<p>чтобы вывести только количество обработанных файлов, а не имена
обработанных файлов.</p>
<p>Одно из достоинств скрипта Нелли состоит в том, что он позволяет
пользователю решить, какие файлы обрабатывать. Она могла бы написать его
так:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="co"># Рассчитать статистику для файлов данных по типам A и B.</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$datafile</span></span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a>    <span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>Преимущество такого подхода в том, что он всегда выбирает правильные
файлы: ей не нужно помнить об исключении файлов с буквой ‘Z’. Недостаток
же в том, что он всегда выбирает только эти файлы — она не сможет
запустить его на всех файлах (включая файлы с буквой ‘Z’), или на файлах
с буквами ‘G’ или ‘H’, которые её коллеги из Антарктиды производят, без
редактирования скрипта. Если бы она хотела более гибкий вариант, она
могла бы изменить свой скрипт так, чтобы он проверял наличие аргументов
командной строки, и использовал бы <code>NENE*A.txt NENE*B.txt</code>,
если аргументы не указаны. Конечно, это вводит новый компромисс между
гибкостью и сложностью.</p>
<div id="переменные-в-скриптах-оболочки" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="переменные-в-скриптах-оболочки" class="callout-inner">
<h3 class="callout-title">Переменные в скриптах оболочки</h3>
<div class="callout-content">
<p>В директории <code>alkanes</code> представьте, что у вас есть скрипт
под названием <code>script.sh</code>, который содержит следующие
команды:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="fu">head</span> <span class="at">-n</span> <span class="va">$2</span> <span class="va">$1</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="fu">tail</span> <span class="at">-n</span> <span class="va">$3</span> <span class="va">$1</span></span></code></pre>
</div>
<p>Находясь в директории <code>alkanes</code>, вы набираете следующую
команду:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> bash script.sh <span class="st">'*.pdb'</span> 1 1</span></code></pre>
</div>
<p>Какой из следующих выводов вы ожидаете увидеть?</p>
<ol style="list-style-type: decimal">
<li>Все строки между первой и последней строками каждого файла с
расширением <code>.pdb</code> в директории <code>alkanes</code>
</li>
<li>Первая и последняя строки каждого файла с расширением
<code>.pdb</code> в директории <code>alkanes</code>
</li>
<li>Первая и последняя строки каждого файла в директории
<code>alkanes</code>
</li>
<li>Ошибка из-за кавычек вокруг <code>*.pdb</code>
</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Решение
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Правильный ответ — 2.</p>
<p>Специальные переменные <code>$1</code>, <code>$2</code> и
<code>$3</code> представляют аргументы командной строки, переданные
скрипту, таким образом, команды, которые выполняются, будут
следующими:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 1 cubane.pdb ethane.pdb octane.pdb pentane.pdb propane.pdb</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="ex">$</span> tail <span class="at">-n</span> 1 cubane.pdb ethane.pdb octane.pdb pentane.pdb propane.pdb</span></code></pre>
</div>
<p>Оболочка не расширяет <code>'*.pdb'</code>, так как он заключён в
кавычки. Таким образом, первый аргумент скрипта — это
<code>'*.pdb'</code>, который будет расширен внутри скрипта перед
вызовом команд <code>head</code> и <code>tail</code>.</p>
</div>
</div>
</div>
</div>
<div id="найдите-самый-длинный-файл-с-заданным-расширением" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="найдите-самый-длинный-файл-с-заданным-расширением" class="callout-inner">
<h3 class="callout-title">Найдите самый длинный файл с заданным расширением</h3>
<div class="callout-content">
<p>Напишите скрипт оболочки под названием <code>longest.sh</code>,
который принимает в качестве аргументов имя директории и расширение
файлов и выводит имя файла с наибольшим количеством строк в этой
директории с указанным расширением. Например:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> bash longest.sh shell-lesson-data/exercise-data/alkanes pdb</span></code></pre>
</div>
<p>выведет имя файла с расширением <code>.pdb</code> в директории
<code>shell-lesson-data/exercise-data/alkanes</code>, который содержит
наибольшее количество строк.</p>
<p>Не стесняйтесь протестировать свой скрипт на другой директории,
например:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> bash longest.sh shell-lesson-data/exercise-data/writing txt</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Решение
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="co"># Скрипт, который принимает два аргумента:</span></span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="co">#    1. имя директории</span></span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a><span class="co">#    2. расширение файлов</span></span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a><span class="co"># и выводит имя файла, который:</span></span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a><span class="co">#    1. находится в указанной директории,</span></span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a><span class="co">#    2. имеет указанное расширение,</span></span>
<span id="cb40-7"><a href="#cb40-7" tabindex="-1"></a><span class="co">#    3. содержит наибольшее количество строк.</span></span>
<span id="cb40-8"><a href="#cb40-8" tabindex="-1"></a><span class="co"># .</span></span>
<span id="cb40-9"><a href="#cb40-9" tabindex="-1"></a></span>
<span id="cb40-10"><a href="#cb40-10" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> <span class="va">$1</span>/<span class="pp">*</span>.<span class="va">$2</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 2 <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code></pre>
</div>
<p>Первая часть конвейера, <code>wc -l $1/*.$2 | sort -n</code>,
подсчитывает количество строк в каждом файле и сортирует их численно (от
меньшего к большему). Когда файлов несколько, <code>wc</code> также
выводит итоговую строку, показывающую общее количество строк по всем
файлам. Мы используем <code>tail -n 2 | head -n 1</code>, чтобы
отбросить эту последнюю строку.</p>
<p>При использовании команды
<code>wc -l $1/*.$2 | sort -n | tail -n 1</code> будет отображена
итоговая строка: мы можем строить наш конвейер по частям, чтобы лучше
понять его вывод.</p>
</div>
</div>
</div>
</div>
<div id="понимание-скриптов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="понимание-скриптов" class="callout-inner">
<h3 class="callout-title">Понимание скриптов</h3>
<div class="callout-content">
<p>Для этого задания рассмотрите директорию
<code>shell-lesson-data/exercise-data/alkanes</code>. Она содержит
несколько файлов с расширением <code>.pdb</code>, а также другие файлы,
которые вы могли создать. Объясните, что делает каждый из трёх скриптов
при запуске как <code>bash script1.sh *.pdb</code>,
<code>bash script2.sh *.pdb</code> и <code>bash script3.sh *.pdb</code>
соответственно.</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="co"># Скрипт 1</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="bu">echo</span> <span class="pp">*</span>.<span class="pp">*</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="co"># Скрипт 2</span></span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> <span class="va">$1</span> <span class="va">$2</span> <span class="va">$3</span></span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a>    <span class="fu">cat</span> <span class="va">$filename</span></span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="co"># Скрипт 3</span></span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$@</span>.pdb</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Решение
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>В каждом случае оболочка расширяет подстановочный знак в
<code>*.pdb</code> до того, как передаёт результат в качестве аргументов
скрипту.</p>
<p>Скрипт 1 выведет список всех файлов, содержащих точку в своём имени.
Переданные аргументы в скрипте нигде не используются.</p>
<p>Скрипт 2 выведет содержимое первых 3 файлов с расширением
<code>.pdb</code>. <code>$1</code>, <code>$2</code> и <code>$3</code>
относятся к первому, второму и третьему аргументам соответственно.</p>
<p>Скрипт 3 выведет все аргументы скрипта (т.е. все файлы с расширением
<code>.pdb</code>), а затем добавит <code>.pdb</code> к каждому из них.
<code>$@</code> относится ко всем аргументам, переданным в скрипт
оболочки.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb ethane.pdb methane.pdb octane.pdb pentane.pdb propane.pdb.pdb</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="отладка-скриптов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="отладка-скриптов" class="callout-inner">
<h3 class="callout-title">Отладка скриптов</h3>
<div class="callout-content">
<p>Предположим, вы сохранили следующий скрипт в файле под названием
<code>do-errors.sh</code> в директории Нелли
<code>north-pacific-gyre</code>:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="co"># Рассчитать статистику для файлов данных.</span></span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> <span class="st">"</span><span class="va">$@</span><span class="st">"</span></span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$datfile</span></span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a>    <span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb45-6"><a href="#cb45-6" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>Когда вы запускаете его из директории
<code>north-pacific-gyre</code>:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="ex">$</span> bash do-errors.sh NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span></code></pre>
</div>
<p>вывод окажется пустым. Чтобы выяснить причину, запустите скрипт с
опцией -x:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="ex">$</span> bash <span class="at">-x</span> do-errors.sh NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span></code></pre>
</div>
<p>Что показывает вывод? Какая строка отвечает за ошибку?</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Решение
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<p>Опция <code>-x</code> заставляет <code>bash</code> работать в режиме
отладки. Она выводит каждую команду по мере её выполнения, что поможет
найти ошибки. В данном примере мы видим, что команда <code>echo</code>
ничего не выводит. Мы допустили опечатку в названии переменной в цикле,
и переменная <code>datfile</code> не существует, поэтому возвращается
пустая строка.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Сохраняйте команды в файлах (обычно называемых shell-скриптами) для
повторного использования.</li>
<li>Команда <code>bash [имя_файла]</code> выполняет команды, сохранённые
в файле.</li>
<li>Переменная <code>$@</code> ссылается на все аргументы командной
строки для shell-скрипта.</li>
<li>Переменные <code>$1</code>, <code>$2</code> и т.д. ссылаются на
первый, второй и последующие аргументы командной строки
соответственно.</li>
<li>Заключайте переменные в кавычки, если их значения могут содержать
пробелы.</li>
<li>Предоставление пользователям возможности выбирать файлы для
обработки делает скрипты более гибкими и согласуется с встроенными
командами Unix.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-07-find"><p>Content from <a href="07-find.html">Поиск</a></p>
<hr>
<p>Last updated on 2024-09-07 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/07-find.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Как найти файлы?</li>
<li>Как найти данные в файлах?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Использовать команду <code>grep</code> для поиска строк в текстовых
файлах, которые соответствуют простым шаблонам.</li>
<li>Использовать команду <code>find</code> для поиска файлов и
каталогов, имена которых соответствуют простым шаблонам.</li>
<li>Использовать вывод одной команды как аргумент(ы) командной строки
для другой команды.</li>
<li>Объяснить, что такое “текстовые” и “бинарные” файлы, и почему многие
распространённые инструменты плохо работают с последними.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Так же как многие из нас используют слово “<em>гуглить</em>” как
глагол, означающий “искать”, Unix-программисты часто используют слово
“<em>грепать</em>”. ‘grep’ — это сокращение от ‘global/regular
expression/print’, что описывает частую последовательность операций в
ранних текстовых редакторах Unix. Это также название очень полезной
программы командной строки.</p>
<p><code>grep</code> находит и выводит строки в файлах, которые
соответствуют заданному шаблону. Для наших примеров мы будем
использовать файл, содержащий три хайку, взятые из <a href="https://web.archive.org/web/19991201042211/http://salon.com/21st/chal/1998/01/26chal.html" class="external-link">конкурса
1998 года</a> в журнале <em>Salon</em> (Благодарности авторам Биллу
Торкассо, Ховарду Кордеру и Маргарет Сегалл. См. страницы <a href="https://web.archive.org/web/20000310061355/http://www.salon.com/21st/chal/1998/02/10chal2.html" class="external-link">1</a>
и <a href="https://web.archive.org/web/20000229135138/http://www.salon.com/21st/chal/1998/02/10chal3.html" class="external-link">2</a>).
Для примеров мы будем работать в подкаталоге <code>writing</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> cd</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> cd Desktop/shell-lesson-data/exercise-data/writing</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="ex">$</span> cat haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The Tao that is seen
Is not the true Tao, until
You bring fresh toner.

With searching comes loss
and the presence of absence:
"My Thesis" not found.

Yesterday it worked
Today it is not working
Software is like that.</code></pre>
</div>
<p>Найдём строки, содержащие слово ‘not’:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> grep not haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Is not the true Tao, until
"My Thesis" not found
Today it is not working</code></pre>
</div>
<p>Здесь <code>not</code> — это шаблон, по которому мы ищем. Команда
<code>grep</code> ищет в файле строки, соответствующие указанному
шаблону. Чтобы её использовать, напишите <code>grep</code>, затем
укажите шаблон для поиска и, наконец, имя файла (или файлов), в которых
выполняется поиск.</p>
<p>Результат — это три строки из файла, содержащие последовательность
‘not’.</p>
<p>По умолчанию <code>grep</code> ищет шаблон с учётом регистра. Кроме
того, шаблон поиска может быть частью слова, как мы увидим в следующем
примере.</p>
<p>Попробуем найти шаблон ‘The’.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> grep The haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The Tao that is seen
"My Thesis" not found.</code></pre>
</div>
<p>На этот раз выводятся две строки, содержащие символы ‘The’, одна из
которых содержит шаблон поиска внутри более длинного слова —
‘Thesis’.</p>
<p>Чтобы ограничить совпадения строками, содержащими только слово ‘The’,
можно использовать опцию <code>-w</code> для поиска по границам
слов.</p>
<p>Позже в этом уроке мы также узнаем, как можно изменить поведение
<code>grep</code> с учётом регистра.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-w</span> The haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The Tao that is seen</code></pre>
</div>
<p>Обратите внимание, что граница слова включает начало и конец строки,
а не только пробелы вокруг букв. Иногда нам нужно искать не отдельное
слово, а фразу. Это также можно сделать с помощью <code>grep</code>,
обрамляя фразу в кавычки.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-w</span> <span class="st">"is not"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Today it is not working</code></pre>
</div>
<p>Мы уже видели, что необязательно заключать одиночные слова в кавычки,
но это полезно при поиске нескольких слов. Это также облегчает различие
между искомым шаблоном или фразой и файлом, в котором выполняется поиск.
Мы будем использовать кавычки в оставшихся примерах.</p>
<p>Ещё одна полезная опция — <code>-n</code>, которая пронумеровывает
строки, соответствующие шаблону:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="st">"it"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>5:With searching comes loss
9:Yesterday it worked
10:Today it is not working</code></pre>
</div>
<p>Здесь видно, что строки 5, 9 и 10 содержат последовательность
‘it’.</p>
<p>Мы можем комбинировать опции (т.е. флаги), как и с другими
Unix-командами. Например, давайте найдём строки, содержащие слово ‘the’.
Мы можем совместить опцию <code>-w</code> для поиска строк с целым
словом ‘the’ и <code>-n</code> для нумерации соответствующих строк:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="at">-w</span> <span class="st">"the"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2:Is not the true Tao, until
6:and the presence of absence:</code></pre>
</div>
<p>Теперь используем опцию <code>-i</code>, чтобы сделать наш поиск
нечувствительным к регистру:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="at">-w</span> <span class="at">-i</span> <span class="st">"the"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1:The Tao that is seen
2:Is not the true Tao, until
6:and the presence of absence:</code></pre>
</div>
<p>Далее используем опцию <code>-v</code>, чтобы инвертировать наш
поиск, т.е. вывести строки, которые не содержат слово ‘the’.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="at">-w</span> <span class="at">-v</span> <span class="st">"the"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1:The Tao that is seen
3:You bring fresh toner.
4:
5:With searching comes loss
7:"My Thesis" not found.
8:
9:Yesterday it worked
10:Today it is not working
11:Software is like that.</code></pre>
</div>
<p>Если использовать опцию <code>-r</code> (рекурсивно),
<code>grep</code> может искать шаблон в файлах и подкаталогах.</p>
<p>Попробуем найти шаблон <code>Yesterday</code> рекурсивно в каталоге
<code>shell-lesson-data/exercise-data/writing</code>:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-r</span> Yesterday .</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>./LittleWomen.txt:"Yesterday, when Aunt was asleep and I was trying to be as still as a
./LittleWomen.txt:Yesterday at dinner, when an Austrian officer stared at us and then
./LittleWomen.txt:Yesterday was a quiet day spent in teaching, sewing, and writing in my
./haiku.txt:Yesterday it worked</code></pre>
</div>
<p>У команды <code>grep</code> есть много других опций. Чтобы узнать,
какие именно, можно ввести:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">--help</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Usage: grep [OPTION]... PATTERN [FILE]...
Search for PATTERN in each FILE or standard input.
PATTERN is, by default, a basic regular expression (BRE).
Example: grep -i 'hello world' menu.h main.c

Regexp selection and interpretation:
  -E, --extended-regexp     PATTERN is an extended regular expression (ERE)
  -F, --fixed-strings       PATTERN is a set of newline-separated fixed strings
  -G, --basic-regexp        PATTERN is a basic regular expression (BRE)
  -P, --perl-regexp         PATTERN is a Perl regular expression
  -e, --regexp=PATTERN      use PATTERN for matching
  -f, --file=FILE           obtain PATTERN from FILE
  -i, --ignore-case         ignore case distinctions
  -w, --word-regexp         force PATTERN to match only whole words
  -x, --line-regexp         force PATTERN to match only whole lines
  -z, --null-data           a data line ends in 0 byte, not newline

Miscellaneous:
...        ...        ...</code></pre>
</div>
<div id="использование-grep" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="использование-grep" class="callout-inner">
<h3 class="callout-title">Использование <code>grep</code>
</h3>
<div class="callout-content">
<p>Какая команда приведёт к следующему результату:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>and the presence of absence:</code></pre>
</div>
<ol style="list-style-type: decimal">
<li><code>grep "of" haiku.txt</code></li>
<li><code>grep -E "of" haiku.txt</code></li>
<li><code>grep -w "of" haiku.txt</code></li>
<li><code>grep -i "of" haiku.txt</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Решение </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Правильный ответ — 3, так как опция <code>-w</code> ищет совпадения
только по целому слову. Другие опции также найдут ‘of’, если оно
является частью другого слова.</p>
</div>
</div>
</div>
</div>
<div id="подстановочные-символы-wildcards" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="подстановочные-символы-wildcards" class="callout-inner">
<h3 class="callout-title">Подстановочные символы (Wildcards)</h3>
<div class="callout-content">
<p>Основная сила команды <code>grep</code> заключается не в её опциях, а
в том, что шаблоны могут включать подстановочные символы. (Техническое
название для них — <strong>регулярные выражения</strong>, откуда
происходит ‘re’ в <code>grep</code>.) Регулярные выражения и сложны, и
мощны; если вы хотите делать сложные запросы, обратитесь к уроку на <a href="https://librarycarpentry.org/lc-data-intro/01-regular-expressions.html" class="external-link">этом
сайте</a>. Как пример, давайте найдём строки, в которых ‘o’ находится на
второй позиции:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-E</span> <span class="st">"^.o"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>You bring fresh toner.
Today it is not working
Software is like that.</code></pre>
</div>
<p>Мы используем опцию <code>-E</code> и заключаем шаблон в кавычки,
чтобы оболочка не пыталась его интерпретировать. (Если бы в шаблоне был
символ <code>*</code>, оболочка попыталась бы его развернуть до
выполнения команды <code>grep</code>.) Символ <code>^</code> в шаблоне
закрепляет совпадение за началом строки. Точка (<code>.</code>)
соответствует любому одиночному символу (так же, как и <code>?</code> в
оболочке), а <code>o</code> совпадает с фактической буквой ‘o’.</p>
</div>
</div>
</div>
<div id="отслеживание-вида" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="отслеживание-вида" class="callout-inner">
<h3 class="callout-title">Отслеживание вида</h3>
<div class="callout-content">
<p>У Лии есть несколько сотен файлов данных, сохранённых в одной
директории, каждый из которых отформатирован так:</p>
<pre class="source"><code>2012-11-05,deer,5
2012-11-05,rabbit,22
2012-11-05,raccoon,7
2012-11-06,rabbit,19
2012-11-06,deer,2
2012-11-06,fox,4
2012-11-07,rabbit,16
2012-11-07,bear,1</code></pre>
<p>Она хочет написать сценарий оболочки, который принимает вид как
первый аргумент командной строки, а директорию как второй аргумент.
Сценарий должен возвращать один файл, называемый
<code>&lt;species&gt;.txt</code>, содержащий список дат и количество
встреченного вида в каждую из дат. Например, используя данные выше, файл
<code>rabbit.txt</code> будет содержать:</p>
<pre class="source"><code>2012-11-05,22
2012-11-06,19
2012-11-07,16</code></pre>
<p>Ниже каждая строка содержит отдельную команду или канал. Расположите
их в правильном порядке, чтобы достичь цели Лии:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">cut</span> <span class="at">-d</span> : <span class="at">-f</span> 2</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="op">&gt;</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a><span class="kw">|</span></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-w</span> <span class="va">$1</span> <span class="at">-r</span> <span class="va">$2</span></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="kw">|</span></span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a><span class="va">$1</span><span class="ex">.txt</span></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a><span class="fu">cut</span> <span class="at">-d</span> , <span class="at">-f</span> 1,3</span></code></pre>
</div>
<p>Подсказка: используйте <code>man grep</code>, чтобы узнать, как
искать текст рекурсивно в директории, и <code>man cut</code>, чтобы
выбрать более одного поля в строке.</p>
<p>Пример такого файла находится в каталоге
<code>shell-lesson-data/exercise-data/animal-counts/animals.csv</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Решение </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<pre class="source"><code>grep -w $1 -r $2 | cut -d : -f 2 | cut -d , -f 1,3 &gt; $1.txt</code></pre>
<p>На самом деле можно поменять местами команды <code>cut</code>, и
результат всё равно будет правильным. Попробуйте изменить порядок команд
<code>cut</code> в командной строке и посмотрите на результат каждого
шага, чтобы понять, почему это работает.</p>
<p>Этот скрипт можно вызвать так:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> bash count-species.sh bear .</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="маленькие-женщины" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="маленькие-женщины" class="callout-inner">
<h3 class="callout-title">Маленькие женщины</h3>
<div class="callout-content">
<p>Вы и ваш друг, закончив читать книгу “<em>Маленькие женщины</em>”
Луизы Мэй Олкотт, спорите. Из четырёх сестёр в книге — Джо, Мег, Бет и
Эми — ваш друг считает, что Джо упоминалась чаще всего. Однако вы
уверены, что это была Эми. К счастью, у вас есть файл
<code>LittleWomen.txt</code>, содержащий полный текст романа
(<code>shell-lesson-data/exercise-data/writing/LittleWomen.txt</code>).
Используя цикл <code>for</code>, как бы вы подсчитали количество
упоминаний каждой из четырёх сестёр?</p>
<p>Подсказка: одно из решений может включать команды <code>grep</code> и
<code>wc</code>, соединённые с помощью <code>|</code>, а другое может
использовать опции <code>grep</code>. Задачу можно решить несколькими
способами, выбор которых обычно зависит от правильности результата,
элегантности, удобочитаемости и скорости выполнения.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Solutions </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<pre class="source"><code>for sis in Jo Meg Beth Amy
do
    echo $sis:
    grep -ow $sis LittleWomen.txt | wc -l
done</code></pre>
<p>Альтернативное, чуть менее удачное решение:</p>
<pre class="source"><code>for sis in Jo Meg Beth Amy
do
    echo $sis:
    grep -ocw $sis LittleWomen.txt
done</code></pre>
<p>Это решение хуже, потому что <code>grep -c</code> сообщает только
количество строк с совпадениями. Общее количество совпадений будет ниже,
если в строке содержится более одного совпадения.</p>
<p>Внимательные пользователи могли заметить, что имена персонажей иногда
появляются в заголовках глав в верхнем регистре (например, ‘MEG GOES TO
VANITY FAIR’). Если вы хотите учитывать и такие случаи, можно добавить
опцию <code>-i</code> для игнорирования регистра (хотя в данном случае
это не повлияет на ответ о том, какая сестра упоминалась чаще
всего).</p>
</div>
</div>
</div>
</div>
<p>В то время как <code>grep</code> находит строки в файлах, команда
<code>find</code> находит сами файлы. Опять же, у этой команды множество
опций. Чтобы показать, как работают самые простые из них, мы
воспользуемся деревом директорий
<code>shell-lesson-data/exercise-data</code>, показанным ниже.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
├── animal-counts/
│   └── animals.csv
├── creatures/
│   ├── basilisk.dat
│   ├── minotaur.dat
│   └── unicorn.dat
├── numbers.txt
├── alkanes/
│   ├── cubane.pdb
│   ├── ethane.pdb
│   ├── methane.pdb
│   ├── octane.pdb
│   ├── pentane.pdb
│   └── propane.pdb
└── writing/
    ├── haiku.txt
    └── LittleWomen.txt</code></pre>
</div>
<p>Директория <code>exercise-data</code> содержит один файл
<code>numbers.txt</code> и четыре каталога: <code>animal-counts</code>,
<code>creatures</code>, <code>alkanes</code> и <code>writing</code>,
содержащие различные файлы.</p>
<p>Для начала давайте запустим команду <code>find .</code> (не забудьте
выполнить эту команду из директории
<code>shell-lesson-data/exercise-data</code>).</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">$</span> find .</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">writing</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">writing</span><span class="op">/</span><span class="va">LittleWomen.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">writing</span><span class="op">/</span><span class="va">haiku.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span><span class="op">/</span><span class="va">basilisk.dat</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span><span class="op">/</span><span class="va">unicorn.dat</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span><span class="op">/</span><span class="va">minotaur.dat</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">animal</span><span class="op">-</span><span class="va">counts</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">animal</span><span class="op">-</span><span class="va">counts</span><span class="op">/</span><span class="va">animals.csv</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">numbers.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">ethane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">propane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">octane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">pentane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">methane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">cubane.pdb</span></span></code></pre>
</div>
<p><code>.</code> означает текущую рабочую директорию, откуда мы и
начнём наш поиск. Результат работы команды <code>find</code> — это
список всех файлов и директорий в текущей рабочей директории. Это может
показаться бесполезным, но <code>find</code> имеет множество опций,
чтобы фильтровать результаты, и в этом уроке мы рассмотрим некоторые из
них.</p>
<p>Первая опция в нашем списке — <code>-type d</code>, которая означает
‘объекты, являющиеся директориями’. Действительно, результатом
выполнения команды будет список пяти директорий (включая
<code>.</code>):</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-type</span> d</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">writing</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">animal</span><span class="op">-</span><span class="va">counts</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span></span></code></pre>
</div>
<p>Заметьте, что объекты, найденные <code>find</code>, не выводятся в
каком-либо определённом порядке. Если изменить <code>-type d</code> на
<code>-type f</code>, то будет выведен список всех файлов:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-type</span> f</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span><span class="op">/</span><span class="va">writing</span><span class="op">/</span><span class="va">LittleWomen.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">writing</span><span class="op">/</span><span class="va">haiku.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span><span class="op">/</span><span class="va">basilisk.dat</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span><span class="op">/</span><span class="va">unicorn.dat</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span><span class="op">/</span><span class="va">minotaur.dat</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">animal</span><span class="op">-</span><span class="va">counts</span><span class="op">/</span><span class="va">animals.csv</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">numbers.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">ethane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">propane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">octane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">pentane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">methane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">cubane.pdb</span></span></code></pre>
</div>
<p>Теперь попробуем найти файлы по имени:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-name</span> <span class="pp">*</span>.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span><span class="op">/</span><span class="va">numbers.txt</span></span></code></pre>
</div>
<p>Мы ожидали найти все текстовые файлы, но был выведен только
<code>./numbers.txt</code>. Проблема в том, что оболочка разворачивает
подстановочные символы, такие как <code>*</code>, <em>до того</em>, как
команды выполняются. Так как <code>*.txt</code> в текущей директории
разворачивается в <code>./numbers.txt</code>, фактически выполненная
команда была:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-name</span> numbers.txt</span></code></pre>
</div>
<p>find сделал то, что мы попросили, некорректен был сам запрос.</p>
<p>Чтобы получить нужный результат, сделаем то же, что и с grep:
заключим <code>*.txt</code> в кавычки, чтобы предотвратить развёртывание
символа <code>*</code>. Таким образом, <code>find</code> получит шаблон
<code>*.txt</code>, а не развернутое имя файла
<code>numbers.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-name</span> <span class="st">"*.txt"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span><span class="op">/</span><span class="va">writing</span><span class="op">/</span><span class="va">LittleWomen.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">writing</span><span class="op">/</span><span class="va">haiku.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">numbers.txt</span></span></code></pre>
</div>
<div id="сравнение-ls-и-find" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="сравнение-ls-и-find" class="callout-inner">
<h3 class="callout-title">Сравнение <code>ls</code> и
<code>find</code>
</h3>
<div class="callout-content">
<p>Команды <code>ls</code> и <code>find</code> могут выполнять схожие
задачи при правильных опциях, но в обычных условиях <code>ls</code>
выводит всё, что может, а <code>find</code> ищет объекты с определёнными
свойствами и показывает их.</p>
</div>
</div>
</div>
<p>Как мы уже говорили ранее, сила командной строки заключается в
комбинировании инструментов. Мы видели, как это делается с помощью
каналов (pipes); теперь рассмотрим другой приём. Как мы только что
видели, <code>find . -name "*.txt"</code> возвращает список всех
текстовых файлов в текущей директории и ниже. Как мы можем объединить
это с <code>wc -l</code>, чтобы подсчитать количество строк в этих
файлах?</p>
<p>Самый простой способ — использовать команду <code>find</code> внутри
<code>$()</code>:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="va">$(</span><span class="fu">find</span> . <span class="at">-name</span> <span class="st">"*.txt"</span><span class="va">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  21022 ./writing/LittleWomen.txt
     11 ./writing/haiku.txt
      5 ./numbers.txt
  21038 total</code></pre>
</div>
<p>Когда оболочка выполняет эту команду, первое, что она делает, — это
запускает всё, что находится внутри <code>$()</code>. Затем она заменяет
выражение <code>$()</code> на результат этой команды. Так как результат
команды <code>find</code> — это три имени файлов
<code>./writing/LittleWomen.txt</code>, <code>./writing/haiku.txt</code>
и <code>./numbers.txt</code>, оболочка формирует команду:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> ./writing/LittleWomen.txt ./writing/haiku.txt ./numbers.txt</span></code></pre>
</div>
<p>что и требовалось. Это расширение — то же самое, что делает оболочка
при развёртывании подстановочных символов, таких как <code>*</code> и
<code>?</code>, но с возможностью использовать любую команду как
‘собственный подстановочный символ’.</p>
<p>Очень часто команды <code>find</code> и <code>grep</code>
используются вместе. Первая находит файлы, соответствующие шаблону;
вторая ищет строки внутри этих файлов, соответствующие другому шаблону.
Например, мы можем найти файлы <code>.txt</code>, содержащие слово
“searching”, осуществив поиск этого слова во всех <code>.txt</code>
файлах в текущей директории:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="st">"searching"</span> <span class="va">$(</span><span class="fu">find</span> . <span class="at">-name</span> <span class="st">"*.txt"</span><span class="va">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>./writing/LittleWomen.txt:sitting on the top step, affected to be searching for her book, but was
./writing/haiku.txt:With searching comes loss</code></pre>
</div>
<div id="поиск-и-исключение" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="поиск-и-исключение" class="callout-inner">
<h3 class="callout-title">Поиск и исключение</h3>
<div class="callout-content">
<p>Опция <code>-v</code> для <code>grep</code> инвертирует поиск по
шаблону, выводя только строки, которые <em>не</em> соответствуют
шаблону. Учитывая это, какая из следующих команд найдет все файлы с
расширением <code>.dat</code> в директории <code>creatures</code>, кроме
<code>unicorn.dat</code>? После того как подумаете над ответом, вы
можете протестировать команды в директории
<code>shell-lesson-data/exercise-data</code>.</p>
<ol style="list-style-type: decimal">
<li><code>find creatures -name "*.dat" | grep -v unicorn</code></li>
<li><code>find creatures -name *.dat | grep -v unicorn</code></li>
<li><code>grep -v "unicorn" $(find creatures -name "*.dat")</code></li>
<li>Ни один из предложенных вариантов.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Решение </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Первый вариант правильный. Заключение шаблона поиска в кавычки
предотвращает его развертывание оболочкой, и шаблон передается команде
<code>find</code>.</p>
<p>Второй вариант также работает в данном случае, так как оболочка
пытается развернуть <code>*.dat</code>, но в текущей директории нет
файлов <code>*.dat</code>, поэтому подстановочный символ передается
команде <code>find</code>. Мы впервые сталкивались с этим в <a href="03-create.html">эпизоде 3</a>.</p>
<p>Третий вариант неверен, так как он ищет в содержимом файлов строки,
которые не содержат ‘unicorn’, а не выполняет поиск по именам
файлов.</p>
</div>
</div>
</div>
</div>
<div id="двоичные-файлы" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="двоичные-файлы" class="callout-inner">
<h3 class="callout-title">Двоичные файлы</h3>
<div class="callout-content">
<p>До этого мы фокусировались исключительно на поиске шаблонов в
текстовых файлах. А что если ваши данные хранятся в виде изображений,
баз данных или в каком-то другом формате?</p>
<p>Существует несколько инструментов, расширяющих возможности
<code>grep</code> для работы с нетекстовыми форматами. Однако более
универсальным подходом является преобразование данных в текст или
извлечение элементов текста из данных. С одной стороны, это делает
простые задачи легко выполнимыми. С другой стороны, сложные задачи
обычно становятся невозможными. Например, легко написать программу,
которая извлечет X и Y координаты из изображений для дальнейшей работы с
ними в <code>grep</code>, но как бы вы написали программу для поиска
значений в электронной таблице, ячейки которой содержат формулы?</p>
<p>Последний вариант — признать, что возможности командной строки и
обработки текста ограничены, и использовать другой язык
программирования. Когда наступит время для этого, не судите оболочку
слишком строго. Многие современные языки программирования позаимствовали
у неё множество идей, а подражание — это самая искренняя форма
признания.</p>
</div>
</div>
</div>
<p>Unix-оболочка старше большинства людей, которые ею пользуются. Она
существует так долго, потому что это одна из самых продуктивных
программных сред, когда-либо созданных, а возможно и <em>самая</em>
продуктивная. Ее синтаксис может быть загадочным, но те, кто освоил его,
могут экспериментировать с различными командами интерактивно, а затем
использовать полученные знания для автоматизации своей работы.
Графические пользовательские интерфейсы могут быть проще в освоении на
начальном этапе, но как только освоишь работу с оболочкой, ее
продуктивность несравнима ни с чем. Как написал Альфред Норт Уайтхед в
1911 году: “Цивилизация продвигается вперед, расширяя число важных
операций, которые мы можем выполнять, не задумываясь о них”.</p>
<div id="понимание-конвейера-команды-find" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="понимание-конвейера-команды-find" class="callout-inner">
<h3 class="callout-title">Понимание конвейера команды
<code>find</code>
</h3>
<div class="callout-content">
<p>Напишите короткий поясняющий комментарий к следующему скрипту
оболочки:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> <span class="va">$(</span><span class="fu">find</span> . <span class="at">-name</span> <span class="st">"*.dat"</span><span class="va">)</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Найти все файлы с расширением <code>.dat</code> рекурсивно, начиная
с текущей директории.</li>
<li>Подсчитать количество строк в каждом из этих файлов.</li>
<li>Отсортировать результат второго шага по возрастанию.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>find</code> ищет файлы с определенными свойствами, которые
соответствуют шаблонам.</li>
<li>
<code>grep</code> выбирает строки в файлах, которые соответствуют
шаблонам.</li>
<li>
<code>--help</code> — это опция, поддерживаемая многими
bash-командами и программами, которые можно запустить в Bash, для вывода
дополнительной информации о том, как использовать эти команды или
программы.</li>
<li>
<code>man [команда]</code> отображает руководство для указанной
команды.</li>
<li>
<code>$([команда])</code> подставляет вывод команды на место.</li>
</ul>
</div>
</div>
</div></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/swcarpentry/shell-novice/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/swcarpentry/shell-novice/" class="external-link">Source</a></p>
				<p><a href="https://github.com/swcarpentry/shell-novice/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.7" class="external-link">sandpaper (0.16.7)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.4" class="external-link">varnish (1.0.4)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://swcarpentry.github.io/shell-novice/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://swcarpentry.github.io/shell-novice/aio.html",
  "identifier": "https://swcarpentry.github.io/shell-novice/aio.html",
  "dateCreated": "2014-10-22",
  "dateModified": "2024-09-24",
  "datePublished": "2024-09-24"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

