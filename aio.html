<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>The Unix Shell: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="manifest" href="site.webmanifest">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Software Carpentry" src="assets/images/software-logo.svg">
</div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="assets/images/software-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      The Unix Shell
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            The Unix Shell
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">Summary of Basic Commands</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  The Unix Shell
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-intro.html">1. Введение в командную оболочку</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-filedir.html">2. Навигация по файлам и каталогам</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-create.html">3. Работа с файлами и каталогами</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-pipefilter.html">4. Pipes and Filters</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-loop.html">5. Loops</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-script.html">6. Shell Scripts</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-find.html">7. Finding Things</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li>
<li><a href="reference.html">Summary of Basic Commands</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-intro"><p>Content from <a href="01-intro.html">Введение в командную оболочку</a></p>
<hr>
<p>Last updated on 2024-09-06 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/01-intro.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Что такое командная оболочка и зачем она может понадобиться?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Объяснить, как командная оболочка взаимодействует с клавиатурой,
экраном, операционной системой и пользовательскими программами.</li>
<li>Объяснить, когда и почему следует использовать интерфейсы командной
строки вместо графических интерфейсов.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="введение">Введение<a class="anchor" aria-label="anchor" href="#%D0%B2%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5"></a>
</h3>
<p>Люди и компьютеры обычно взаимодействуют различными способами: с
помощью клавиатуры и мыши, сенсорных экранов или систем распознавания
речи. Наиболее распространённым способом взаимодействия с персональными
компьютерами является <strong>графический пользовательский
интерфейс</strong> (<strong>graphical user interface</strong>,
<strong>GUI</strong>). В GUI команды передаются через клики мышью и
меню.</p>
<p>Несмотря на то, что GUI интуитивно понятен, такой способ
взаимодействия плохо масштабируется. Представьте задачу: вам нужно
скопировать третью строку из тысячи текстовых файлов, расположенных в
разных папках, и вставить их в один файл. Используя GUI, вы бы кликами
потратили часы и могли бы совершить ошибку. В таких случаях приходит на
помощь командная оболочка Unix. Она является <strong>интерфейсом
командной строки</strong> (<strong>command-line interface</strong>,
<strong>CLI</strong>) и языком сценариев (скриптов), что позволяет
выполнять повторяющиеся задачи быстро и в автоматическом режиме. С
правильными командами оболочка может повторять операции с необходимыми
изменениями столько раз, сколько потребуется. В приведённом примере с
файлами задача выполняется за секунды.</p>
</div>
<div class="section level3">
<h3 id="оболочка">Оболочка<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%B1%D0%BE%D0%BB%D0%BE%D1%87%D0%BA%D0%B0"></a>
</h3>
<p><strong>Оболочка</strong> (<strong>Shell</strong>) — это программа, в
которой пользователи вводят команды. С её помощью всего одной строкой
кода можно запускать как сложные программы, наподобие программы для
моделирования климата, так и простые команды для создания пустых папок.
Самая популярная оболочка Unix — это <strong>Bash</strong>
(<strong>Bourne Again SHell</strong>), которая создана на основе
оболочки Стивена Борна. Bash — это оболочка по умолчанию во многих
системах Unix, а также в пакетах Unix-подобных инструментов для Windows
(например, Git Bash).</p>
<p>Работа с оболочкой требует времени на изучение. В отличие от
графического интерфейса, где доступные операции находятся на виду у
пользователя, в интерфейсе командной строки они не показываются
автоматически, поэтому команды учатся подобно новым словам в незнакомом
языке. Однако, даже небольшой набор команд позволяет выполнять широкий
спектр задач, и сегодня мы рассмотрим самые важные из них.</p>
<p>Синтаксис командной оболочки позволяет комбинировать существующие
инструменты в мощные последовательности операций и обрабатывать большие
объёмы данных автоматически. Последовательности команд могут быть
сохранены в виде скриптов, что повышает воспроизводимость рабочих
процессов.</p>
<p>Кроме того, командная строка — это часто самый простой способ
взаимодействия с удалёнными машинами и суперкомпьютерами. Знание
оболочки является ключевым при работы с специализированными
инструментами и высокопроизводительными системами. По мере
распространения облачных и кластерных вычислений, навыки работы с
оболочкой становятся всё более востребованными для решения научных и
вычислительных задач.</p>
<p>Итак, приступим.</p>
<p>Когда оболочка запускается, появляется приглашение
(<strong>prompt</strong>), которое показывает, что оболочка ожидает
ввода:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span></span></code></pre>
</div>
<p>Обычно в качестве приглашения используется символ <code>$</code>, но
это может быть другой символ. В примерах этого урока приглашение будет
показано как <code>$</code>. Важно <strong>не вводить</strong> сам
символ <code>$</code>, когда вы набираете команды, а только то, что
следует за ним. Это правило действует как в данном уроке, так и в других
материалах. Также стоит отметить, что после ввода команды, необходимо
нажать на клавишу <kbd>Enter</kbd>, чтобы исполнить её.</p>
<p>Приглашение сопровождается <strong>текстовым курсором</strong>,
который показывает, где будет появляться ваш ввод. Курсор может быть
мигающим блоком, подчёркиванием или вертикальной чертой. Вы могли видеть
его в текстовых редакторах.</p>
<p>Ваше приглашение может выглядеть иначе, например, может содержать имя
пользователя и хоста (имени компьютера в используемой сети):</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">nelle@localhost</span> $</span></code></pre>
</div>
<p>Приглашение может включать и большее количество информации (и даже
располагаться в несколько строк). Не беспокойтесь, если приглашение
представляет собой не просто символ <code>$</code>. Данный урок не будет
полагаться на эту дополнительную информацию. Единственное на что пока
стоит обращать внимание в приглашении — это непосредственно символ
<code>$</code> и позже мы разберёмся почему.</p>
<p>Теперь попробуем нашу первую команду ls, которая выводит список
содержимого текущей директории:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Desktop     Downloads   Movies      Pictures
Documents   Library     Music       Public</code></pre>
</div>
<div id="команда-не-найдена" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="команда-не-найдена" class="callout-inner">
<h3 class="callout-title">Команда не найдена</h3>
<div class="callout-content">
<p>Если оболочка не может найти программу с введённым именем команды,
она выведет сообщение об ошибке:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> ks</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ks: command not found</code></pre>
</div>
<p>Это может произойти, если команда введена неправильно или
соответствующая программа не установлена.</p>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="пример-задачи-нелли">Пример задачи Нелли<a class="anchor" aria-label="anchor" href="#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B8-%D0%BD%D0%B5%D0%BB%D0%BB%D0%B8"></a>
</h2>
<hr class="half-width">
<p>Нелли Немо, морской биолог, вернулась после шестимесячного
исследования <a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%B5%D0%B2%D0%B5%D1%80%D0%BE-%D0%A2%D0%B8%D1%85%D0%BE%D0%BE%D0%BA%D0%B5%D0%B0%D0%BD%D1%81%D0%BA%D0%BE%D0%B5_%D1%82%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D0%B5" class="external-link">Северо-Тихоокеанского
течения</a>, где она собирала образцы медуз в <a href="https://ru.wikipedia.org/wiki/%D0%91%D0%BE%D0%BB%D1%8C%D1%88%D0%BE%D0%B5_%D1%82%D0%B8%D1%85%D0%BE%D0%BE%D0%BA%D0%B5%D0%B0%D0%BD%D1%81%D0%BA%D0%BE%D0%B5_%D0%BC%D1%83%D1%81%D0%BE%D1%80%D0%BD%D0%BE%D0%B5_%D0%BF%D1%8F%D1%82%D0%BD%D0%BE" class="external-link">Большом
тихоокеанском мусорном пятне</a>. У неё есть 1520 образцов, которые она
исследовала на анализаторе, измеряющем относительное содержание 300
белков. Ей нужно обработать полученные файлы с помощью программы
<code>goostats.sh</code>, но у неё также есть статья, которую нужно
написать до конца месяца для публикации в спец-выпуске журнала
<em>“Записки о жиже”</em>.</p>
<p>Если бы Нелли запускала <code>goostats.sh</code> вручную через GUI,
ей пришлось бы открывать файлы 1520 раз. Исходя из того, что
<code>goostats.sh</code> требуется порядка 30с для обработки каждого
файла, весь этот процесс потребовал бы более 12 часов внимания Нелли. С
использованием оболочки она может автоматизировать этот процесс и
сосредоточиться на написании статьи.</p>
<p>Далее будет рассмотрено, как Нелли может использовать оболочку для
автоматизации этой задачи. В частности, как использовать оболочку для
запуска программы <code>goostats.sh</code>, использовать циклы для
автоматизации повторяющихся этапов ввода имён файлов так, чтобы поручить
выполнение этой задачи компьютеру, пока Нелли сможет сосредоточиться на
написании её статьи.</p>
<p>И в качестве бонуса: однажды автоматизировав этот процесс, Нелли
сможет повторить его когда угодно, в случае, если у нее получится
собрать новые образцы.</p>
<p>Чтобы выполнить задачу, Нелли нужно уметь:</p>
<ul>
<li>перемещаться по файловой системе</li>
<li>создавать файлы/каталоги</li>
<li>проверять длину файла</li>
<li>объединять команды в цепочки</li>
<li>извлекать набор файлов</li>
<li>использовать циклы для повторения команд</li>
<li>запускать скрипты</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Оболочка — это программа, основная задача которой — обработка команд
и запуск других программ.</li>
<li>Этот урок использует Bash — оболочку, используемую по умолчанию во
многих Unix-системах.</li>
<li>Программы в Bash запускаются через интерфейс командной строки.</li>
<li>Основные преимущества оболочки — высокая эффективность ввода команд,
автоматизация повторяющихся задач и доступ к удалённым компьютерам.</li>
<li>Одной из сложностей работы с оболочкой является знание нужных команд
и их правильного использования.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-02-filedir"><p>Content from <a href="02-filedir.html">Навигация по файлам и каталогам</a></p>
<hr>
<p>Last updated on 2024-09-06 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/02-filedir.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Как я могу перемещаться по компьютеру?</li>
<li>Как я могу увидеть, какие файлы и каталоги у меня есть?</li>
<li>Как я могу указать расположение файла или каталога на своем
компьютере?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Объяснить сходства и различия между файлом и каталогом.</li>
<li>Преобразовать абсолютный путь в относительный и наоборот.</li>
<li>Построить абсолютные и относительные пути, идентифицирующие
конкретные файлы и каталоги.</li>
<li>Использовать опции и аргументы для изменения поведения команды
оболочки.</li>
<li>Продемонстрировать использование автодополнения по клавише Tab и
объяснить его преимущества.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Часть операционной системы, отвечающая за управление файлами и
каталогами, называется <strong>файловой системой</strong>. Она
организует наши данные в файлы, которые хранят информацию, и каталоги
(также называемые “папками”), которые хранят файлы или другие
каталоги.</p>
<p>Существует несколько команд, которые часто используются для создания,
просмотра, переименования и удаления файлов и каталогов. Чтобы начать их
изучение, мы откроем окно оболочки.</p>
<p>Для начала узнаем, где мы находимся, запустив команду
<code>pwd</code> (которая расшифровывается как “print working directory”
— вывести рабочий каталог). Каталоги можно рассматривать как некоторые
<em>места</em> — в любой момент, когда мы используем оболочку, мы
находимся в месте, которое именуется <strong>“текущим рабочим
каталогом”</strong>. Команды обычно читают и записывают файлы в текущем
рабочем каталоге, то есть “здесь”, поэтому важно знать, где вы
находитесь перед запуском команды. <code>pwd</code> показывает, где мы
находимся:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle</code></pre>
</div>
<p>В этих листингах, ответом компьютера является
<code>/Users/nelle</code> — <strong>домашний каталог</strong>:</p>
<div id="вариации-домашнего-каталога" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="вариации-домашнего-каталога" class="callout-inner">
<h3 class="callout-title">Вариации домашнего каталога</h3>
<div class="callout-content">
<p>Путь домашнего каталога будет выглядеть по-разному на разных
операционных системах. На Linux он может выглядеть как
<code>/home/nelle</code>, а на Windows будет похож на
<code>C:\Documents and Settings\nelle</code> или
<code>C:\Users\nelle</code>. (Обратите внимание, что для разных версий
Windows он может немного отличаться.) В будущих примерах мы используем
по умолчанию вывод для <code>MacOS</code> — вывод на Linux и Windows
может немного отличаться, но должен быть в целом схожим.</p>
<p>Дальнейшее повествование будет исходить, что команда <code>pwd</code>
вернула домашний каталог вашего пользователя. Если <code>pwd</code>
возвращает что-то другое, вам, возможно, придется перейти туда с помощью
команды <code>cd</code>, иначе некоторые команды в этом уроке не будут
работать как написано. Подробности о команде <code>cd</code> см. в
разделе <a href="#%D0%B8%D1%81%D1%81%D0%BB%D0%B5%D0%B4%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D1%85-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2">Исследование других
каталогов</a>.</p>
</div>
</div>
</div>
<p>Чтобы понять, что такое “домашний каталог”, давайте рассмотрим, как
организована файловая система в целом. Для примера мы будем
иллюстрировать файловую систему на компьютере нашего ученого Нелли.
После этого примера вы изучите команды для изучения вашей собственной
файловой системы, которая будет построена аналогично, но не будет точно
такой же.</p>
<p>Файловая система на компьютере Нелли выглядит следующим образом:</p>
<figure><img src="fig/filesystem.svg" alt="Файловая система состоит из корневого каталога, который содержит подкаталоги с названиями bin, data, users и tmp" class="figure mx-auto d-block"><div class="figcaption">Файловая система состоит из корневого каталога,
который содержит подкаталоги с названиями bin, data, users и tmp</div>
</figure><p>Файловая система напоминает перевернутое дерево. Верхний каталог —
это <strong>корневой каталог</strong>, который содержит всё остальное.
Мы обозначаем его с помощью одиночного символа “слэш” (<code>/</code>).
В строке <code>/Users/nelle</code> корень обозначен ведущим (самым
левым) слэшем.</p>
<p>Внутри этого каталога находятся несколько других каталогов:</p>
<ul>
<li>
<code>bin</code>, где хранятся некоторые встроенные программы,</li>
<li>
<code>data</code>, для различных файлов данных,</li>
<li>
<code>Users</code>, где находятся персональные каталоги
пользователей,</li>
<li>
<code>tmp</code>, для временных файлов, которые не нужно хранить
долго</li>
</ul>
<p>и т. д.</p>
<p>Мы знаем, что наш текущий рабочий каталог <code>/Users/nelle</code>
находится внутри <code>/Users</code>, потому что <code>/Users</code> —
это первая часть его имени. Аналогично, мы знаем, что
<code>/Users</code> находится в корневом каталоге <code>/</code>, потому
что его имя начинается с /.</p>
<div id="символы-слэш" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="символы-слэш" class="callout-inner">
<h3 class="callout-title">Символы слэш</h3>
<div class="callout-content">
<p>Обратите внимание, что символ <code>/</code> имеет два значения.
Когда является самым первым символом в имени файла или каталога, он
указывает на корневой каталог. Когда он появляется внутри пути, это
просто разделитель.</p>
</div>
</div>
</div>
<p>В каталоге <code>/Users</code>, мы видим отдельные каталоги для
каждого пользователя, зарегистрированного на компьютере Нелли: ее коллег
<em>imhotep</em> и <em>larry</em>.</p>
<figure><img src="fig/home-directories.svg" alt="Подкаталог “/Users” включает домашние директории таких пользователей, как “/Users/imhotep”, “/Users/larry” и “/Users/nelle" class="figure mx-auto d-block"><div class="figcaption">Подкаталог “/Users” включает домашние директории
таких пользователей, как “/Users/imhotep”, “/Users/larry” и
“/Users/nelle</div>
</figure><p>Файлы пользователя <em>imhotep</em> хранятся в
<code>/Users/imhotep</code>, файлы пользователя <em>larry</em> — в
<code>/Users/larry</code>, а файлы Нелли — в <code>/Users/nelle</code>.
В наших примерах мы работаем с пользователем Нелли, поэтому мы видим
<code>/Users/nelle</code> как домашний каталог. Обычно при открытии
нового командного окна вы начинаете в своем домашнем каталоге.</p>
<p>Теперь давайте изучим команду, которая позволит нам увидеть
содержимое нашей файловой системы. Мы можем увидеть, что находится в
нашем домашнем каталоге, выполнив команду <code>ls</code>:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Applications Documents    Library      Music        Public
Desktop      Downloads    Movies       Pictures</code></pre>
</div>
<blockquote>
<p>[!Note]<br>
Ваши результаты могут немного отличаться в зависимости от вашей
операционной системы и настройки файловой системы.</p>
</blockquote>
<p>Команда <code>ls</code> выводит названия файлов и каталогов в текущем
каталоге. Мы можем сделать вывод более понятным, используя опцию
<code>-F</code>, которая указывает <code>ls</code> классифицировать
вывод, добавляя маркеры в конец имён файлов и каталогов для указания их
типа:</p>
<ul>
<li>
<code>/</code> указывает, что это каталог;</li>
<li>
<code>@</code> указывает на ссылку;</li>
<li>
<code>*</code> указывает на исполняемый файл.</li>
</ul>
<p>В зависимости от настроек вашей оболочки, оболочка также может
использовать цвета для указания, является ли элемент файлом или
каталогом.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Applications/ Documents/    Library/      Music/        Public/
Desktop/      Downloads/    Movies/       Pictures/</code></pre>
</div>
<p>Вывод показывает, что домашний каталог содержит только
<strong>подкаталоги</strong>. Любые имена в выводе без
классификационного символа — это <strong>файлы</strong> в текущем
рабочем каталоге.</p>
<div id="очистка-терминала" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="очистка-терминала" class="callout-inner">
<h3 class="callout-title">Очистка терминала</h3>
<div class="callout-content">
<p>Если экран становится слишком загроможденным, вы можете очистить
терминал с помощью команды <code>clear</code>. Вы по-прежнему сможете
получить доступ к предыдущим командам, используя <kbd>↑</kbd> и
<kbd>↓</kbd> для перемещения по строкам, или прокручивая окно
терминала.</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="получение-справки">Получение справки<a class="anchor" aria-label="anchor" href="#%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D1%81%D0%BF%D1%80%D0%B0%D0%B2%D0%BA%D0%B8"></a>
</h3>
<p>У команды <code>ls</code> есть множество других опций. Существует два
распространенных способа узнать, как пользоваться командой и какие опции
она поддерживает — <strong>в зависимости от вашей среды, может работать
только один из этих способов:</strong></p>
<ol style="list-style-type: decimal">
<li>Мы можем передать опцию <code>--help</code> любой команде (доступно
на Linux и Git Bash), например:</li>
</ol>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">--help</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Мы можем прочитать руководство с помощью команды <code>man</code>
(доступно на Linux и macOS):</li>
</ol>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> man ls</span></code></pre>
</div>
<p>Далее будет разобрано оба способа.</p>
<div id="справка-для-встроенных-команд" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="справка-для-встроенных-команд" class="callout-inner">
<h3 class="callout-title">Справка для встроенных команд</h3>
<div class="callout-content">
<p>Некоторые команды встроены в оболочку Bash, а не существуют как
отдельные программы на файловой системе. Примером является команда
<code>cd</code> (смена каталога). Если вы получите сообщение вроде
<code>No manual entry for cd</code>, то попробуйте <code>help cd</code>.
Команда <code>help</code> предоставляет информацию по использованию <a href="https://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html" class="external-link">встроенных
команд Bash</a>.</p>
</div>
</div>
</div>
<div class="section level4">
<h4 id="опция-help">Опция –help<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%BF%D1%86%D0%B8%D1%8F-help"></a>
</h4>
<p>Большинство команд Bash и программ, которые были написаны для запуска
из Bash, поддерживают опцию <code>--help</code>, которая выводит больше
информации о том, как использовать команду или программу.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">--help</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Usage: ls [OPTION]... [FILE]...
List information about the FILEs (the current directory by default).
Sort entries alphabetically if neither -cftuvSUX nor --sort is specified.

Mandatory arguments to long options are mandatory for short options, too.
  -a, --all                  do not ignore entries starting with .
  -A, --almost-all           do not list implied . and ..
      --author               with -l, print the author of each file
  -b, --escape               print C-style escapes for nongraphic characters
      --block-size=SIZE      scale sizes by SIZE before printing them; e.g.,
                               '--block-size=M' prints sizes in units of
                               1,048,576 bytes; see SIZE format below
  -B, --ignore-backups       do not list implied entries ending with ~
  -c                         with -lt: sort by, and show, ctime (time of last
                               modification of file status information);
                               with -l: show ctime and sort by name;
                               otherwise: sort by ctime, newest first
  -C                         list entries by columns
      --color[=WHEN]         colorize the output; WHEN can be 'always' (default
                               if omitted), 'auto', or 'never'; more info below
  -d, --directory            list directories themselves, not their contents
  -D, --dired                generate output designed for Emacs' dired mode
  -f                         do not sort, enable -aU, disable -ls --color
  -F, --classify             append indicator (one of */=&gt;@|) to entries
...        ...        ...</code></pre>
</div>
<div id="когда-использовать-короткие-и-длинные-опции" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="когда-использовать-короткие-и-длинные-опции" class="callout-inner">
<h3 class="callout-title">Когда использовать “короткие” и “длинные” опции</h3>
<div class="callout-content">
<p>Справка для команды <code>ls</code> показывает, что та имеет два
формата опций: “короткие” и “длинные”. К примеру, для отображения файлов
и папкой, начинающихся с символа <code>.</code>, которые не отображаются
по умолчанию командой <code>ls</code>, можно воспользоваться как
короткой опцией <code>-a</code>, так и длинной опцией
<code>--all</code></p>
<p>Когда команда поддерживает оба вида опций:</p>
<ul>
<li>Используйте короткие опции при вводе команд непосредственно в
оболочке, чтобы сократить количество нажатий клавиш и быстрее выполнить
задачу.</li>
<li>Используйте длинные опции в скриптах для ясности. Скрипт будет
прочитан много раз, а написан — один раз.</li>
</ul>
</div>
</div>
</div>
<div id="не-поддерживаемые-опции-командной-строки" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="не-поддерживаемые-опции-командной-строки" class="callout-inner">
<h3 class="callout-title">Не поддерживаемые опции командной строки</h3>
<div class="callout-content">
<p>Если вы попробуете использовать опцию, которая не поддерживается,
команда <code>ls</code> и другие команды обычно выведут сообщение об
ошибке наподобие:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-j</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>ls: invalid option -- 'j'
Try 'ls --help' for more information.</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="команда-man">Команда <code>man</code>
<a class="anchor" aria-label="anchor" href="#%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B0-man"></a>
</h4>
<p>Другой способ узнать о команде <code>ls</code> — ввести:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> man ls</span></code></pre>
</div>
<p>Эта команда превратит ваш терминал в страницу с описанием команды
<code>ls</code> и ее опций.</p>
<p>Чтобы перемещаться по страницам руководства man, вы можете
использовать <kbd>↑</kbd> и <kbd>↓</kbd> для покадрового перемещения,
или попробовать <kbd>b</kbd> и <kbd>Spacebar</kbd> для прокрутки
страницы целиком вверх и вниз. Чтобы искать символ или слово в
руководстве man, используйте <kbd>/</kbd>, за которым введите искомый
символ или слово. Если поиск найдет несколько совпадений, вы можете
перемещаться между ними с помощью <kbd>N</kbd> (для перемещения вперед)
и <kbd>Shift</kbd> + <kbd>N</kbd> (для перемещения назад).</p>
<p>Чтобы выйти из руководства <code>man</code>, нажмите
<kbd>q</kbd>.</p>
<div id="страницы-руководства-в-интернете" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="страницы-руководства-в-интернете" class="callout-inner">
<h3 class="callout-title">Страницы руководства в интернете</h3>
<div class="callout-content">
<p>Конечно, есть третий способ получить справку по командам: поиск в
интернете через браузер. При поиске в интернете включение фразы
<code>unix man page</code> в поисковый запрос поможет найти
соответствующие результаты.</p>
<p>GNU предоставляет ссылки на свои <a href="https://www.gnu.org/manual/manual.html" class="external-link">руководства</a>, включая
<a href="https://www.gnu.org/software/coreutils/manual/coreutils.html" class="external-link">основные
утилиты GNU</a>, которые охватывают многие команды, представленные в
этом уроке.</p>
<div class="section level3">
<h3 id="использование-проекта-tldr">Использование проекта <code>tl;dr</code>
<a class="anchor" aria-label="anchor" href="#%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0-tldr"></a>
</h3>
<p>Часто, очень подробные справки и мануалы могут отпугнуть впервые
столкнувшемуся с ними пользователя. Проект <a href="https://tldr.sh/" class="external-link"><code>tl;dr</code></a> (анг.: “Too long; don’t
read”, что на сленге означает: “многа букаф, ниасилил”) позволяет
вывести краткое резюме по указанной команде с примерами частых сценариев
использования. Данный проект может быть установлен в систему в качестве
отдельной программы, наряду с программой <code>man</code>, либо же
использован <a href="https://tldr.inbrowser.app/" class="external-link">онлайн</a>.</p>
</div>
</div>
</div>
</div>
<div id="изучение-дополнительных-опций-ls" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="изучение-дополнительных-опций-ls" class="callout-inner">
<h3 class="callout-title">Изучение дополнительных опций
<code>ls</code>
</h3>
<div class="callout-content">
<p>Вы также можете использовать две опции одновременно. Что делает
команда <code>ls</code> с опцией <code>-l</code>? А что, если
использовать опции <code>-l</code> и <code>-h</code> вместе?</p>
<p>Некоторая информация в выводе будет касаться свойств, которые мы не
рассматриваем в этом уроке (таких как права доступа к файлам и их
владение), остальная информация будет полезной.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Решение </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Опция <code>-l</code> заставляет команду <code>ls</code> использовать
формат длинного (<strong>l</strong>ong) списка, показывая не только
имена файлов/каталогов, но и дополнительную информацию, такую как размер
файла и время его последнего изменения. Если вы используете обе опции
<code>-l</code> и <code>-h</code>, это делает размер файла
человекочитаемым (<strong>h</strong>uman readable), то есть отображает
что-то вроде <code>5.3K</code> вместо <code>5369</code>.</p>
</div>
</div>
</div>
</div>
<div id="список-в-обратном-хронологическом-порядке" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="список-в-обратном-хронологическом-порядке" class="callout-inner">
<h3 class="callout-title">Список в обратном хронологическом порядке</h3>
<div class="callout-content">
<p>По умолчанию <code>ls</code> выводит содержимое каталога в алфавитном
порядке по имени. Команда <code>ls -t</code> сортирует элементы по
времени последнего изменения, вместо алфавитного порядка. Команда
<code>ls -r</code> выводит содержимое каталога в обратном порядке. Какой
файл отображается последним, если использовать обе опции <code>-t</code>
и <code>-r</code> вместе? Подсказка: вам может понадобиться использовать
опцию <code>-l</code>, чтобы увидеть даты последних изменений.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Решение </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>При использовании опций <code>-rt</code>, самый недавний измененный
файл будет отображен последним . Это может быть очень полезно для поиска
ваших последних правок или проверки, был ли создан новый файл.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="изучение-других-каталогов">Изучение других каталогов<a class="anchor" aria-label="anchor" href="#%D0%B8%D0%B7%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D1%85-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2"></a>
</h3>
<p>Мы можем использовать команду <code>ls</code> не только для текущего
рабочего каталога, но и для просмотра содержимого другого каталога.
Давайте посмотрим на наш каталог <code>Desktop</code>, выполнив команду
<code>ls -F Desktop</code>, то есть команду <code>ls</code> с опцией
<code>-F</code> и <a href="https://hepoh3.github.io/shell-novice-ru/reference.html#%D0%B0%D1%80%D0%B3%D1%83%D0%BC%D0%B5%D0%BD%D1%82" class="external-link"><strong>аргументом</strong></a>
<code>Desktop</code>. Аргумент <code>Desktop</code> указывает
<code>ls</code>, что мы хотим просмотреть содержимое не текущего
рабочего каталога (а вложенного каталога <code>Desktop</code>):</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> Desktop</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>shell-lesson-data/</code></pre>
</div>
<p>Обратите внимание, что если каталог с именем <code>Desktop</code> не
существует в вашем текущем рабочем каталоге, эта команда вернёт ошибку.
Обычно каталог <code>Desktop</code> существует в домашнем каталоге,
который, как предполагает данный текст, является текущим рабочим
каталогом вашей bash-оболочки.</p>
<p>Вывод должен содержать список всех файлов и подкаталогов в вашем
каталоге <code>Desktop</code>, включая каталог
<code>shell-lesson-data</code>, который вы скачали на этапе <a href="index.html#setup">настройки для этого урока</a>. На большинстве систем
содержимое каталога Desktop в оболочке будет отображаться как значки в
графическом интерфейсе за всеми открытыми окнами. Проверьте, так ли это
у вас.</p>
<p>Организация данных по иерархии помогает нам следить за своим рабочим
процессом. Хотя можно поместить сотни файлов в домашний каталог, так же
как можно сложить сотни напечатанных бумаг на столе, намного проще
находить нужное, когда они организованы в подкаталоги с осмысленными
именами.</p>
<p>Теперь, когда мы знаем, что каталог <code>shell-lesson-data</code>
находится в каталоге <code>Desktop</code>, мы можем сделать две
вещи.</p>
<p>Во-первых, используя ту же стратегию, что и ранее, мы можем
посмотреть его содержимое, передав имя каталога команде
<code>ls</code>:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> Desktop/shell-lesson-data</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>exercise-data/  north-pacific-gyre/</code></pre>
</div>
<p>Во-вторых, мы можем сменить наше местоположение на другой каталог,
чтобы больше не находиться в домашнем каталоге.</p>
<p>Команда для смены местоположения — это <code>cd</code>, за которой
следует имя каталога для смены рабочего каталога. <code>cd</code>
расшифровывается как ‘<strong>c</strong>hange
<strong>d</strong>irectory’ (сменить каталог), что немного вводит в
заблуждение. Команда не меняет каталог; она изменяет текущий рабочий
каталог оболочки. Другими словами, она говорит оболочке в каком каталоге
мы находимся. Команда <code>cd</code> похожа на двойной щелчок по папке
в графическом интерфейсе, чтобы попасть в эту папку.</p>
<p>Допустим, мы хотим перейти в каталог <code>exercise-data</code>,
который мы видели выше. Мы можем выполнить следующие команды:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> cd Desktop</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="ex">$</span> cd shell-lesson-data</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="ex">$</span> cd exercise-data</span></code></pre>
</div>
<p>Эти команды переместят нас из домашнего каталога в каталог
<code>Desktop</code>, затем в <code>shell-lesson-data</code>, а после в
каталог <code>exercise-data</code>. Вы можете заметить, что
<code>cd</code> ничего не выводит на экран. Это нормально. Многие
команды оболочки при успешном выполнении ничего не выводят на экран. Но
если мы выполним <code>pwd</code> после данных команд, мы увидим, что
сейчас находимся в каталоге
<code>/Users/nelle/Desktop/shell-lesson-data/exercise-data</code>.</p>
<p>Если мы теперь выполним <code>ls -F</code> без аргументов, то увидим
содержимое каталога
<code>/Users/nelle/Desktop/shell-lesson-data/exercise-data</code>,
потому что именно там мы сейчас находимся:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle/Desktop/shell-lesson-data/exercise-data</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>alkanes/  animal-counts/  creatures/  numbers.txt  writing/</code></pre>
</div>
<p>Теперь мы знаем, как спуститься по дереву каталогов (то есть как
войти в подкаталог), но как подняться вверх (то есть как выйти из
каталога и войти в его родительский каталог)? Мы могли бы попробовать
следующее:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> cd shell-lesson-data</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>-bash: cd: shell-lesson-data: No such file or directory</code></pre>
</div>
<p>Но мы получаем ошибку! Почему так?</p>
<p>С нашими текущими методами работы, команда <code>cd</code> видит
только подкаталоги внутри вашего текущего каталога. Есть разные способы
увидеть каталоги выше текущего местоположения, начнём с самого
простого.</p>
<p>Существует сокращение в оболочке для перемещения на один уровень выше
по каталогу. Это делается следующим образом:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> cd ..</span></code></pre>
</div>
<p><code>..</code> — это специальное имя каталога, означающее “каталог,
содержащий этот”, или, короче, <strong>родительский каталог</strong>. И
действительно, если мы выполним <code>pwd</code> после выполнения
<code>cd ..</code>, мы увидим, что снова оказались в
<code>/Users/nelle/Desktop/shell-lesson-data</code>:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle/Desktop/shell-lesson-data</code></pre>
</div>
<p>Специальный каталог <code>..</code> обычно не отображается, когда мы
выполняем <code>ls</code>. Если мы хотим его увидеть, мы можем добавить
опцию <code>-a</code> к <code>ls -F</code>:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> <span class="at">-a</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>./  ../  exercise-data/  north-pacific-gyre/</code></pre>
</div>
<p><code>-a</code> означает ‘показать все’ (show <strong>a</strong>ll),
включая скрытые файлы. Эта опция сообщает команде <code>ls</code>
показывать нам имена файлов и каталогов, которые начинаются с
<code>.</code>, которым является и <code>..</code>. Как вы можете
видеть, такой вывод также отображает другой специальный каталог —
<code>.</code>, который обозначает ‘текущий рабочий каталог’. Это может
показаться излишним, но вскоре мы увидим, как это можно
использовать.</p>
<p>Обратите внимание, что в большинстве утилит командной строки можно
объединять несколько коротких опций, используя один символ
<code>-</code> без пробелов между опциями: <code>ls -F -a</code>
эквивалентно <code>ls -Fa</code>.</p>
<div id="другие-скрытые-файлы" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="другие-скрытые-файлы" class="callout-inner">
<h3 class="callout-title">Другие скрытые файлы</h3>
<div class="callout-content">
<p>Помимо скрытых каталогов <code>..</code> и <code>.</code>, вы также
можете увидеть файл под названием <code>.bash_profile</code>. Этот файл
обычно содержит настройки конфигурации оболочки. Вы также можете увидеть
другие файлы и каталоги, начинающиеся с <code>.</code>. Эти файлы и
каталоги обычно используются для настройки различных программ на вашем
компьютере. Префикс <code>.</code> используется, чтобы предотвратить
загромождение терминала этими конфигурационными файлами при выполнении
стандартной команды ls.</p>
</div>
</div>
</div>
<p>Эти три команды — основные команды для навигации по файловой системе
на вашем компьютере: <code>pwd</code>, <code>ls</code> и
<code>cd</code>. Давайте изучим некоторые вариации этих команд. Что
произойдет, если вы введете <code>cd</code> без указания каталога?</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> cd</span></code></pre>
</div>
<p>Как можно проверить, что произошло? Команда pwd даст нам ответ!</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle</code></pre>
</div>
<p>Оказывается, что команда <code>cd</code> без аргументов вернёт вас в
домашний каталог, что очень полезно, если вы потерялись в своей файловой
системе.</p>
<p>Попробуем вернуться в каталог <code>exercise-data</code>. В прошлый
раз мы использовали три команды, но на самом деле можно указать
последовательность каталогов для перехода в <code>exercise-data</code>
за один шаг:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">$</span> cd Desktop/shell-lesson-data/exercise-data</span></code></pre>
</div>
<p>Проверьте, что мы перешли в нужное место, выполнив команды
<code>pwd</code> и <code>ls -F</code>.</p>
<p>Если мы хотим подняться на один уровень выше от каталога данных, мы
могли бы использовать <code>cd ..</code>. Но есть и другой способ
перейти в любой каталог, независимо от вашего текущего
местоположения.</p>
<p>До сих пор при указании имен каталогов или даже пути к каталогу (как
в примере выше) мы использовали <strong>относительные пути</strong>.
Когда вы используете относительный путь с командой, такой как
<code>ls</code> или <code>cd</code>, она пытается найти это
местоположение относительно вашего текущего каталога, а не корня
файловой системы.</p>
<p>Однако можно указать <strong>абсолютный путь</strong> к каталогу,
указав весь путь от корневого каталога. Начало такого пути обозначается
слэшем. <code>/</code> в качестве первого символа пути сообщает
компьютеру следовать по пути от корня файловой системы, поэтому он
всегда указывает на один и тот же каталог, независимо от того, где мы
находимся при выполнении команды.</p>
<p>Это позволяет нам перейти в каталог <code>shell-lesson-data</code> из
любого места файловой системы (включая каталог
<code>exercise-data</code>). Для помощи в написании абсолютного пути, мы
можем использовать команду <code>pwd</code>, которая возвращает
абсолютный путь до текущего рабочего каталога.</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle/Desktop/shell-lesson-data/exercise-data</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> cd /Users/nelle/Desktop/shell-lesson-data</span></code></pre>
</div>
<p>Выполните команды <code>pwd</code> и <code>ls -F</code>, чтобы
убедиться, что мы находимся в том каталоге, в котором ожидаем.</p>
<div id="ещё-два-полезных-сокращения" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="ещё-два-полезных-сокращения" class="callout-inner">
<h3 class="callout-title">Ещё два полезных сокращения</h3>
<div class="callout-content">
<p>Оболочка интерпретирует символ тильды (<code>~</code>) в начале пути
как “домашний каталог текущего пользователя”. Например, если домашний
каталог Нелли — это <code>/Users/nelle</code>, то <code>~/data</code>
эквивалентно <code>/Users/nelle/data</code>. Это работает только если
тильда стоит в начале пути: <code>here/there/~/elsewhere</code>
<em>не</em> будет интерпретировано как
<code>here/there/Users/nelle/elsewhere</code>.</p>
<p>Еще одной полезной командой является символ тире (<code>-</code>).
<code>cd</code> интерпретирует <code>-</code> как <em>предыдущий
каталог, в котором я был</em>, что удобнее, чем запоминать и вводить
полный путь. Это <em>очень</em> эффективный способ перемещаться
<em>между двумя каталогами</em> — если выполнить <code>cd -</code>
дважды, вы вернетесь в исходный каталог.</p>
<p>Разница между <code>cd ..</code> и <code>cd -</code> заключается в
том, что первая команда перемещает вас <em>вверх</em> (в родительский
каталог), а вторая — <em>назад</em> (в тот каталог, где вы были до
крайнего вызова <code>cd</code>).</p>
<hr>
<p>Попробуйте сами! Сначала перейдите в каталог
<code>~/Desktop/shell-lesson-data</code> (вы, вероятно, уже там).</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/shell-lesson-data</span></code></pre>
</div>
<p>Затем перейдите в каталог <code>exercise-data/creatures</code></p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> cd exercise-data/creatures</span></code></pre>
</div>
<p>Теперь, если вы выполните команду:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> cd <span class="at">-</span></span></code></pre>
</div>
<p>вы вернётесь в каталог <code>~/Desktop/shell-lesson-data</code>.
Выполните <code>cd -</code> снова, и вы вернётесь в
<code>~/Desktop/shell-lesson-data/exercise-data/creatures</code>.</p>
</div>
</div>
</div>
<div id="абсолютные-и-относительные-пути" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="абсолютные-и-относительные-пути" class="callout-inner">
<h3 class="callout-title">Абсолютные и относительные пути</h3>
<div class="callout-content">
<p>Начиная с каталога <code>/Users/nelle/data</code>, какую из следующих
команд могла бы использовать Нелли, чтобы перейти в свой домашний
каталог, который находится по адресу <code>/Users/nelle</code>?</p>
<ol style="list-style-type: decimal">
<li><code>cd .</code></li>
<li><code>cd /</code></li>
<li><code>cd /home/nelle</code></li>
<li><code>cd ../..</code></li>
<li><code>cd ~</code></li>
<li><code>cd home</code></li>
<li><code>cd ~/data/..</code></li>
<li><code>cd</code></li>
<li><code>cd ..</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Нет: <code>.</code> обозначает текущий каталог.</li>
<li>Нет: <code>/</code> обозначает корневой каталог.</li>
<li>Нет: домашний каталог Нелли — это <code>/Users/nelle</code>.</li>
<li>Нет: эта команда поднимет на два уровня вверх, то есть окажемся в
<code>/Users</code>.</li>
<li>Да: <code>~</code> обозначает домашний каталог пользователя, в
данном случае <code>/Users/nelle</code>.</li>
<li>Нет: эта команда попытается перейти в каталог <code>home</code> в
текущем каталоге, если он существует. if it exists.</li>
<li>Да: хоть это и избыточно сложный, но правильный путь.</li>
<li>Да: это сокращение для перехода в домашний каталог
пользователя.</li>
<li>Да: переход на уровень вверх из каталога
<code>/Users/nelle/data</code> перенесёт вас в домашний каталог
Нелли.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="разрешение-относительных-путей" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="разрешение-относительных-путей" class="callout-inner">
<h3 class="callout-title">Разрешение относительных путей</h3>
<div class="callout-content">
<p>Используя диаграмму файловой системы ниже, ответьте: если команда
<code>pwd</code> выводит /<code>Users/thing</code>, что покажет
<code>ls -F ../backup</code>?</p>
<ol style="list-style-type: decimal">
<li><code>../backup: No such file or directory</code></li>
<li><code>2012-12-01 2013-01-08 2013-01-27</code></li>
<li><code>2012-12-01/ 2013-01-08/ 2013-01-27/</code></li>
<li><code>original/ pnas_final/ pnas_sub/</code></li>
</ol>
<figure><img src="fig/filesystem-challenge.svg" alt="Дерево каталогов ниже директории Users, где “/Users” содержит каталоги “backup” и “thing”; “/Users/backup” содержит “original”, “pnas_final” и “pnas_sub”; “/Users/thing” содержит “backup”; а “/Users/thing/backup” содержит “2012-12-01”, “2013-01-08” и “2013-01-27”" class="figure mx-auto d-block"><div class="figcaption">Дерево каталогов ниже директории Users, где
“/Users” содержит каталоги “backup” и “thing”; “/Users/backup” содержит
“original”, “pnas_final” и “pnas_sub”; “/Users/thing” содержит “backup”;
а “/Users/thing/backup” содержит “2012-12-01”, “2013-01-08” и
“2013-01-27”</div>
</figure>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Решение </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Нет: каталог <code>backup</code> существует в
<code>/Users</code>.</li>
<li>Нет: это содержимое каталога <code>Users/thing/backup</code>, но с
<code>..</code> мы запрашиваем уровень выше.</li>
<li>Нет: см. п.2.</li>
<li>Да: <code>../backup/</code> ссылается на
<code>/Users/backup/</code>.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="понимание-вывода-команды-ls" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="понимание-вывода-команды-ls" class="callout-inner">
<h3 class="callout-title">Понимание вывода команды <code>ls</code>
</h3>
<div class="callout-content">
<p>Используя диаграмму файловой системы ниже, ответьте: если команда
<code>pwd</code> выводит <code>/Users/backup</code>, и опция
<code>-r</code> заставляет <code>ls</code> отображать содержимое в
обратном порядке, какая команда приведёт к следующему выводу:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>pnas_sub/ pnas_final/ original/</code></pre>
</div>
<figure><img src="fig/filesystem-challenge.svg" alt="Дерево каталогов ниже директории Users, где “/Users” содержит каталоги “backup” и “thing”; “/Users/backup” содержит “original”, “pnas_final” и “pnas_sub”; “/Users/thing” содержит “backup”; а “/Users/thing/backup” содержит “2012-12-01”, “2013-01-08” и “2013-01-27”" class="figure mx-auto d-block"><div class="figcaption">Дерево каталогов ниже директории Users, где
“/Users” содержит каталоги “backup” и “thing”; “/Users/backup” содержит
“original”, “pnas_final” и “pnas_sub”; “/Users/thing” содержит “backup”;
а “/Users/thing/backup” содержит “2012-12-01”, “2013-01-08” и
“2013-01-27”</div>
</figure><ol style="list-style-type: decimal">
<li><code>ls pwd</code></li>
<li><code>ls -r -F</code></li>
<li><code>ls -r -F /Users/backup</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Решение </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Нет: <code>pwd</code> — это не имя каталога.</li>
<li>Да: ls без каталога, переданного в качестве аргумента выводит файлы
и подкаталоги в текущем каталоге.</li>
<li>Да: команда использует абсолютный путь.</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="общий-синтаксис-команд-оболочки">Общий синтаксис команд оболочки<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%B1%D1%89%D0%B8%D0%B9-%D1%81%D0%B8%D0%BD%D1%82%D0%B0%D0%BA%D1%81%D0%B8%D1%81-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4-%D0%BE%D0%B1%D0%BE%D0%BB%D0%BE%D1%87%D0%BA%D0%B8"></a>
</h2>
<hr class="half-width">
<p>Мы уже познакомились с командами, опциями и аргументами, но полезно
формализовать некоторые термины.</p>
<p>Рассмотрим следующую команду в качестве общего примера, который мы
разберем на составные части:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> /</span></code></pre>
</div>
<figure><img src="fig/shell_command_syntax.svg" alt="Общий синтаксис команды оболочки" class="figure mx-auto d-block"><div class="figcaption">Общий синтаксис команды оболочки</div>
</figure><p><code>ls</code> — это <strong>команда</strong> с
<strong>опцией</strong> <code>-F</code> и <strong>аргументом</strong>
<code>/</code>. Мы уже видели, что опции могут начинаться с одного
дефиса (<code>-</code>), такие опции называются
<strong>короткими</strong>, или с двух дефисов (<code>--</code>), такие
опции называются <strong>длинными</strong>. [Опции] изменяют поведение
команды, а <a href="https://hepoh3.github.io/shell-novice-ru/reference.html#%D0%B0%D1%80%D0%B3%D1%83%D0%BC%D0%B5%D0%BD%D1%82" class="external-link">аргументы</a>
указывают, над чем команда должна работать (например, файлы и каталоги).
Иногда опции и аргументы называют параметрами. Команда может быть
вызвана с несколькими опциями и аргументами, но они не всегда являются
обязательными.</p>
<p>Иногда опции называют <strong>переключателями</strong> или
<strong>флагами</strong>, особенно если опции не принимают аргументов. В
этом уроке мы будем использовать термин <em>опция</em>.</p>
<p>Каждая часть команды разделена пробелами. Если опустить пробел между
<code>ls</code> и <code>-F</code>, оболочка попытается найти команду под
названием <code>ls-F</code>, которой не существует. Кроме того, важно
учитывать регистр. Например, <code>ls -s</code> выводит размер файлов и
каталогов рядом с их именами, тогда как <code>ls -S</code> сортирует
файлы и каталоги по размеру, как показано ниже:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/shell-lesson-data</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-s</span> exercise-data</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>total 28
 4 animal-counts   4 creatures  12 numbers.txt   4 alkanes   4 writing</code></pre>
</div>
<p>Обратите внимание, что размеры, возвращаемые командой
<code>ls -s</code>, указаны в <em>блоках</em>. Эти блоки могут быть
определены по-разному в зависимости от операционной системы, поэтому вы
можете получить результаты, отличные от приведенных в примере.</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-S</span> exercise-data</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>animal-counts  creatures  alkanes  writing  numbers.txt</code></pre>
</div>
<p>Таким образом, команда <code>ls -F /</code> из примера выше выведет
список файлов и каталогов в корневом каталоге <code>/</code>. Пример
возможного вывода для этой команды:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> /</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Applications/         System/
Library/              Users/
Network/              Volumes/</code></pre>
</div>
<div class="section level3">
<h3 id="работа-нелли-организация-файлов">Работа Нелли: Организация файлов<a class="anchor" aria-label="anchor" href="#%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D0%BD%D0%B5%D0%BB%D0%BB%D0%B8-%D0%BE%D1%80%D0%B3%D0%B0%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2"></a>
</h3>
<p>Зная все это о файлах и каталогах, Нелли готова организовать файлы,
которые будут созданы анализатором белков.</p>
<p>Она создает каталог под названием <code>north-pacific-gyre</code>
(чтобы напомнить себе, откуда пришли данные), который будет содержать
файлы данных с машины и ее скрипты для обработки данных.</p>
<p>Каждая из ее физических проб отличается уникальным десятизначным
идентификатором, например ‘NENE01729A’. Этот идентификатор используется
в её журнале для записи местоположения, времени, глубины и других
характеристик образца, поэтому она решает использовать его в названиях
файлов данных. Поскольку выходные данные анализатора являются простым
текстом, тот назовёт свои файлы <code>NENE01729A.txt</code>,
<code>NENE01812A.txt</code> и так далее. Все 1520 файлов будут размещены
в одном каталоге.</p>
<p>Теперь, находясь в своем текущем каталоге
<code>shell-lesson-data</code>, Нелли может увидеть, какие файлы у неё
есть, используя команду:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="ex">$</span> ls north-pacific-gyre/</span></code></pre>
</div>
<p>Эта команда требует много ввода, но Нелли может позволить оболочке
выполнить большую часть работы за неё с помощью <strong>автодополнения
по клавише Tab</strong>. Если она введет:</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="ex">$</span> ls nor</span></code></pre>
</div>
<p>а затем нажмёт <kbd>Tab</kbd> (клавишу табуляции на клавиатуре),
оболочка автоматически завершит имя каталога за неё:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="ex">$</span> ls north-pacific-gyre/</span></code></pre>
</div>
<p>Если нажать <kbd>Tab</kbd> снова, ничего не произойдет, так как
существует несколько вариантов для заполнения. Двойное нажатие
<kbd>Tab</kbd> выведет список всех файлов.</p>
<p>Если после Нелли нажмёт <kbd>G</kbd>, а затем снова <kbd>Tab</kbd>,
оболочка добавит ‘goo’, так как все файлы, начинающиеся с ‘g’, содержат
первые три символа ‘goo’.</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="ex">$</span> ls north-pacific-gyre/goo</span></code></pre>
</div>
<p>Чтобы увидеть все эти файлы, Нелли может снова дважды нажать
<kbd>Tab</kbd>.</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="fu">ls</span> north-pacific-gyre/goo</span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a><span class="ex">goodiff.sh</span>   goostats.sh</span></code></pre>
</div>
<p><strong>Автодополнением по клавише Tab</strong> используется во
многих других инструментах.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Файловая система отвечает за управление информацией на диске.</li>
<li>Информация хранится в файлах, которые размещены в каталогах
(папках).</li>
<li>Каталоги также могут содержать другие каталоги, образуя дерево
каталогов.</li>
<li>
<code>pwd</code> выводит текущий рабочий каталог пользователя.</li>
<li>
<code>ls [path]</code> выводит список конкретного файла или
каталога. <code>ls</code> без аргументов выводит содержимое текущего
рабочего каталога.</li>
<li>
<code>cd [path]</code> изменяет текущий рабочий каталог.</li>
<li>Большинство команд имеют опции, начинающиеся с одного дефиса
(<code>-</code>).</li>
<li>Имена каталогов в пути разделяются символом <code>/</code> в Unix и
<code>\</code> в Windows.</li>
<li>
<code>/</code> обозначает корневой каталог всей файловой
системы.</li>
<li>Абсолютный путь указывает местоположение, начиная с корневого
каталога файловой системы.</li>
<li>Относительный путь указывает местоположение относительно текущего
рабочего каталога.</li>
<li>
<code>.</code> означает ‘текущий каталог’, <code>..</code> означает
‘каталог уровнем выше’.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-03-create"><p>Content from <a href="03-create.html">Работа с файлами и каталогами</a></p>
<hr>
<p>Last updated on 2024-09-06 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/03-create.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Как я могу создать, скопировать и удалить файлы и каталоги?</li>
<li>Как я могу редактировать файлы?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Создать иерархию каталогов, соответствующую заданной схеме.</li>
<li>Создать файлы в этой иерархии с помощью редактора или путем
копирования и переименования существующих файлов.</li>
<li>Удалить, скопировать и переместить указанные файлы и/или
каталоги.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="создание-каталогов">Создание каталогов<a class="anchor" aria-label="anchor" href="#%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2"></a>
</h2>
<hr class="half-width">
<p>Теперь мы знаем, как исследовать файлы и каталоги, но как их
создать?</p>
<p>В этом разделе мы узнаем, как создавать и перемещать файлы и
каталоги, используя каталог <code>exercise-data/writing</code> в
качестве примера.</p>
<div class="section level3">
<h3 id="шаг-первый-проверим-где-мы-находимся-и-что-у-нас-уже-есть">Шаг первый: проверим, где мы находимся и что у нас уже есть<a class="anchor" aria-label="anchor" href="#%D1%88%D0%B0%D0%B3-%D0%BF%D0%B5%D1%80%D0%B2%D1%8B%D0%B9-%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%B8%D0%BC-%D0%B3%D0%B4%D0%B5-%D0%BC%D1%8B-%D0%BD%D0%B0%D1%85%D0%BE%D0%B4%D0%B8%D0%BC%D1%81%D1%8F-%D0%B8-%D1%87%D1%82%D0%BE-%D1%83-%D0%BD%D0%B0%D1%81-%D1%83%D0%B6%D0%B5-%D0%B5%D1%81%D1%82%D1%8C"></a>
</h3>
<p>Мы всё ещё должны находиться в каталоге
<code>shell-lesson-data</code>, расположенном на рабочем столе, в чём
можно убедиться с помощью:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle/Desktop/shell-lesson-data</code></pre>
</div>
<p>Далее перейдём в каталог <code>exercise-data/writing</code> и
посмотрим, что в нём содержится:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> cd exercise-data/writing/</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>haiku.txt  LittleWomen.txt</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="создание-каталога">Создание каталога<a class="anchor" aria-label="anchor" href="#%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B0"></a>
</h3>
<p>Создадим новый каталог под названием <code>thesis</code>, используя
команду <code>mkdir thesis</code> (которая не выведет никакого
результата):</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> mkdir thesis</span></code></pre>
</div>
<p>Как можно догадаться по названию, <code>mkdir</code> означает
‘<strong>m</strong>a<strong>k</strong>e <strong>dir</strong>ectory
(’создать каталог’). Так как <code>thesis</code> — это относительный
путь (т.е. не имеет ведущего слэша, как в
<code>/what/ever/thesis</code>), новый каталог создаётся в текущем
рабочем каталоге:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>haiku.txt  LittleWomen.txt  thesis/</code></pre>
</div>
<p>Поскольку мы только что создали каталог <code>thesis</code>, в нём
пока ничего нет:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> thesis</span></code></pre>
</div>
<p>Обратите внимание, что <code>mkdir</code> не ограничивается созданием
одного каталога за раз. Опция -p позволяет <code>mkdir</code> создать
каталог с вложенными подкаталогами за одну операцию:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> mkdir <span class="at">-p</span> ../project/data ../project/results</span></code></pre>
</div>
<p>Опция <code>-R</code> для команды <code>ls</code> выведет все
вложенные подкаталоги внутри каталога. Давайте используем команду
<code>ls -FR</code>, чтобы рекурсивно вывести новую иерархию каталогов,
которую мы только что создали в каталоге <code>project</code>:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-FR</span> ../project</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>../project/:
data/  results/

../project/data:

../project/results:</code></pre>
</div>
<div id="два-способа-сделать-одно-и-то-же" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="два-способа-сделать-одно-и-то-же" class="callout-inner">
<h3 class="callout-title">Два способа сделать одно и то же</h3>
<div class="callout-content">
<p>Использование оболочки для создания каталога ничем не отличается от
использования файлового менеджера. Если вы откроете текущий каталог с
помощью графического файлового менеджера вашей операционной системы,
каталог <code>thesis</code> также появится там. Хотя оболочка и файловый
менеджер — это два разных способа взаимодействия с файлами, сами файлы и
каталоги остаются одними и теми же.</p>
</div>
</div>
</div>
<div id="хорошие-имена-для-файлов-и-каталогов" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="хорошие-имена-для-файлов-и-каталогов" class="callout-inner">
<h3 class="callout-title">Хорошие имена для файлов и каталогов</h3>
<div class="callout-content">
<p>Сложные имена файлов и каталогов могут сильно усложнить вашу работу в
командной строке. Вот несколько полезных советов по именованию файлов и
каталогов.</p>
<ol style="list-style-type: decimal">
<li>Не используйте пробелы.</li>
</ol>
<p>Пробелы могут делать имена более понятными, но так как пробелы
используются для разделения аргументов в командной строке, лучше
избегать их в именах файлов и каталогов. Вместо этого можно использовать
<code>-</code> или <code>_</code> (например,
<code>north-pacific-gyre/</code> вместо
<code>north pacific gyre/</code>). Попробуйте ввести
<code>mkdir north pacific gyre</code> и посмотрите, какой каталог (а
точнее, каталоги!) будут созданы, когда вы проверите результат командой
<code>ls -F</code>.</p>
<ol start="2" style="list-style-type: decimal">
<li>Не начинайте имя с дефиса (символа <code>-</code>).</li>
</ol>
<p>Команды интерпретируют имена, начинающиеся с -, как опции
команды.</p>
<ol start="3" style="list-style-type: decimal">
<li>Ограничьтесь использованием букв, цифр и символов <code>.</code>,
<code>-</code> и <code>_</code>.</li>
</ol>
<p>Многие другие символы имеют особые значения в командной строке. Мы
изучим некоторые из них в этом уроке. Существуют специальные символы,
которые могут привести к тому, что ваша команда не сработает так, как
ожидалось, и даже могут вызвать потерю данных.</p>
<p>Если вам нужно обратиться к файлам или каталогам с пробелами или
другими специальными символами в именах, окружите имя в одинарные <a href="https://www.gnu.org/software/bash/manual/html_node/Quoting.html" class="external-link">кавычки</a>
(<code>''</code>).</p>
</div>
</div>
</div>

</div>
<div class="section level3">
<h3 id="создание-текстового-файла">Создание текстового файла<a class="anchor" aria-label="anchor" href="#%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D1%82%D0%B5%D0%BA%D1%81%D1%82%D0%BE%D0%B2%D0%BE%D0%B3%D0%BE-%D1%84%D0%B0%D0%B9%D0%BB%D0%B0"></a>
</h3>
<p>Давайте изменим наш рабочий каталог на <code>thesis</code>, используя
команду <code>cd</code>, а затем запустим текстовый редактор под
названием Nano, чтобы создать файл с именем <code>draft.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> cd thesis</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="ex">$</span> nano draft.txt</span></code></pre>
</div>
<div id="какой-редактор" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="какой-редактор" class="callout-inner">
<h3 class="callout-title">Какой редактор?</h3>
<div class="callout-content">
<p>Когда мы говорим, что nano — это текстовый редактор, мы действительно
имеем в виду именно “текстовый”. Он может работать только с текстовыми
данными, а не с таблицами, изображениями или другими типами медиа. Мы
используем его в примерах, потому что это один из самых простых
текстовых редакторов. Однако из-за этой простоты он может оказаться
недостаточно мощным или гибким для работы, которую вам нужно будет
выполнять после этого урока. На Unix-системах (таких как Linux и macOS)
многие программисты используют <a href="https://www.gnu.org/software/emacs/" class="external-link">Emacs</a> или <a href="https://www.vim.org/" class="external-link">Vim</a> (оба требуют больше времени для
изучения), или графический редактор, такой как <a href="https://projects.gnome.org/gedit/" class="external-link">Gedit</a> или <a href="https://code.visualstudio.com/" class="external-link">VScode</a>. На Windows вы можете
использовать <a href="https://notepad-plus-plus.org/" class="external-link">Notepad++</a>. В
Windows также есть встроенный редактор <code>notepad</code>, который
можно запустить из командной строки так же, как и <code>nano</code>, для
целей этого урока.</p>
<p>Независимо от того, какой редактор вы используете, вам нужно знать,
где он сохраняет файлы. Если вы запускаете его из оболочки, он
(вероятно) будет использовать ваш текущий рабочий каталог в качестве
места по умолчанию. Если вы используете меню “Пуск” на компьютере,
редактор может захотеть сохранить файлы на вашем рабочем столе или в
папке “Документы”. Это можно изменить, перейдя в другой каталог при
первом сохранении файла с помощью команды “Сохранить как…”.</p>
</div>
</div>
</div>
<p>Давайте наберём несколько строк текста.</p>
<figure><img src="fig/nano-screenshot.png" alt="Скриншот работы в текстовом редакторе nano с текстом ‘It’s not publish or perish any more, it’s share and thrive’" class="figure mx-auto d-block"><div class="figcaption">Скриншот работы в текстовом редакторе nano с
текстом ‘It’s not publish or perish any more, it’s share and
thrive’</div>
</figure><p>Когда мы будем довольны нашим текстом, мы можем нажать
<kbd>Ctrl</kbd>+<kbd>O</kbd> (удерживая клавишу <kbd>Ctrl</kbd>, нажмите
клавишу <kbd>O</kbd>), чтобы записать данные на диск. Нам будет
предложено ввести имя файла, в котором будет сохранён текст. Нажмите
<kbd>Return</kbd>, чтобы подтвердить предлагаемое имя
<code>draft.txt</code>.</p>
<p>После того как файл будет сохранён, мы можем использовать
<kbd>Ctrl</kbd>+<kbd>X</kbd>, чтобы выйти из редактора и вернуться в
оболочку.</p>
<div id="клавиша-control-ctrl-или" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="клавиша-control-ctrl-или" class="callout-inner">
<h3 class="callout-title">Клавиша Control (Ctrl или ^)</h3>
<div class="callout-content">
<p>Клавиша Control также называется клавишей ‘Ctrl’. Существует
несколько способов обозначить использование клавиши Control. Например,
вы можете увидеть инструкцию нажать <kbd>Control</kbd>, удерживая ее,
нажать клавишу <kbd>X</kbd>. Это можно обозначить как:</p>
<ul>
<li><code>Control-X</code></li>
<li><code>Control+X</code></li>
<li><code>Ctrl-X</code></li>
<li><code>Ctrl+X</code></li>
<li><code>^X</code></li>
<li><code>C-x</code></li>
</ul>
<p>В nano внизу экрана вы увидите <code>^G Get Help ^O WriteOut</code>.
Это означает, что вы можете использовать <code>Control-G</code> для
получения справки и <code>Control-O</code> для сохранения файла.</p>
</div>
</div>
</div>
<p>После выхода, <code>nano</code> не выводит какие-либо сообщения на
экран, но команда <code>ls</code> теперь покажет, что мы создали файл
под названием <code>draft.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">draft.txt</span></span></code></pre>
</div>
<div id="создание-файлов-другим-способом" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="создание-файлов-другим-способом" class="callout-inner">
<h3 class="callout-title">Создание файлов другим способом</h3>
<div class="callout-content">
<p>Мы уже увидели, как создавать текстовые файлы с помощью редактора
<code>nano</code>. Теперь попробуйте следующую команду:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> touch my_file.txt</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li><p>Что делает команда <code>touch</code>? Появляется ли файл в вашем
текущем каталоге при просмотре через графический файловый
менеджер?</p></li>
<li><p>Используйте <code>ls -l</code>, чтобы исследовать файлы. Какого
размера файл <code>my_file.txt</code>?</p></li>
<li><p>Когда может быть полезно создать файл таким способом?</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Решение </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><p>Команда <code>touch</code> создает новый файл под названием
<code>my_file.txt</code> в вашем текущем каталоге. Вы можете увидеть
этот созданный файл, набрав команду <code>ls</code> в командной строке.
Файл <code>my_file.txt</code> также будет виден в вашем графическом
файловом менеджере.</p></li>
<li><p>Если вы исследуете файл с помощью команды <code>ls -l</code>, то
заметите, что размер файла <code>my_file.txt</code> равен 0 байтам.
Другими словами, он не содержит данных. Если вы откроете файл
<code>my_file.txt</code> в текстовом редакторе, он будет пуст.</p></li>
<li><p>Некоторые программы не создают выходные файлы самостоятельно, а
требуют, чтобы пустые файлы уже были созданы. Когда программа
запускается, она ищет существующий файл, чтобы заполнить его своими
данными. Команда <code>touch</code> позволяет эффективно создавать
пустой текстовый файл, который можно использовать такими
программами.</p></li>
</ol>
</div>
</div>
</div>
</div>
<div id="создание-файлов-другим-способом" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="создание-файлов-другим-способом" class="callout-inner">
<h3 class="callout-title">Создание файлов другим способом<em>
(continued)</em>
</h3>
<div class="callout-content">
<p>Чтобы избежать путаницы в дальнейшем, рекомендуем удалить только что
созданный файл перед продолжением урока, иначе дальнейшие выводы могут
отличаться от приведённых в примере. Для этого используйте следующую
команду:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> rm my_file.txt</span></code></pre>
</div>
</div>
</div>
</div>
<div id="что-в-имени" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="что-в-имени" class="callout-inner">
<h3 class="callout-title">Что в имени?</h3>
<div class="callout-content">
<p>Вы могли заметить, что все файлы Нелли названы по шаблону ‘что-то
точка что-то’, и в этой части урока мы всегда использовали расширение
<code>.txt</code>. Это всего лишь соглашение; мы можем назвать файл
<code>mythesis</code> или как угодно иначе. Однако большинство людей
используют двухсоставные имена, чтобы помочь себе (и своим программам)
различать разные типы файлов. Вторая часть такого имени называется
<strong>расширением файла</strong> и указывает на тип данных, которые
содержит файл: <code>.txt</code> обозначает простой текстовый файл,
<code>.pdf</code> указывает на PDF-документ, <code>.cfg</code> — это
файл конфигурации, полный параметров для какой-либо программы,
<code>.png</code> — это изображение в формате PNG и так далее.</p>
<p>Это всего лишь соглашение, хотя и важное. Файлы содержат только
байты; нам и нашим программам предстоит интерпретировать эти байты в
соответствии с правилами для текстовых файлов, PDF-документов,
конфигурационных файлов, изображений и так далее.</p>
<p>Назвав PNG-изображение кита как <code>whale.mp3</code>, вы не
превратите его в запись звуков китов, хотя это <em>может</em> привести к
тому, что операционная система свяжет файл с музыкальным плеером. В этом
случае, если кто-то дважды щёлкнет на <code>whale.mp3</code> в файловом
менеджере, музыкальный плеер автоматически (и ошибочно) попытается
открыть файл <code>whale.mp3</code>.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="перемещение-файлов-и-каталогов">Перемещение файлов и каталогов<a class="anchor" aria-label="anchor" href="#%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D1%89%D0%B5%D0%BD%D0%B8%D0%B5-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D0%B8-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2"></a>
</h2>
<hr class="half-width">
<p>Возвращаемся в каталог
<code>shell-lesson-data/exercise-data/writing</code>:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/shell-lesson-data/exercise-data/writing</span></code></pre>
</div>
<p>В нашем каталоге <code>thesis</code> есть файл
<code>draft.txt</code>, который не очень информативно назван, поэтому
давайте изменим имя файла с помощью команды <code>mv</code>, которая
сокращённо означает ‘<strong>m</strong>o<strong>v</strong>e’
(переместить):</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> mv thesis/draft.txt thesis/quotes.txt</span></code></pre>
</div>
<p>Первый аргумент указывает <code>mv</code>, что мы перемещаем, а
второй — куда. В данном случае мы перемещаем
<code>thesis/draft.txt</code> в <code>thesis/quotes.txt</code>, что
фактически равносильно переименованию файла. Как и ожидалось, команда
<code>ls</code> показывает, что теперь в каталоге <code>thesis</code>
находится один файл под названием <code>quotes.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> ls thesis</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">quotes.txt</span></span></code></pre>
</div>
<p>Будьте осторожны при указании имени целевого файла, так как команда
<code>mv</code> без лишних слов перезапишет любой существующий файл с
тем же именем, что может привести к потере данных. По умолчанию
<code>mv</code> не запрашивает подтверждения перед перезаписью файлов.
Однако дополнительная опция, <code>mv -i</code> (или
<code>mv --interactive</code>), заставит команду <code>mv</code>
запрашивать такое подтверждение.</p>
<p>Обратите внимание, что команда <code>mv</code> также работает и с
каталогами.</p>
<p>Давайте переместим файл <code>quotes.txt</code> в текущий рабочий
каталог. Мы снова используем команду <code>mv</code>, но на этот раз
укажем только имя каталога в качестве второго аргумента, чтобы сообщить
<code>mv</code>, что мы хотим сохранить имя файла, но поместить файл в
новое место. (Именно поэтому команда называется ‘move’.) В данном случае
каталог, который мы укажем, — это специальный каталог <code>.</code>,
который мы упоминали ранее.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> mv thesis/quotes.txt .</span></code></pre>
</div>
<p>В результате этой команды файл переместится из каталога, в котором он
находился, в текущий рабочий каталог. Теперь команда <code>ls</code>
показывает, что каталог <code>thesis</code> пуст:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> ls thesis</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$</code></pre>
</div>
<p>Кроме того, мы можем убедиться, что файл quotes.txt больше не
находится в каталоге thesis, пытаясь вывести его с помощью
<code>ls</code> в явном виде:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> ls thesis/quotes.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>ls: cannot access 'thesis/quotes.txt': No such file or directory</code></pre>
</div>
<p>Команда <code>ls</code> с указанием имени файла или каталога в
качестве аргумента выводит только запрашиваемый файл или содержимое
каталога. Если файл, указанный в аргументе, не существует, оболочка
вернёт ошибку, как показано выше. Мы можем использовать это, чтобы
убедиться, что файл <code>quotes.txt</code> теперь находится в нашем
текущем каталоге:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="ex">$</span> ls quotes.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">quotes.txt</span></span></code></pre>
</div>
<div id="перемещение-файлов-в-новую-папку" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="перемещение-файлов-в-новую-папку" class="callout-inner">
<h3 class="callout-title">Перемещение файлов в новую папку</h3>
<div class="callout-content">
<p>После выполнения следующих команд Джейми понимает, что она поместила
файлы <code>sucrose.dat</code> и <code>maltose.dat</code> не в ту папку.
Эти файлы должны были быть помещены в папку <code>raw</code>.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a> <span class="ex">analyzed/</span> raw/</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> analyzed</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="ex">fructose.dat</span> glucose.dat maltose.dat sucrose.dat</span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="ex">$</span> cd analyzed</span></code></pre>
</div>
<p>Заполните пропуски, чтобы переместить эти файлы в папку
<code>raw/</code> (ту, куда Джейми забыла их поместить).</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">$</span> mv sucrose.dat maltose.dat ____/____</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Решение </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> mv sucrose.dat maltose.dat ../raw</span></code></pre>
</div>
<p>Напомним, что <code>..</code> ссылается на родительский каталог (т.е.
на один уровень выше текущего каталога), а <code>.</code> ссылается на
текущий каталог.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="копирование-файлов-и-каталогов">Копирование файлов и каталогов<a class="anchor" aria-label="anchor" href="#%D0%BA%D0%BE%D0%BF%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D0%B8-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2"></a>
</h2>
<hr class="half-width">
<p>Команда <code>cp</code> работает так же, как и <code>mv</code>, за
исключением того, что она копирует файл вместо его перемещения. Мы можем
проверить, что она сработала правильно, используя команду
<code>ls</code> с двумя путями в качестве аргументов — как и большинство
команд Unix, <code>ls</code> может принимать несколько путей сразу:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="ex">$</span> cp quotes.txt thesis/quotations.txt</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="ex">$</span> ls quotes.txt thesis/quotations.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>quotes.txt   thesis/quotations.txt</code></pre>
</div>
<p>Мы также можем скопировать каталог со всем его содержимым, используя
опцию <a href="https://ru.wikipedia.org/wiki/%D0%A0%D0%B5%D0%BA%D1%83%D1%80%D1%81%D0%B8%D1%8F" class="external-link">рекурсии</a>
<code>-r</code>, например, для создания резервной копии каталога:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">$</span> cp <span class="at">-r</span> thesis thesis_backup</span></code></pre>
</div>
<p>Мы можем проверить результат, перечислив содержимое обоих каталогов
<code>thesis</code> и <code>thesis_backup</code>:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">$</span> ls thesis thesis_backup</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">thesis</span><span class="op">:</span></span>
<span><span class="va">quotations.txt</span></span>
<span></span>
<span><span class="va">thesis_backup</span><span class="op">:</span></span>
<span><span class="va">quotations.txt</span></span></code></pre>
</div>
<p>Важно включить флаг <code>-r</code>. Если вы хотите скопировать
каталог и не укажете эту опцию, вы увидите сообщение, что каталог
пропущен, потому что <code>-r</code> не указано.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> cp thesis thesis_backup</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="ex">cp:</span> <span class="at">-r</span> not specified<span class="kw">;</span> <span class="ex">omitting</span> directory <span class="st">'thesis'</span></span></code></pre>
</div>
<div id="переименование-файлов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="переименование-файлов" class="callout-inner">
<h3 class="callout-title">Переименование файлов</h3>
<div class="callout-content">
<p>Предположим, вы создали текстовый файл в вашем текущем каталоге,
чтобы содержать список статистических тестов, которые вам нужно будет
провести для анализа данных, и назвали его
<code>statstics.txt</code>.</p>
<p>После создания и сохранения файла вы понимаете, что ошиблись в
названии! Вы хотите исправить ошибку. Какую из следующих команд можно
использовать для этого?</p>
<ol style="list-style-type: decimal">
<li><code>cp statstics.txt statistics.txt</code></li>
<li><code>mv statstics.txt statistics.txt</code></li>
<li><code>mv statstics.txt .</code></li>
<li><code>cp statstics.txt .</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Решение </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Нет. Хотя это создаст файл с правильным именем, файл с неправильным
именем всё ещё останется в каталоге, и его нужно будет удалить.</li>
<li>Да, это сработает для переименования файла.</li>
<li>Нет, точка (<code>.</code>) указывает, куда переместить файл, но не
предоставляет новое имя файла, программа не будет работать, если имя
конечного файла совпадает с исходным.</li>
<li>Нет, точка (<code>.</code>) указывает, куда копировать файл, но не
предоставляет новое имя файла, программа не будет работать, если имя
конечного файла совпадает с исходным.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="перемещение-и-копирование" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="перемещение-и-копирование" class="callout-inner">
<h3 class="callout-title">Перемещение и копирование</h3>
<div class="callout-content">
<p>Каков результат выполнения заключительной команды <code>ls</code> в
приведённой ниже последовательности?</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/jamie/data</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">proteins.dat</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="ex">$</span> mkdir recombined</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="ex">$</span> mv proteins.dat recombined/</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a><span class="ex">$</span> cp recombined/proteins.dat ../proteins-saved.dat</span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li><code>proteins-saved.dat recombined</code></li>
<li><code>recombined</code></li>
<li><code>proteins.dat recombined</code></li>
<li><code>proteins-saved.dat</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Решение </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>Мы начинаем в каталоге <code>/Users/jamie/data</code> и создаём новую
папку под названием <code>recombined</code>. Вторая строка перемещает
(<code>mv</code>) файл <code>proteins.dat</code> в новую папку
(<code>recombined</code>). Третья строка создаёт копию файла, который мы
только что переместили. Сложность здесь заключается в том, куда был
скопирован файл. Напомним, что <code>..</code> означает ‘подняться на
уровень выше’, поэтому скопированный файл теперь находится в
<code>/Users/jamie</code>. Обратите внимание, что <code>..</code>
интерпретируется относительно текущего рабочего каталога, а не
относительно местоположения копируемого файла. Таким образом,
единственное, что покажет <code>ls</code> в каталоге
<code>/Users/jamie/data</code>, — это папка <code>recombined</code>.</p>
<ol style="list-style-type: decimal">
<li>Нет, см. объяснение выше. <code>proteins-saved.dat</code> находится
в <code>/Users/jamie</code>.</li>
<li>Да.</li>
<li>Нет, см. объяснение выше. Файл <code>proteins.dat</code> находится в
<code>/Users/jamie/data/recombined</code>.</li>
<li>Нет, см. объяснение выше. <code>proteins-saved.dat</code> находится
в <code>/Users/jamie</code>.</li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="удаление-файлов-и-каталогов">Удаление файлов и каталогов<a class="anchor" aria-label="anchor" href="#%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D0%B8-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2"></a>
</h2>
<hr class="half-width">
<p>Возвращаемся в каталог
<code>shell-lesson-data/exercise-data/writing</code>. Давайте приведём
этот каталог в порядок, удалив файл <code>quotes.txt</code>, который мы
создали. Команда Unix, которую мы будем использовать для этого, — это
<code>rm</code> (сокращение от
‘<strong>r</strong>e<strong>m</strong>ove’ — удалить):</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> rm quotes.txt</span></code></pre>
</div>
<p>Мы можем проверить, что файл был удалён, с помощью команды ls:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="ex">$</span> ls quotes.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>ls: cannot access 'quotes.txt': No such file or directory</code></pre>
</div>
<div id="удаление-безвозвратно" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="удаление-безвозвратно" class="callout-inner">
<h3 class="callout-title">Удаление безвозвратно</h3>
<div class="callout-content">
<p>В Unix-оболочке нет корзины, из которой можно было бы восстановить
удалённые файлы (хотя большинство графических интерфейсов для Unix её
имеют). Вместо этого, когда мы удаляем файлы, они отвязываются от
файловой системы, чтобы их место на диске можно было перераспределить.
Существуют инструменты для поиска и восстановления удалённых файлов, но
нет никакой гарантии, что они сработают в каждом конкретном случае, так
как компьютер может сразу перераспределить место на диске, где был
файл.</p>
</div>
</div>
</div>
<div id="безопасное-использование-rm" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="безопасное-использование-rm" class="callout-inner">
<h3 class="callout-title">Безопасное использование <code>rm</code>
</h3>
<div class="callout-content">
<p>Что произойдёт, когда мы выполним команду
<code>rm -i thesis_backup/quotations.txt</code>? Зачем может
понадобиться эта защита при использовании <code>rm</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Решение </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>rm: remove regular file 'thesis_backup/quotations.txt'? y</code></pre>
</div>
<p>Опция <code>-i</code> перед каждым удалением запрашивает
подтверждение (используйте <kbd>Y</kbd>, чтобы подтвердить удаление, или
<kbd>N</kbd>, чтобы сохранить файл). Поскольку в Unix-оболочке нет
корзины, все удалённые файлы исчезают навсегда. Используя опцию
<code>-i</code>, у нас есть шанс проверить, удаляем ли мы только те
файлы, которые действительно хотим удалить.</p>
</div>
</div>
</div>
</div>
<p>Если мы попробуем удалить каталог <code>thesis</code> с помощью
команды <code>rm thesis</code>, то получим сообщение об ошибке:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="ex">$</span> rm thesis</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>rm: cannot remove 'thesis': Is a directory</code></pre>
</div>
<p>Это происходит потому, что по умолчанию команда <code>rm</code>
работает только с файлами, а не с каталогами.</p>
<p>Команда <code>rm</code> может удалить каталог <em>вместе со всем его
содержимым</em>, если мы используем опцию рекурсии <code>-r</code>, и
сделает это <em>без запросов подтверждения</em>:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="ex">$</span> rm <span class="at">-r</span> thesis</span></code></pre>
</div>
<p>Учитывая, что в оболочке нет возможности восстановить удалённые
файлы, команду <code>rm -r</code> нужно использовать с большой
осторожностью (можно рассмотреть вариант использования интерактивной
опции <code>rm -r -i</code>).</p>
</section><section><h2 class="section-heading" id="операции-с-несколькими-файлами-и-каталогами">Операции с несколькими файлами и каталогами<a class="anchor" aria-label="anchor" href="#%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8-%D1%81-%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%B8%D0%BC%D0%B8-%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC%D0%B8-%D0%B8-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B0%D0%BC%D0%B8"></a>
</h2>
<hr class="half-width">
<p>Часто возникает необходимость скопировать или переместить сразу
несколько файлов. Это можно сделать, указав список отдельных имён файлов
или задать шаблон с использованием символов подстановки. Подстановочные
символы — это специальные символы, которые можно использовать для
обозначения неизвестных символов или наборов символов при работе с
файловой системой Unix.</p>
<div id="копирование-нескольких-файлов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="копирование-нескольких-файлов" class="callout-inner">
<h3 class="callout-title">Копирование нескольких файлов</h3>
<div class="callout-content">
<p>Для этого упражнения можно протестировать команды в каталоге
<code>shell-lesson-data/exercise-data</code>.</p>
<p>В приведённом ниже примере, что делает команда <code>cp</code>, когда
ей передают несколько имён файлов и имя каталога?</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="ex">$</span> mkdir backup</span>
<span id="cb49-2"><a href="#cb49-2" tabindex="-1"></a><span class="ex">$</span> cp creatures/minotaur.dat creatures/unicorn.dat backup/</span></code></pre>
</div>
<p>В следующем примере, что делает команда <code>cp</code>, когда ей
передают три или более имён файлов?</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="ex">$</span> cd creatures</span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>basilisk.dat  minotaur.dat  unicorn.dat</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="ex">$</span> cp minotaur.dat unicorn.dat basilisk.dat</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Решение </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<p>Если команде <code>cp</code> передаются несколько имён файлов, а
затем имя каталога (т.е. каталог назначения должен быть последним
аргументом), <code>cp</code> копирует файлы в указанный каталог.</p>
<p>Если команде передать три имени файлов, она выдаст ошибку, как
показано ниже, потому что команда ожидает последним аргументом имя
каталога.</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>cp: target 'basilisk.dat' is not a directory</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="использование-подстановочных-символов-для-работы-с-несколькими-файлами-одновременно">Использование подстановочных символов для работы с несколькими
файлами одновременно<a class="anchor" aria-label="anchor" href="#%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BF%D0%BE%D0%B4%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BE%D1%87%D0%BD%D1%8B%D1%85-%D1%81%D0%B8%D0%BC%D0%B2%D0%BE%D0%BB%D0%BE%D0%B2-%D0%B4%D0%BB%D1%8F-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B-%D1%81-%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%B8%D0%BC%D0%B8-%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC%D0%B8-%D0%BE%D0%B4%D0%BD%D0%BE%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE"></a>
</h3>
<div id="подстановочные-символы" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="подстановочные-символы" class="callout-inner">
<h3 class="callout-title">Подстановочные символы</h3>
<div class="callout-content">
<p><code>*</code> — это <strong>подстановочный символ</strong>
(<strong>wildcard</strong>), который представляет <strong>ноль или
более</strong> других символов. Рассмотрим каталог
<code>shell-lesson-data/exercise-data/alkanes</code>: <code>*.pdb</code>
обозначает <code>ethane.pdb</code>, <code>propane.pdb</code> и любой
файл, который оканчивается на <code>.pdb</code>. С другой стороны,
<code>p*.pdb</code> обозначает только <code>pentane.pdb</code> и
<code>propane.pdb</code>, так как символ ‘p’ в начале может представлять
только те имена файлов, которые начинаются с буквы ‘p’.</p>
<p><code>?</code> также является подстановочным символом, но он
обозначает <strong>ровно один</strong> символ. Таким образом,
<code>?ethane.pdb</code> может обозначать <code>methane.pdb</code>, в то
время как <code>*ethane.pdb</code> обозначает и <code>ethane.pdb</code>,
и <code>methane.pdb</code>.</p>
<p>Подстановочные символы могут использоваться в сочетании друг с
другом. Например, <code>???ane.pdb</code> указывает три любых символа,
за которыми следует <code>ane.pdb</code>, что даёт
<code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>octane.pdb</code>.</p>
<p>Когда оболочка видит подстановочный символ, она разворачивает его в
список совпадающих имён файлов до выполнения команды. Исключением
является случай, когда выражение с подстановочными символами не
соответствует ни одному файлу: в этом случае Bash передаёт выражение как
аргумент команды без изменений. Например, если ввести
<code>ls *.pdf</code> в каталоге <code>alkanes</code> (где содержатся
только файлы с именами, оканчивающимися на <code>.pdb</code>), то вы
получите сообщение с ошибкой о том, что файл с именем <code>*.pdf</code>
не найден. Однако обычно команды, такие как <code>wc</code> и
<code>ls</code>, видят списки имён файлов, соответствующих этим
выражениям, но не видят сами подстановочные символы. Разворачивает
подстановочные символы именно оболочка, а не другие программы.</p>
</div>
</div>
</div>
<div id="список-имён-файлов-соответствующих-шаблону" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="список-имён-файлов-соответствующих-шаблону" class="callout-inner">
<h3 class="callout-title">Список имён файлов, соответствующих шаблону</h3>
<div class="callout-content">
<p>Какая команда <code>ls</code>, запущенная в каталоге
<code>alkanes</code>, выведет следующий результат?</p>
<p><code>ethane.pdb   methane.pdb</code></p>
<ol style="list-style-type: decimal">
<li><code>ls *t*ane.pdb</code></li>
<li><code>ls *t?ne.*</code></li>
<li><code>ls *t??ne.pdb</code></li>
<li><code>ls ethane.*</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Решение </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<p>Решением является вариант №3.</p>
<ol style="list-style-type: decimal">
<li><p>Выводит все файлы, имена которых содержат ноль или более символов
(<code>*</code>), за которыми следует буква <code>t</code>, затем ноль
или более символов (<code>*</code>), за которыми следует
<code>ane.pdb</code>. Это даст <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code>,
<code>pentane.pdb</code>.</p></li>
<li><p>Выводит все файлы, имена которых начинаются с нуля или более
символов (<code>*</code>), за которыми следует буква <code>t</code>,
затем один символ (<code>?</code>), затем <code>ne.</code>, за которыми
следуют ноль или более символов (<code>*</code>). Это даст
<code>octane.pdb</code> и <code>pentane.pdb</code>, но не совпадёт с
именами, оканчивающимися на <code>thane.pdb</code>.</p></li>
<li><p>Исправляет проблему варианта 2, совпадая с двумя символами
(<code>??</code>) между <code>t</code> и <code>ne</code>. Это правильное
решение.</p></li>
<li><p>Выводит только файлы, начинающиеся с
<code>ethane.</code>.</p></li>
</ol>
</div>
</div>
</div>
</div>
<div id="ещё-о-подстановочных-символах" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="ещё-о-подстановочных-символах" class="callout-inner">
<h3 class="callout-title">Ещё о подстановочных символах</h3>
<div class="callout-content">
<p>У Сэма есть каталог, содержащий данные калибровки (calibration),
наборы данных (dataset) и описания этих наборов (dataset_overview):</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-calibration.txt</span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset1.txt</span>
<span id="cb54-4"><a href="#cb54-4" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset2.txt</span>
<span id="cb54-5"><a href="#cb54-5" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset_overview.txt</span>
<span id="cb54-6"><a href="#cb54-6" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-calibration.txt</span>
<span id="cb54-7"><a href="#cb54-7" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset1.txt</span>
<span id="cb54-8"><a href="#cb54-8" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset2.txt</span>
<span id="cb54-9"><a href="#cb54-9" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset_overview.txt</span>
<span id="cb54-10"><a href="#cb54-10" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-calibration.txt</span>
<span id="cb54-11"><a href="#cb54-11" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset1.txt</span>
<span id="cb54-12"><a href="#cb54-12" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset2.txt</span>
<span id="cb54-13"><a href="#cb54-13" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset_overview.txt</span>
<span id="cb54-14"><a href="#cb54-14" tabindex="-1"></a><span class="ex">├──</span> backup</span>
<span id="cb54-15"><a href="#cb54-15" tabindex="-1"></a><span class="ex">│  </span> ├── calibration</span>
<span id="cb54-16"><a href="#cb54-16" tabindex="-1"></a><span class="ex">│  </span> └── datasets</span>
<span id="cb54-17"><a href="#cb54-17" tabindex="-1"></a><span class="ex">└──</span> send_to_bob</span>
<span id="cb54-18"><a href="#cb54-18" tabindex="-1"></a>    <span class="ex">├──</span> all_datasets_created_on_a_23rd</span>
<span id="cb54-19"><a href="#cb54-19" tabindex="-1"></a>    <span class="ex">└──</span> all_november_files</span></code></pre>
</div>
<p>Перед тем как отправиться в новую экспедицию, Сэм хочет сделать
резервную копию данных и отправить некоторые наборы данных своему
коллеге Бобу. Сэм использует следующие команды для выполнения
задачи:</p>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>dataset<span class="pp">*</span> backup/datasets</span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a><span class="ex">$</span> cp ____calibration____ backup/calibration</span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a><span class="ex">$</span> cp 2015-____-____ send_to_bob/all_november_files/</span>
<span id="cb55-4"><a href="#cb55-4" tabindex="-1"></a><span class="ex">$</span> cp ____ send_to_bob/all_datasets_created_on_a_23rd/</span></code></pre>
</div>
<p>Помогите Сэму заполнить пропуски.</p>
<p>Окончательная структура каталогов должна выглядеть так:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-calibration.txt</span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset1.txt</span>
<span id="cb56-4"><a href="#cb56-4" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset2.txt</span>
<span id="cb56-5"><a href="#cb56-5" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset_overview.txt</span>
<span id="cb56-6"><a href="#cb56-6" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-calibration.txt</span>
<span id="cb56-7"><a href="#cb56-7" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset1.txt</span>
<span id="cb56-8"><a href="#cb56-8" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset2.txt</span>
<span id="cb56-9"><a href="#cb56-9" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset_overview.txt</span>
<span id="cb56-10"><a href="#cb56-10" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-calibration.txt</span>
<span id="cb56-11"><a href="#cb56-11" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset1.txt</span>
<span id="cb56-12"><a href="#cb56-12" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset2.txt</span>
<span id="cb56-13"><a href="#cb56-13" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset_overview.txt</span>
<span id="cb56-14"><a href="#cb56-14" tabindex="-1"></a><span class="ex">├──</span> backup</span>
<span id="cb56-15"><a href="#cb56-15" tabindex="-1"></a><span class="ex">│  </span> ├── calibration</span>
<span id="cb56-16"><a href="#cb56-16" tabindex="-1"></a><span class="ex">│  </span> │   ├── 2015-10-23-calibration.txt</span>
<span id="cb56-17"><a href="#cb56-17" tabindex="-1"></a><span class="ex">│  </span> │   ├── 2015-10-26-calibration.txt</span>
<span id="cb56-18"><a href="#cb56-18" tabindex="-1"></a><span class="ex">│  </span> │   └── 2015-11-23-calibration.txt</span>
<span id="cb56-19"><a href="#cb56-19" tabindex="-1"></a><span class="ex">│  </span> └── datasets</span>
<span id="cb56-20"><a href="#cb56-20" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-23-dataset1.txt</span>
<span id="cb56-21"><a href="#cb56-21" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-23-dataset2.txt</span>
<span id="cb56-22"><a href="#cb56-22" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-23-dataset_overview.txt</span>
<span id="cb56-23"><a href="#cb56-23" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-26-dataset1.txt</span>
<span id="cb56-24"><a href="#cb56-24" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-26-dataset2.txt</span>
<span id="cb56-25"><a href="#cb56-25" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-26-dataset_overview.txt</span>
<span id="cb56-26"><a href="#cb56-26" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-11-23-dataset1.txt</span>
<span id="cb56-27"><a href="#cb56-27" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-11-23-dataset2.txt</span>
<span id="cb56-28"><a href="#cb56-28" tabindex="-1"></a><span class="ex">│  </span>     └── 2015-11-23-dataset_overview.txt</span>
<span id="cb56-29"><a href="#cb56-29" tabindex="-1"></a><span class="ex">└──</span> send_to_bob</span>
<span id="cb56-30"><a href="#cb56-30" tabindex="-1"></a>    <span class="ex">├──</span> all_datasets_created_on_a_23rd</span>
<span id="cb56-31"><a href="#cb56-31" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-10-23-dataset1.txt</span>
<span id="cb56-32"><a href="#cb56-32" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-10-23-dataset2.txt</span>
<span id="cb56-33"><a href="#cb56-33" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-10-23-dataset_overview.txt</span>
<span id="cb56-34"><a href="#cb56-34" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-11-23-dataset1.txt</span>
<span id="cb56-35"><a href="#cb56-35" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-11-23-dataset2.txt</span>
<span id="cb56-36"><a href="#cb56-36" tabindex="-1"></a>    <span class="ex">│  </span> └── 2015-11-23-dataset_overview.txt</span>
<span id="cb56-37"><a href="#cb56-37" tabindex="-1"></a>    <span class="ex">└──</span> all_november_files</span>
<span id="cb56-38"><a href="#cb56-38" tabindex="-1"></a>        <span class="ex">├──</span> 2015-11-23-calibration.txt</span>
<span id="cb56-39"><a href="#cb56-39" tabindex="-1"></a>        <span class="ex">├──</span> 2015-11-23-dataset1.txt</span>
<span id="cb56-40"><a href="#cb56-40" tabindex="-1"></a>        <span class="ex">├──</span> 2015-11-23-dataset2.txt</span>
<span id="cb56-41"><a href="#cb56-41" tabindex="-1"></a>        <span class="ex">└──</span> 2015-11-23-dataset_overview.txt</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8"> Решение </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" data-bs-parent="#accordionSolution8" aria-labelledby="headingSolution8">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>calibration.txt backup/calibration</span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a><span class="ex">$</span> cp 2015-11-<span class="pp">*</span> send_to_bob/all_november_files/</span>
<span id="cb57-3"><a href="#cb57-3" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>-23-dataset<span class="pp">*</span> send_to_bob/all_datasets_created_on_a_23rd/</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="организация-каталогов-и-файлов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="организация-каталогов-и-файлов" class="callout-inner">
<h3 class="callout-title">Организация каталогов и файлов</h3>
<div class="callout-content">
<p>Джейми работает над проектом и замечает, что её файлы не очень хорошо
организованы:</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>analyzed/  fructose.dat    raw/   sucrose.dat</code></pre>
</div>
<p>Файлы <code>fructose.dat</code> и <code>sucrose.dat</code> содержат
результаты её анализа данных. Какие команды, рассмотренные в этом уроке,
она должна выполнить, чтобы получить следующий результат?</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>analyzed/   raw/</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a><span class="ex">$</span> ls analyzed</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>fructose.dat    sucrose.dat</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution9" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution9" aria-expanded="false" aria-controls="collapseSolution9">
  <h4 class="accordion-header" id="headingSolution9"> Решение </h4>
</button>
<div id="collapseSolution9" class="accordion-collapse collapse" data-bs-parent="#accordionSolution9" aria-labelledby="headingSolution9">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a><span class="fu">mv</span> <span class="pp">*</span>.dat analyzed</span></code></pre>
</div>
<p>Джейми нужно переместить файлы <code>fructose.dat</code> и
<code>sucrose.dat</code> в каталог <code>analyzed</code>. Оболочка
развернёт <code>*.dat</code>, чтобы совпадать со всеми файлами,
заканчивающимися на <code>.dat</code> в текущем каталоге. Затем команда
<code>mv</code> переместит список файлов <code>.dat</code> в каталог
<code>analyzed</code>.</p>
</div>
</div>
</div>
</div>
<div id="воспроизведение-структуры-каталогов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="воспроизведение-структуры-каталогов" class="callout-inner">
<h3 class="callout-title">Воспроизведение структуры каталогов</h3>
<div class="callout-content">
<p>Вы начинаете новый эксперимент и хотите дублировать структуру
каталогов из предыдущего эксперимента, чтобы добавить новые данные.</p>
<p>Предположим, что предыдущий эксперимент находится в каталоге
<code>2016-05-18</code>, который содержит папку <code>data</code>,
которая, в свою очередь, содержит папки с именами <code>raw</code> и
<code>processed</code>, в которых находятся файлы данных. Цель —
скопировать структуру каталогов из папки <code>2016-05-18</code> в папку
<code>2016-05-20</code>, чтобы ваша окончательная структура каталогов
выглядела так:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2016-05-20/
└── data
   ├── processed
   └── raw</code></pre>
</div>
<p>Какой из следующих наборов команд позволит достичь этой цели? Что
делают остальные команды?</p>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20</span>
<span id="cb66-2"><a href="#cb66-2" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data</span>
<span id="cb66-3"><a href="#cb66-3" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/processed</span>
<span id="cb66-4"><a href="#cb66-4" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/raw</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20</span>
<span id="cb67-2"><a href="#cb67-2" tabindex="-1"></a><span class="ex">$</span> cd 2016-05-20</span>
<span id="cb67-3"><a href="#cb67-3" tabindex="-1"></a><span class="ex">$</span> mkdir data</span>
<span id="cb67-4"><a href="#cb67-4" tabindex="-1"></a><span class="ex">$</span> cd data</span>
<span id="cb67-5"><a href="#cb67-5" tabindex="-1"></a><span class="ex">$</span> mkdir raw processed</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/raw</span>
<span id="cb68-2"><a href="#cb68-2" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/processed</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb69">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb69-1"><a href="#cb69-1" tabindex="-1"></a><span class="ex">$</span> mkdir <span class="at">-p</span> 2016-05-20/data/raw</span>
<span id="cb69-2"><a href="#cb69-2" tabindex="-1"></a><span class="ex">$</span> mkdir <span class="at">-p</span> 2016-05-20/data/processed</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20</span>
<span id="cb70-2"><a href="#cb70-2" tabindex="-1"></a><span class="ex">$</span> cd 2016-05-20</span>
<span id="cb70-3"><a href="#cb70-3" tabindex="-1"></a><span class="ex">$</span> mkdir data</span>
<span id="cb70-4"><a href="#cb70-4" tabindex="-1"></a><span class="ex">$</span> mkdir raw processed</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution10" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution10" aria-expanded="false" aria-controls="collapseSolution10">
  <h4 class="accordion-header" id="headingSolution10"> Решение </h4>
</button>
<div id="collapseSolution10" class="accordion-collapse collapse" data-bs-parent="#accordionSolution10" aria-labelledby="headingSolution10">
<div class="accordion-body">
<p>Первые два набора команд достигают цели.</p>
<p>Третий набор команд вызовет ошибку, так как по умолчанию команда
<code>mkdir</code> не создаёт подкаталоги в несуществующем каталоге:
сначала должны быть созданы промежуточные уровни каталогов.</p>
<p>Четвёртый набор команд достигает цели. Напомним, что опция
<code>-p</code>, за которой следует путь из одного или нескольких
каталогов, заставляет <code>mkdir</code> создавать все необходимые
промежуточные подкаталоги.</p>
<p>Последний набор команд создаст каталоги <code>raw</code> и
<code>processed</code> на том же уровне, что и каталог
<code>data</code>.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>cp [старое] [новое]</code> копирует файл.</li>
<li>
<code>mkdir [путь]</code> создаёт новый каталог.</li>
<li>
<code>mv [старое] [новое]</code> перемещает (переименовывает) файл
или каталог.</li>
<li>
<code>rm [путь]</code> удаляет (удаляет) файл.</li>
<li>
<code>*</code> соответствует <strong>нулю или более</strong>
символам в имени файла, например <code>*.txt</code> соответствует всем
файлам, заканчивающимся на <code>.txt</code>.</li>
<li>ё соответствует любому <strong>одному</strong> символу в имени
файла, например <code>?.txt</code> соответствует <code>a.txt</code>, но
не <code>any.txt</code>.</li>
<li>Использование клавиши Control может быть описано разными способами,
включая <code>Ctrl-X</code>, <code>Control-X</code> и
<code>^X</code>.</li>
<li>В оболочке нет корзины: если что-то удалено, оно действительно
исчезло навсегда.</li>
<li>Большинство имён файлов имеют формат <code>что-то.расширение</code>.
Расширение не обязательно, и оно не гарантирует ничего, но обычно
используется для указания типа данных в файле.</li>
<li>В зависимости от типа вашей работы вам может понадобиться более
мощный текстовый редактор, чем Nano.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-04-pipefilter"><p>Content from <a href="04-pipefilter.html">Pipes and Filters</a></p>
<hr>
<p>Last updated on 2024-09-06 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/04-pipefilter.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I combine existing commands to produce a desired
output?</li>
<li>How can I show only part of the output?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain the advantage of linking commands with pipes and
filters.</li>
<li>Combine sequences of commands to get new output</li>
<li>Redirect a command’s output to a file.</li>
<li>Explain what usually happens if a program or pipeline isn’t given
any input to process.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Now that we know a few basic commands, we can finally look at the
shell’s most powerful feature: the ease with which it lets us combine
existing programs in new ways. We’ll start with the directory
<code>shell-lesson-data/exercise-data/alkanes</code> that contains six
files describing some simple organic molecules. The <code>.pdb</code>
extension indicates that these files are in Protein Data Bank format, a
simple text format that specifies the type and position of each atom in
the molecule.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb    methane.pdb    pentane.pdb
ethane.pdb    octane.pdb     propane.pdb</code></pre>
</div>
<p>Let’s run an example command:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> wc cubane.pdb</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>20  156 1158 cubane.pdb</code></pre>
</div>
<p><code>wc</code> is the ‘word count’ command: it counts the number of
lines, words, and characters in files (returning the values in that
order from left to right).</p>
<p>If we run the command <code>wc *.pdb</code>, the <code>*</code> in
<code>*.pdb</code> matches zero or more characters, so the shell turns
<code>*.pdb</code> into a list of all <code>.pdb</code> files in the
current directory:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="pp">*</span>.pdb</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  20  156  1158  cubane.pdb
  12  84   622   ethane.pdb
   9  57   422   methane.pdb
  30  246  1828  octane.pdb
  21  165  1226  pentane.pdb
  15  111  825   propane.pdb
 107  819  6081  total</code></pre>
</div>
<p>Note that <code>wc *.pdb</code> also shows the total number of all
lines in the last line of the output.</p>
<p>If we run <code>wc -l</code> instead of just <code>wc</code>, the
output shows only the number of lines per file:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  20  cubane.pdb
  12  ethane.pdb
   9  methane.pdb
  30  octane.pdb
  21  pentane.pdb
  15  propane.pdb
 107  total</code></pre>
</div>
<p>The <code>-m</code> and <code>-w</code> options can also be used with
the <code>wc</code> command to show only the number of characters or the
number of words, respectively.</p>
<div id="why-isnt-it-doing-anything" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="why-isnt-it-doing-anything" class="callout-inner">
<h3 class="callout-title">Why Isn’t It Doing Anything?</h3>
<div class="callout-content">
<p>What happens if a command is supposed to process a file, but we don’t
give it a filename? For example, what if we type:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span></span></code></pre>
</div>
<p>but don’t type <code>*.pdb</code> (or anything else) after the
command? Since it doesn’t have any filenames, <code>wc</code> assumes it
is supposed to process input given at the command prompt, so it just
sits there and waits for us to give it some data interactively. From the
outside, though, all we see is it sitting there, and the command doesn’t
appear to do anything.</p>
<p>If you make this kind of mistake, you can escape out of this state by
holding down the control key (<kbd>Ctrl</kbd>) and pressing the letter
<kbd>C</kbd> once: <kbd>Ctrl</kbd>+<kbd>C</kbd>. Then release both
keys.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="capturing-output-from-commands">Capturing output from commands<a class="anchor" aria-label="anchor" href="#capturing-output-from-commands"></a>
</h2>
<hr class="half-width">
<p>Which of these files contains the fewest lines? It’s an easy question
to answer when there are only six files, but what if there were 6000?
Our first step toward a solution is to run the command:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="op">&gt;</span> lengths.txt</span></code></pre>
</div>
<p>The greater than symbol, <code>&gt;</code>, tells the shell to
<strong>redirect</strong> the command’s output to a file instead of
printing it to the screen. This command prints no screen output, because
everything that <code>wc</code> would have printed has gone into the
file <code>lengths.txt</code> instead. If the file doesn’t exist prior
to issuing the command, the shell will create the file. If the file
exists already, it will be silently overwritten, which may lead to data
loss. Thus, <strong>redirect</strong> commands require caution.</p>
<p><code>ls lengths.txt</code> confirms that the file exists:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> ls lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">lengths.txt</span></span></code></pre>
</div>
<p>We can now send the content of <code>lengths.txt</code> to the screen
using <code>cat lengths.txt</code>. The <code>cat</code> command gets
its name from ‘concatenate’ i.e. join together, and it prints the
contents of files one after another. There’s only one file in this case,
so <code>cat</code> just shows us what it contains:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> cat lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  20  cubane.pdb
  12  ethane.pdb
   9  methane.pdb
  30  octane.pdb
  21  pentane.pdb
  15  propane.pdb
 107  total</code></pre>
</div>
<div id="output-page-by-page" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="output-page-by-page" class="callout-inner">
<h3 class="callout-title">Output Page by Page</h3>
<div class="callout-content">
<p>We’ll continue to use <code>cat</code> in this lesson, for
convenience and consistency, but it has the disadvantage that it always
dumps the whole file onto your screen. More useful in practice is the
command <code>less</code> (e.g. <code>less lengths.txt</code>). This
displays a screenful of the file, and then stops. You can go forward one
screenful by pressing the spacebar, or back one by pressing
<code>b</code>. Press <code>q</code> to quit.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="filtering-output">Filtering output<a class="anchor" aria-label="anchor" href="#filtering-output"></a>
</h2>
<hr class="half-width">
<p>Next we’ll use the <code>sort</code> command to sort the contents of
the <code>lengths.txt</code> file. But first we’ll do an exercise to
learn a little about the sort command:</p>
<div id="what-does-sort--n-do" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="what-does-sort--n-do" class="callout-inner">
<h3 class="callout-title">What Does <code>sort -n</code> Do?</h3>
<div class="callout-content">
<p>The file <code>shell-lesson-data/exercise-data/numbers.txt</code>
contains the following lines:</p>
<pre class="source"><code><span><span class="fl">10</span></span>
<span><span class="fl">2</span></span>
<span><span class="fl">19</span></span>
<span><span class="fl">22</span></span>
<span><span class="fl">6</span></span></code></pre>
<p>If we run <code>sort</code> on this file, the output is:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">10</span></span>
<span><span class="fl">19</span></span>
<span><span class="fl">2</span></span>
<span><span class="fl">22</span></span>
<span><span class="fl">6</span></span></code></pre>
</div>
<p>If we run <code>sort -n</code> on the same file, we get this
instead:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">2</span></span>
<span><span class="fl">6</span></span>
<span><span class="fl">10</span></span>
<span><span class="fl">19</span></span>
<span><span class="fl">22</span></span></code></pre>
</div>
<p>Explain why <code>-n</code> has this effect.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The <code>-n</code> option specifies a numerical rather than an
alphanumerical sort.</p>
</div>
</div>
</div>
</div>
<p>We will also use the <code>-n</code> option to specify that the sort
is numerical instead of alphanumerical. This does <em>not</em> change
the file; instead, it sends the sorted result to the screen:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  9  methane.pdb
 12  ethane.pdb
 15  propane.pdb
 20  cubane.pdb
 21  pentane.pdb
 30  octane.pdb
107  total</code></pre>
</div>
<p>We can put the sorted list of lines in another temporary file called
<code>sorted-lengths.txt</code> by putting
<code>&gt; sorted-lengths.txt</code> after the command, just as we used
<code>&gt; lengths.txt</code> to put the output of <code>wc</code> into
<code>lengths.txt</code>. Once we’ve done that, we can run another
command called <code>head</code> to get the first few lines in
<code>sorted-lengths.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lengths.txt <span class="op">&gt;</span> sorted-lengths.txt</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 1 sorted-lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  9  methane.pdb</code></pre>
</div>
<p>Using <code>-n 1</code> with <code>head</code> tells it that we only
want the first line of the file; <code>-n 20</code> would get the first
20, and so on. Since <code>sorted-lengths.txt</code> contains the
lengths of our files ordered from least to greatest, the output of
<code>head</code> must be the file with the fewest lines.</p>
<div id="redirecting-to-the-same-file" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="redirecting-to-the-same-file" class="callout-inner">
<h3 class="callout-title">Redirecting to the same file</h3>
<div class="callout-content">
<p>It’s a very bad idea to try redirecting the output of a command that
operates on a file to the same file. For example:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lengths.txt <span class="op">&gt;</span> lengths.txt</span></code></pre>
</div>
<p>Doing something like this may give you incorrect results and/or
delete the contents of <code>lengths.txt</code>.</p>
</div>
</div>
</div>
<div id="what-does-mean" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="what-does-mean" class="callout-inner">
<h3 class="callout-title">What Does <code>&gt;&gt;</code> Mean?</h3>
<div class="callout-content">
<p>We have seen the use of <code>&gt;</code>, but there is a similar
operator <code>&gt;&gt;</code> which works slightly differently. We’ll
learn about the differences between these two operators by printing some
strings. We can use the <code>echo</code> command to print strings
e.g.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> echo The echo command prints text</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The echo command prints text</code></pre>
</div>
<p>Now test the commands below to reveal the difference between the two
operators:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> echo hello <span class="op">&gt;</span> testfile01.txt</span></code></pre>
</div>
<p>and:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="ex">$</span> echo hello <span class="op">&gt;&gt;</span> testfile02.txt</span></code></pre>
</div>
<p>Hint: Try executing each command twice in a row and then examining
the output files.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>In the first example with <code>&gt;</code>, the string ‘hello’ is
written to <code>testfile01.txt</code>, but the file gets overwritten
each time we run the command.</p>
<p>We see from the second example that the <code>&gt;&gt;</code>
operator also writes ‘hello’ to a file (in this case
<code>testfile02.txt</code>), but appends the string to the file if it
already exists (i.e. when we run it for the second time).</p>
</div>
</div>
</div>
</div>
<div id="appending-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="appending-data" class="callout-inner">
<h3 class="callout-title">Appending Data</h3>
<div class="callout-content">
<p>We have already met the <code>head</code> command, which prints lines
from the start of a file. <code>tail</code> is similar, but prints lines
from the end of a file instead.</p>
<p>Consider the file
<code>shell-lesson-data/exercise-data/animal-counts/animals.csv</code>.
After these commands, select the answer that corresponds to the file
<code>animals-subset.csv</code>:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 3 animals.csv <span class="op">&gt;</span> animals-subset.csv</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="ex">$</span> tail <span class="at">-n</span> 2 animals.csv <span class="op">&gt;&gt;</span> animals-subset.csv</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>The first three lines of <code>animals.csv</code>
</li>
<li>The last two lines of <code>animals.csv</code>
</li>
<li>The first three lines and the last two lines of
<code>animals.csv</code>
</li>
<li>The second and third lines of <code>animals.csv</code>
</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Option 3 is correct. For option 1 to be correct we would only run the
<code>head</code> command. For option 2 to be correct we would only run
the <code>tail</code> command. For option 4 to be correct we would have
to pipe the output of <code>head</code> into <code>tail -n 2</code> by
doing
<code>head -n 3 animals.csv | tail -n 2 &gt; animals-subset.csv</code></p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="passing-output-to-another-command">Passing output to another command<a class="anchor" aria-label="anchor" href="#passing-output-to-another-command"></a>
</h2>
<hr class="half-width">
<p>In our example of finding the file with the fewest lines, we are
using two intermediate files <code>lengths.txt</code> and
<code>sorted-lengths.txt</code> to store output. This is a confusing way
to work because even once you understand what <code>wc</code>,
<code>sort</code>, and <code>head</code> do, those intermediate files
make it hard to follow what’s going on. We can make it easier to
understand by running <code>sort</code> and <code>head</code>
together:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lengths.txt <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  9  methane.pdb</code></pre>
</div>
<p>The vertical bar, <code>|</code>, between the two commands is called
a <strong>pipe</strong>. It tells the shell that we want to use the
output of the command on the left as the input to the command on the
right.</p>
<p>This has removed the need for the <code>sorted-lengths.txt</code>
file.</p>
</section><section><h2 class="section-heading" id="combining-multiple-commands">Combining multiple commands<a class="anchor" aria-label="anchor" href="#combining-multiple-commands"></a>
</h2>
<hr class="half-width">
<p>Nothing prevents us from chaining pipes consecutively. We can for
example send the output of <code>wc</code> directly to
<code>sort</code>, and then send the resulting output to
<code>head</code>. This removes the need for any intermediate files.</p>
<p>We’ll start by using a pipe to send the output of <code>wc</code> to
<code>sort</code>:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   9 methane.pdb
  12 ethane.pdb
  15 propane.pdb
  20 cubane.pdb
  21 pentane.pdb
  30 octane.pdb
 107 total</code></pre>
</div>
<p>We can then send that output through another pipe, to
<code>head</code>, so that the full pipeline becomes:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   9  methane.pdb</code></pre>
</div>
<p>This is exactly like a mathematician nesting functions like
<em>log(3x)</em> and saying ‘the log of three times <em>x</em>’. In our
case, the algorithm is ‘head of sort of line count of
<code>*.pdb</code>’.</p>
<p>The redirection and pipes used in the last few commands are
illustrated below:</p>
<figure><img src="fig/redirects-and-pipes.svg" alt='Redirects and Pipes of different commands: "wc -l *.pdb" will direct theoutput to the shell. "wc -l *.pdb &gt; lengths" will direct output to the file"lengths". "wc -l *.pdb | sort -n | head -n 1" will build a pipeline where theoutput of the "wc" command is the input to the "sort" command, the output ofthe "sort" command is the input to the "head" command and the output of the"head" command is directed to the shell' class="figure mx-auto d-block"></figure><div id="piping-commands-together" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="piping-commands-together" class="callout-inner">
<h3 class="callout-title">Piping Commands Together</h3>
<div class="callout-content">
<p>In our current directory, we want to find the 3 files which have the
least number of lines. Which command listed below would work?</p>
<ol style="list-style-type: decimal">
<li><code>wc -l * &gt; sort -n &gt; head -n 3</code></li>
<li><code>wc -l * | sort -n | head -n 1-3</code></li>
<li><code>wc -l * | head -n 3 | sort -n</code></li>
<li><code>wc -l * | sort -n | head -n 3</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Option 4 is the solution. The pipe character <code>|</code> is used
to connect the output from one command to the input of another.
<code>&gt;</code> is used to redirect standard output to a file. Try it
in the <code>shell-lesson-data/exercise-data/alkanes</code>
directory!</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="tools-designed-to-work-together">Tools designed to work together<a class="anchor" aria-label="anchor" href="#tools-designed-to-work-together"></a>
</h2>
<hr class="half-width">
<p>This idea of linking programs together is why Unix has been so
successful. Instead of creating enormous programs that try to do many
different things, Unix programmers focus on creating lots of simple
tools that each do one job well, and that work well with each other.
This programming model is called ‘pipes and filters’. We’ve already seen
pipes; a <strong>filter</strong> is a program like <code>wc</code> or
<code>sort</code> that transforms a stream of input into a stream of
output. Almost all of the standard Unix tools can work this way. Unless
told to do otherwise, they read from standard input, do something with
what they’ve read, and write to standard output.</p>
<p>The key is that any program that reads lines of text from standard
input and writes lines of text to standard output can be combined with
every other program that behaves this way as well. You can <em>and
should</em> write your programs this way so that you and other people
can put those programs into pipes to multiply their power.</p>
<div id="pipe-reading-comprehension" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="pipe-reading-comprehension" class="callout-inner">
<h3 class="callout-title">Pipe Reading Comprehension</h3>
<div class="callout-content">
<p>A file called <code>animals.csv</code> (in the
<code>shell-lesson-data/exercise-data/animal-counts</code> folder)
contains the following data:</p>
<pre class="source"><code>2012-11-05,deer,5
2012-11-05,rabbit,22
2012-11-05,raccoon,7
2012-11-06,rabbit,19
2012-11-06,deer,2
2012-11-06,fox,4
2012-11-07,rabbit,16
2012-11-07,bear,1</code></pre>
<p>What text passes through each of the pipes and the final redirect in
the pipeline below? Note, the <code>sort -r</code> command sorts in
reverse order.</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="ex">$</span> cat animals.csv <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 5 <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 3 <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-r</span> <span class="op">&gt;</span> final.txt</span></code></pre>
</div>
<p>Hint: build the pipeline up one command at a time to test your
understanding</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>The <code>head</code> command extracts the first 5 lines from
<code>animals.csv</code>. Then, the last 3 lines are extracted from the
previous 5 by using the <code>tail</code> command. With the
<code>sort -r</code> command those 3 lines are sorted in reverse order.
Finally, the output is redirected to a file: <code>final.txt</code>. The
content of this file can be checked by executing
<code>cat final.txt</code>. The file should contain the following
lines:</p>
<pre class="source"><code>2012-11-06,rabbit,19
2012-11-06,deer,2
2012-11-05,raccoon,7</code></pre>
</div>
</div>
</div>
</div>
<div id="pipe-construction" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="pipe-construction" class="callout-inner">
<h3 class="callout-title">Pipe Construction</h3>
<div class="callout-content">
<p>For the file <code>animals.csv</code> from the previous exercise,
consider the following command:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span> , <span class="at">-f</span> 2 animals.csv</span></code></pre>
</div>
<p>The <code>cut</code> command is used to remove or ‘cut out’ certain
sections of each line in the file, and <code>cut</code> expects the
lines to be separated into columns by a <kbd>Tab</kbd> character. A
character used in this way is called a <strong>delimiter</strong>. In
the example above we use the <code>-d</code> option to specify the comma
as our delimiter character. We have also used the <code>-f</code> option
to specify that we want to extract the second field (column). This gives
the following output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">deer</span></span>
<span><span class="va">rabbit</span></span>
<span><span class="va">raccoon</span></span>
<span><span class="va">rabbit</span></span>
<span><span class="va">deer</span></span>
<span><span class="va">fox</span></span>
<span><span class="va">rabbit</span></span>
<span><span class="va">bear</span></span></code></pre>
</div>
<p>The <code>uniq</code> command filters out adjacent matching lines in
a file. How could you extend this pipeline (using <code>uniq</code> and
another command) to find out what animals the file contains (without any
duplicates in their names)?</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span> , <span class="at">-f</span> 2 animals.csv <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="which-pipe" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="which-pipe" class="callout-inner">
<h3 class="callout-title">Which Pipe?</h3>
<div class="callout-content">
<p>The file <code>animals.csv</code> contains 8 lines of data formatted
as follows:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2012-11-05,deer,5
2012-11-05,rabbit,22
2012-11-05,raccoon,7
2012-11-06,rabbit,19
...</code></pre>
</div>
<p>The <code>uniq</code> command has a <code>-c</code> option which
gives a count of the number of times a line occurs in its input.
Assuming your current directory is
<code>shell-lesson-data/exercise-data/animal-counts</code>, what command
would you use to produce a table that shows the total count of each type
of animal in the file?</p>
<ol style="list-style-type: decimal">
<li><code>sort animals.csv | uniq -c</code></li>
<li><code>sort -t, -k2,2 animals.csv | uniq -c</code></li>
<li><code>cut -d, -f 2 animals.csv | uniq -c</code></li>
<li><code>cut -d, -f 2 animals.csv | sort | uniq -c</code></li>
<li><code>cut -d, -f 2 animals.csv | sort | uniq -c | wc -l</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Show me the solution </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<p>Option 4. is the correct answer. If you have difficulty understanding
why, try running the commands, or sub-sections of the pipelines (make
sure you are in the
<code>shell-lesson-data/exercise-data/animal-counts</code>
directory).</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="nelles-pipeline-checking-files">Nelle’s Pipeline: Checking Files<a class="anchor" aria-label="anchor" href="#nelles-pipeline-checking-files"></a>
</h2>
<hr class="half-width">
<p>Nelle has run her samples through the assay machines and created 17
files in the <code>north-pacific-gyre</code> directory described
earlier. As a quick check, starting from the
<code>shell-lesson-data</code> directory, Nelle types:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="ex">$</span> cd north-pacific-gyre</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.txt</span></code></pre>
</div>
<p>The output is 18 lines that look like this:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>300 NENE01729A.txt
300 NENE01729B.txt
300 NENE01736A.txt
300 NENE01751A.txt
300 NENE01751B.txt
300 NENE01812A.txt
... ...</code></pre>
</div>
<p>Now she types this:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.txt <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> 240 NENE02018B.txt
 300 NENE01729A.txt
 300 NENE01729B.txt
 300 NENE01736A.txt
 300 NENE01751A.txt</code></pre>
</div>
<p>Whoops: one of the files is 60 lines shorter than the others. When
she goes back and checks it, she sees that she did that assay at 8:00 on
a Monday morning — someone was probably in using the machine on the
weekend, and she forgot to reset it. Before re-running that sample, she
checks to see if any files have too much data:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.txt <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> 300 NENE02040B.txt
 300 NENE02040Z.txt
 300 NENE02043A.txt
 300 NENE02043B.txt
5040 total</code></pre>
</div>
<p>Those numbers look good — but what’s that ‘Z’ doing there in the
third-to-last line? All of her samples should be marked ‘A’ or ‘B’; by
convention, her lab uses ‘Z’ to indicate samples with missing
information. To find others like it, she does this:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="pp">*</span>Z.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>NENE01971Z.txt    NENE02040Z.txt</code></pre>
</div>
<p>Sure enough, when she checks the log on her laptop, there’s no depth
recorded for either of those samples. Since it’s too late to get the
information any other way, she must exclude those two files from her
analysis. She could delete them using <code>rm</code>, but there are
actually some analyses she might do later where depth doesn’t matter, so
instead, she’ll have to be careful later on to select files using the
wildcard expressions <code>NENE*A.txt NENE*B.txt</code>.</p>
<div id="removing-unneeded-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="removing-unneeded-files" class="callout-inner">
<h3 class="callout-title">Removing Unneeded Files</h3>
<div class="callout-content">
<p>Suppose you want to delete your processed data files, and only keep
your raw files and processing script to save storage. The raw files end
in <code>.dat</code> and the processed files end in <code>.txt</code>.
Which of the following would remove all the processed data files, and
<em>only</em> the processed data files?</p>
<ol style="list-style-type: decimal">
<li><code>rm ?.txt</code></li>
<li><code>rm *.txt</code></li>
<li><code>rm * .txt</code></li>
<li><code>rm *.*</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8"> Show me the solution </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" aria-labelledby="headingSolution8" data-bs-parent="#accordionSolution8">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>This would remove <code>.txt</code> files with one-character
names</li>
<li>This is the correct answer</li>
<li>The shell would expand <code>*</code> to match everything in the
current directory, so the command would try to remove all matched files
and an additional file called <code>.txt</code>
</li>
<li>The shell expands <code>*.*</code> to match all filenames containing
at least one <code>.</code>, including the processed files
(<code>.txt</code>) <em>and</em> raw files (<code>.dat</code>)</li>
</ol>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>wc</code> counts lines, words, and characters in its
inputs.</li>
<li>
<code>cat</code> displays the contents of its inputs.</li>
<li>
<code>sort</code> sorts its inputs.</li>
<li>
<code>head</code> displays the first 10 lines of its input.</li>
<li>
<code>tail</code> displays the last 10 lines of its input.</li>
<li>
<code>command &gt; [file]</code> redirects a command’s output to a
file (overwriting any existing content).</li>
<li>
<code>command &gt;&gt; [file]</code> appends a command’s output to a
file.</li>
<li>
<code>[first] | [second]</code> is a pipeline: the output of the
first command is used as the input to the second.</li>
<li>The best way to use the shell is to use pipes to combine simple
single-purpose programs (filters).</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-05-loop"><p>Content from <a href="05-loop.html">Loops</a></p>
<hr>
<p>Last updated on 2024-09-06 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/05-loop.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I perform the same actions on many different files?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Write a loop that applies one or more commands separately to each
file in a set of files.</li>
<li>Trace the values taken on by a loop variable during execution of the
loop.</li>
<li>Explain the difference between a variable’s name and its value.</li>
<li>Explain why spaces and some punctuation characters shouldn’t be used
in file names.</li>
<li>Demonstrate how to see what commands have recently been
executed.</li>
<li>Re-run recently executed commands without retyping them.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p><strong>Loops</strong> are a programming construct which allow us to
repeat a command or set of commands for each item in a list. As such
they are key to productivity improvements through automation. Similar to
wildcards and tab completion, using loops also reduces the amount of
typing required (and hence reduces the number of typing mistakes).</p>
<p>Suppose we have several hundred genome data files named
<code>basilisk.dat</code>, <code>minotaur.dat</code>, and
<code>unicorn.dat</code>. For this example, we’ll use the
<code>exercise-data/creatures</code> directory which only has three
example files, but the principles can be applied to many many more files
at once.</p>
<p>The structure of these files is the same: the common name,
classification, and updated date are presented on the first three lines,
with DNA sequences on the following lines. Let’s look at the files:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 5 basilisk.dat minotaur.dat unicorn.dat</span></code></pre>
</div>
<p>We would like to print out the classification for each species, which
is given on the second line of each file. For each file, we would need
to execute the command <code>head -n 2</code> and pipe this to
<code>tail -n 1</code>. We’ll use a loop to solve this problem, but
first let’s look at the general form of a loop, using the pseudo-code
below:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># The word "for" indicates the start of a "For-loop" command</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="cf">for</span> thing <span class="kw">in</span> list_of_things </span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co">#The word "do" indicates the start of job execution list</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="cf">do</span> </span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    <span class="co"># Indentation within the loop is not required, but aids legibility</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    <span class="ex">operation_using/command</span> <span class="va">$thing</span> </span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co"># The word "done" indicates the end of a loop</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="cf">done</span>  </span></code></pre>
</div>
<p>and we can apply this to our example like this:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> for filename in basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$filename</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 2 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>basilisk.dat
CLASSIFICATION: basiliscus vulgaris
minotaur.dat
CLASSIFICATION: bos hominus
unicorn.dat
CLASSIFICATION: equus monoceros</code></pre>
</div>
<div id="follow-the-prompt" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="follow-the-prompt" class="callout-inner">
<h3 class="callout-title">Follow the Prompt</h3>
<div class="callout-content">
<p>The shell prompt changes from <code>$</code> to <code>&gt;</code> and
back again as we were typing in our loop. The second prompt,
<code>&gt;</code>, is different to remind us that we haven’t finished
typing a complete command yet. A semicolon, <code>;</code>, can be used
to separate two commands written on a single line.</p>
</div>
</div>
</div>
<p>When the shell sees the keyword <code>for</code>, it knows to repeat
a command (or group of commands) once for each item in a list. Each time
the loop runs (called an iteration), an item in the list is assigned in
sequence to the <strong>variable</strong>, and the commands inside the
loop are executed, before moving on to the next item in the list. Inside
the loop, we call for the variable’s value by putting <code>$</code> in
front of it. The <code>$</code> tells the shell interpreter to treat the
variable as a variable name and substitute its value in its place,
rather than treat it as text or an external command.</p>
<p>In this example, the list is three filenames:
<code>basilisk.dat</code>, <code>minotaur.dat</code>, and
<code>unicorn.dat</code>. Each time the loop iterates, we first use
<code>echo</code> to print the value that the variable
<code>$filename</code> currently holds. This is not necessary for the
result, but beneficial for us here to have an easier time to follow
along. Next, we will run the <code>head</code> command on the file
currently referred to by <code>$filename</code>. The first time through
the loop, <code>$filename</code> is <code>basilisk.dat</code>. The
interpreter runs the command <code>head</code> on
<code>basilisk.dat</code> and pipes the first two lines to the
<code>tail</code> command, which then prints the second line of
<code>basilisk.dat</code>. For the second iteration,
<code>$filename</code> becomes <code>minotaur.dat</code>. This time, the
shell runs <code>head</code> on <code>minotaur.dat</code> and pipes the
first two lines to the <code>tail</code> command, which then prints the
second line of <code>minotaur.dat</code>. For the third iteration,
<code>$filename</code> becomes <code>unicorn.dat</code>, so the shell
runs the <code>head</code> command on that file, and <code>tail</code>
on the output of that. Since the list was only three items, the shell
exits the <code>for</code> loop.</p>
<div id="same-symbols-different-meanings" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="same-symbols-different-meanings" class="callout-inner">
<h3 class="callout-title">Same Symbols, Different Meanings</h3>
<div class="callout-content">
<p>Here we see <code>&gt;</code> being used as a shell prompt, whereas
<code>&gt;</code> is also used to redirect output. Similarly,
<code>$</code> is used as a shell prompt, but, as we saw earlier, it is
also used to ask the shell to get the value of a variable.</p>
<p>If the <em>shell</em> prints <code>&gt;</code> or <code>$</code> then
it expects you to type something, and the symbol is a prompt.</p>
<p>If <em>you</em> type <code>&gt;</code> or <code>$</code> yourself, it
is an instruction from you that the shell should redirect output or get
the value of a variable.</p>
</div>
</div>
</div>
<p>When using variables it is also possible to put the names into curly
braces to clearly delimit the variable name: <code>$filename</code> is
equivalent to <code>${filename}</code>, but is different from
<code>${file}name</code>. You may find this notation in other people’s
programs.</p>
<p>We have called the variable in this loop <code>filename</code> in
order to make its purpose clearer to human readers. The shell itself
doesn’t care what the variable is called; if we wrote this loop as:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> for x in basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 2 <span class="va">$x</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>or:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> for temperature in basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 2 <span class="va">$temperature</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>it would work exactly the same way. <em>Don’t do this.</em> Programs
are only useful if people can understand them, so meaningless names
(like <code>x</code>) or misleading names (like
<code>temperature</code>) increase the odds that the program won’t do
what its readers think it does.</p>
<p>In the above examples, the variables (<code>thing</code>,
<code>filename</code>, <code>x</code> and <code>temperature</code>)
could have been given any other name, as long as it is meaningful to
both the person writing the code and the person reading it.</p>
<p>Note also that loops can be used for other things than filenames,
like a list of numbers or a subset of data.</p>
<div id="write-your-own-loop" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="write-your-own-loop" class="callout-inner">
<h3 class="callout-title">Write your own loop</h3>
<div class="callout-content">
<p>How would you write a loop that echoes all 10 numbers from 0 to
9?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> for loop_variable in 0 1 2 3 4 5 6 7 8 9</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$loop_variable</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">0</span></span>
<span><span class="fl">1</span></span>
<span><span class="fl">2</span></span>
<span><span class="fl">3</span></span>
<span><span class="fl">4</span></span>
<span><span class="fl">5</span></span>
<span><span class="fl">6</span></span>
<span><span class="fl">7</span></span>
<span><span class="fl">8</span></span>
<span><span class="fl">9</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="variables-in-loops" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="variables-in-loops" class="callout-inner">
<h3 class="callout-title">Variables in Loops</h3>
<div class="callout-content">
<p>This exercise refers to the
<code>shell-lesson-data/exercise-data/alkanes</code> directory.
<code>ls *.pdb</code> gives the following output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</code></pre>
</div>
<p>What is the output of the following code?</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="ex">*.pdb</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Now, what is the output of the following code?</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$datafile</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Why do these two loops give different outputs?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>The first code block gives the same output on each iteration through
the loop. Bash expands the wildcard <code>*.pdb</code> within the loop
body (as well as before the loop starts) to match all files ending in
<code>.pdb</code> and then lists them using <code>ls</code>. The
expanded loop would look like this:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> for datafile in cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="ex">cubane.pdb</span>  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</code></pre>
</div>
<p>The second code block lists a different file on each loop iteration.
The value of the <code>datafile</code> variable is evaluated using
<code>$datafile</code>, and then listed using <code>ls</code>.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">cubane.pdb</span></span>
<span><span class="va">ethane.pdb</span></span>
<span><span class="va">methane.pdb</span></span>
<span><span class="va">octane.pdb</span></span>
<span><span class="va">pentane.pdb</span></span>
<span><span class="va">propane.pdb</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="limiting-sets-of-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="limiting-sets-of-files" class="callout-inner">
<h3 class="callout-title">Limiting Sets of Files</h3>
<div class="callout-content">
<p>What would be the output of running the following loop in the
<code>shell-lesson-data/exercise-data/alkanes</code> directory?</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> for filename in c<span class="pp">*</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$filename</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>No files are listed.</li>
<li>All files are listed.</li>
<li>Only <code>cubane.pdb</code>, <code>octane.pdb</code> and
<code>pentane.pdb</code> are listed.</li>
<li>Only <code>cubane.pdb</code> is listed.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>4 is the correct answer. <code>*</code> matches zero or more
characters, so any file name starting with the letter c, followed by
zero or more other characters will be matched.</p>
</div>
</div>
</div>
</div>
<div id="limiting-sets-of-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="limiting-sets-of-files" class="callout-inner">
<h3 class="callout-title">Limiting Sets of Files<em>
(continued)</em>
</h3>
<div class="callout-content">
<p>How would the output differ from using this command instead?</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>c<span class="pp">*</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$filename</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>The same files would be listed.</li>
<li>All the files are listed this time.</li>
<li>No files are listed this time.</li>
<li>The files <code>cubane.pdb</code> and <code>octane.pdb</code> will
be listed.</li>
<li>Only the file <code>octane.pdb</code> will be listed.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>4 is the correct answer. <code>*</code> matches zero or more
characters, so a file name with zero or more characters before a letter
c and zero or more characters after the letter c will be matched.</p>
</div>
</div>
</div>
</div>
<div id="saving-to-a-file-in-a-loop---part-one" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="saving-to-a-file-in-a-loop---part-one" class="callout-inner">
<h3 class="callout-title">Saving to a File in a Loop - Part One</h3>
<div class="callout-content">
<p>In the <code>shell-lesson-data/exercise-data/alkanes</code>
directory, what is the effect of this loop?</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="cf">for</span> alkanes <span class="kw">in</span> <span class="pp">*</span>.pdb</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$alkanes</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>    <span class="fu">cat</span> <span class="va">$alkanes</span> <span class="op">&gt;</span> alkanes.pdb</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>Prints <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code>,
<code>pentane.pdb</code> and <code>propane.pdb</code>, and the text from
<code>propane.pdb</code> will be saved to a file called
<code>alkanes.pdb</code>.</li>
<li>Prints <code>cubane.pdb</code>, <code>ethane.pdb</code>, and
<code>methane.pdb</code>, and the text from all three files would be
concatenated and saved to a file called <code>alkanes.pdb</code>.</li>
<li>Prints <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code>, and
<code>pentane.pdb</code>, and the text from <code>propane.pdb</code>
will be saved to a file called <code>alkanes.pdb</code>.</li>
<li>None of the above.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>The text from each file in turn gets written to the
<code>alkanes.pdb</code> file. However, the file gets overwritten on
each loop iteration, so the final content of <code>alkanes.pdb</code> is
the text from the <code>propane.pdb</code> file.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="saving-to-a-file-in-a-loop---part-two" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="saving-to-a-file-in-a-loop---part-two" class="callout-inner">
<h3 class="callout-title">Saving to a File in a Loop - Part Two</h3>
<div class="callout-content">
<p>Also in the <code>shell-lesson-data/exercise-data/alkanes</code>
directory, what would be the output of the following loop?</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> <span class="pp">*</span>.pdb</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>    <span class="fu">cat</span> <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>All of the text from <code>cubane.pdb</code>,
<code>ethane.pdb</code>, <code>methane.pdb</code>,
<code>octane.pdb</code>, and <code>pentane.pdb</code> would be
concatenated and saved to a file called <code>all.pdb</code>.</li>
<li>The text from <code>ethane.pdb</code> will be saved to a file called
<code>all.pdb</code>.</li>
<li>All of the text from <code>cubane.pdb</code>,
<code>ethane.pdb</code>, <code>methane.pdb</code>,
<code>octane.pdb</code>, <code>pentane.pdb</code> and
<code>propane.pdb</code> would be concatenated and saved to a file
called <code>all.pdb</code>.</li>
<li>All of the text from <code>cubane.pdb</code>,
<code>ethane.pdb</code>, <code>methane.pdb</code>,
<code>octane.pdb</code>, <code>pentane.pdb</code> and
<code>propane.pdb</code> would be printed to the screen and saved to a
file called <code>all.pdb</code>.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<p>3 is the correct answer. <code>&gt;&gt;</code> appends to a file,
rather than overwriting it with the redirected output from a command.
Given the output from the <code>cat</code> command has been redirected,
nothing is printed to the screen.</p>
</div>
</div>
</div>
</div>
<p>Let’s continue with our example in the
<code>shell-lesson-data/exercise-data/creatures</code> directory. Here’s
a slightly more complicated loop:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$filename</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 100 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>The shell starts by expanding <code>*.dat</code> to create the list
of files it will process. The <strong>loop body</strong> then executes
two commands for each of those files. The first command,
<code>echo</code>, prints its command-line arguments to standard output.
For example:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> echo hello there</span></code></pre>
</div>
<p>prints:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>hello there</code></pre>
</div>
<p>In this case, since the shell expands <code>$filename</code> to be
the name of a file, <code>echo $filename</code> prints the name of the
file. Note that we can’t write this as:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="op">&gt;</span>     <span class="va">$filename</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 100 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>because then the first time through the loop, when
<code>$filename</code> expanded to <code>basilisk.dat</code>, the shell
would try to run <code>basilisk.dat</code> as a program. Finally, the
<code>head</code> and <code>tail</code> combination selects lines 81-100
from whatever file is being processed (assuming the file has at least
100 lines).</p>
<div id="spaces-in-names" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="spaces-in-names" class="callout-inner">
<h3 class="callout-title">Spaces in Names</h3>
<div class="callout-content">
<p>Spaces are used to separate the elements of the list that we are
going to loop over. If one of those elements contains a space character,
we need to surround it with quotes, and do the same thing to our loop
variable. Suppose our data files are named:</p>
<pre class="source"><code>red dragon.dat
purple unicorn.dat</code></pre>
<p>To loop over these files, we would need to add double quotes like
so:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="st">"red dragon.dat"</span> <span class="st">"purple unicorn.dat"</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 100 <span class="st">"</span><span class="va">$filename</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>It is simpler to avoid using spaces (or other special characters) in
filenames.</p>
<p>The files above don’t exist, so if we run the above code, the
<code>head</code> command will be unable to find them; however, the
error message returned will show the name of the files it is
expecting:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>head: cannot open ‘red dragon.dat' for reading: No such file or directory
head: cannot open ‘purple unicorn.dat' for reading: No such file or directory</code></pre>
</div>
<p>Try removing the quotes around <code>$filename</code> in the loop
above to see the effect of the quote marks on spaces. Note that we get a
result from the loop command for unicorn.dat when we run this code in
the <code>creatures</code> directory:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>head: cannot open ‘red' for reading: No such file or directory
head: cannot open ‘dragon.dat' for reading: No such file or directory
head: cannot open ‘purple' for reading: No such file or directory
CGGTACCGAA
AAGGGTCGCG
CAAGTGTTCC
...</code></pre>
</div>
</div>
</div>
</div>
<p>We would like to modify each of the files in
<code>shell-lesson-data/exercise-data/creatures</code>, but also save a
version of the original files. We want to copy the original files to new
files named <code>original-basilisk.dat</code> and
<code>original-unicorn.dat</code>, for example. We can’t use:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>.dat original-<span class="pp">*</span>.dat</span></code></pre>
</div>
<p>because that would expand to:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> cp basilisk.dat minotaur.dat unicorn.dat original-<span class="pp">*</span>.dat</span></code></pre>
</div>
<p>This wouldn’t back up our files, instead we get an error:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>cp: target `original-*.dat' is not a directory</code></pre>
</div>
<p>This problem arises when <code>cp</code> receives more than two
inputs. When this happens, it expects the last input to be a directory
where it can copy all the files it was passed. Since there is no
directory named <code>original-*.dat</code> in the
<code>creatures</code> directory, we get an error.</p>
<p>Instead, we can use a loop:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a><span class="op">&gt;</span>     cp <span class="va">$filename</span> original-<span class="va">$filename</span></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>This loop runs the <code>cp</code> command once for each filename.
The first time, when <code>$filename</code> expands to
<code>basilisk.dat</code>, the shell executes:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">cp</span> basilisk.dat original-basilisk.dat</span></code></pre>
</div>
<p>The second time, the command is:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">cp</span> minotaur.dat original-minotaur.dat</span></code></pre>
</div>
<p>The third and last time, the command is:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="fu">cp</span> unicorn.dat original-unicorn.dat</span></code></pre>
</div>
<p>Since the <code>cp</code> command does not normally produce any
output, it’s hard to check that the loop is working correctly. However,
we learned earlier how to print strings using <code>echo</code>, and we
can modify the loop to use <code>echo</code> to print our commands
without actually executing them. As such we can check what commands
<em>would be</em> run in the unmodified loop.</p>
<p>The following diagram shows what happens when the modified loop is
executed and demonstrates how the judicious use of <code>echo</code> is
a good debugging technique.</p>
<figure><img src="fig/shell_script_for_loop_flow_chart.svg" alt='The for loop "for filename in .dat; do echo cp $filename original-$filename;done" will successively assign the names of all ".dat" files in your currentdirectory to the variable "$filename" and then execute the command. With thefiles "basilisk.dat", "minotaur.dat" and "unicorn.dat" in the current directorythe loop will successively call the echo command three times and print threelines: "cp basislisk.dat original-basilisk.dat", then "cp minotaur.datoriginal-minotaur.dat" and finally "cp unicorn.datoriginal-unicorn.dat"' class="figure mx-auto d-block"></figure><section><h2 class="section-heading" id="nelles-pipeline-processing-files">Nelle’s Pipeline: Processing Files<a class="anchor" aria-label="anchor" href="#nelles-pipeline-processing-files"></a>
</h2>
<hr class="half-width">
<p>Nelle is now ready to process her data files using
<code>goostats.sh</code> — a shell script written by her supervisor.
This calculates some statistics from a protein sample file and takes two
arguments:</p>
<ol style="list-style-type: decimal">
<li>an input file (containing the raw data)</li>
<li>an output file (to store the calculated statistics)</li>
</ol>
<p>Since she’s still learning how to use the shell, she decides to build
up the required commands in stages. Her first step is to make sure that
she can select the right input files — remember, these are ones whose
names end in ‘A’ or ‘B’, rather than ‘Z’. Moving to the
<code>north-pacific-gyre</code> directory, Nelle types:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">$</span> cd</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="ex">$</span> cd Desktop/shell-lesson-data/north-pacific-gyre</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$datafile</span></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">NENE01729A.txt</span></span>
<span><span class="va">NENE01729B.txt</span></span>
<span><span class="va">NENE01736A.txt</span></span>
<span><span class="va">...</span></span>
<span><span class="va">NENE02043A.txt</span></span>
<span><span class="va">NENE02043B.txt</span></span></code></pre>
</div>
<p>Her next step is to decide what to call the files that the
<code>goostats.sh</code> analysis program will create. Prefixing each
input file’s name with ‘stats’ seems simple, so she modifies her loop to
do that:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>NENE01729A.txt stats-NENE01729A.txt
NENE01729B.txt stats-NENE01729B.txt
NENE01736A.txt stats-NENE01736A.txt
...
NENE02043A.txt stats-NENE02043A.txt
NENE02043B.txt stats-NENE02043B.txt</code></pre>
</div>
<p>She hasn’t actually run <code>goostats.sh</code> yet, but now she’s
sure she can select the right files and generate the right output
filenames.</p>
<p>Typing in commands over and over again is becoming tedious, though,
and Nelle is worried about making mistakes, so instead of re-entering
her loop, she presses <kbd>↑</kbd>. In response, the shell redisplays
the whole loop on one line (using semi-colons to separate the
pieces):</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt<span class="kw">;</span> <span class="cf">do</span> <span class="bu">echo</span> <span class="va">$datafile</span> stats-<span class="va">$datafile</span><span class="kw">;</span> <span class="cf">done</span></span></code></pre>
</div>
<p>Using the <kbd>←</kbd>, Nelle navigates to the <code>echo</code>
command and changes it to <code>bash goostats.sh</code>:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt<span class="kw">;</span> <span class="cf">do</span> <span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span><span class="kw">;</span> <span class="cf">done</span></span></code></pre>
</div>
<p>When she presses <kbd>Enter</kbd>, the shell runs the modified
command. However, nothing appears to happen — there is no output. After
a moment, Nelle realizes that since her script doesn’t print anything to
the screen any longer, she has no idea whether it is running, much less
how quickly. She kills the running command by typing
<kbd>Ctrl</kbd>+<kbd>C</kbd>, uses <kbd>↑</kbd> to repeat the command,
and edits it to read:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt<span class="kw">;</span> <span class="cf">do</span> <span class="bu">echo</span> <span class="va">$datafile</span><span class="kw">;</span></span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span><span class="kw">;</span> <span class="cf">done</span></span></code></pre>
</div>
<div id="beginning-and-end" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="beginning-and-end" class="callout-inner">
<h3 class="callout-title">Beginning and End</h3>
<div class="callout-content">
<p>We can move to the beginning of a line in the shell by typing
<kbd>Ctrl</kbd>+<kbd>A</kbd> and to the end using
<kbd>Ctrl</kbd>+<kbd>E</kbd>.</p>
</div>
</div>
</div>
<p>When she runs her program now, it produces one line of output every
five seconds or so:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">NENE01729A.txt</span></span>
<span><span class="va">NENE01729B.txt</span></span>
<span><span class="va">NENE01736A.txt</span></span>
<span><span class="va">...</span></span></code></pre>
</div>
<p>1518 times 5 seconds, divided by 60, tells her that her script will
take about two hours to run. As a final check, she opens another
terminal window, goes into <code>north-pacific-gyre</code>, and uses
<code>cat stats-NENE01729B.txt</code> to examine one of the output
files. It looks good, so she decides to get some coffee and catch up on
her reading.</p>
<div id="those-who-know-history-can-choose-to-repeat-it" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="those-who-know-history-can-choose-to-repeat-it" class="callout-inner">
<h3 class="callout-title">Those Who Know History Can Choose to Repeat It</h3>
<div class="callout-content">
<p>Another way to repeat previous work is to use the
<code>history</code> command to get a list of the last few hundred
commands that have been executed, and then to use <code>!123</code>
(where ‘123’ is replaced by the command number) to repeat one of those
commands. For example, if Nelle types this:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> history <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>456  for datafile in NENE*A.txt NENE*B.txt; do   echo $datafile stats-$datafile; done
457  for datafile in NENE*A.txt NENE*B.txt; do echo $datafile stats-$datafile; done
458  for datafile in NENE*A.txt NENE*B.txt; do bash goostats.sh $datafile stats-$datafile; done
459  for datafile in NENE*A.txt NENE*B.txt; do echo $datafile; bash goostats.sh $datafile
stats-$datafile; done
460  history | tail -n 5</code></pre>
</div>
<p>then she can re-run <code>goostats.sh</code> on the files simply by
typing <code>!459</code>.</p>
</div>
</div>
</div>
<div id="other-history-commands" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="other-history-commands" class="callout-inner">
<h3 class="callout-title">Other History Commands</h3>
<div class="callout-content">
<p>There are a number of other shortcut commands for getting at the
history.</p>
<ul>
<li>
<kbd>Ctrl</kbd>+<kbd>R</kbd> enters a history search mode
‘reverse-i-search’ and finds the most recent command in your history
that matches the text you enter next. Press <kbd>Ctrl</kbd>+<kbd>R</kbd>
one or more additional times to search for earlier matches. You can then
use the left and right arrow keys to choose that line and edit it then
hit <kbd>Return</kbd> to run the command.</li>
<li>
<code>!!</code> retrieves the immediately preceding command (you may
or may not find this more convenient than using <kbd>↑</kbd>)</li>
<li>
<code>!$</code> retrieves the last word of the last command. That’s
useful more often than you might expect: after
<code>bash goostats.sh NENE01729B.txt stats-NENE01729B.txt</code>, you
can type <code>less !$</code> to look at the file
<code>stats-NENE01729B.txt</code>, which is quicker than doing
<kbd>↑</kbd> and editing the command-line.</li>
</ul>
</div>
</div>
</div>
<div id="doing-a-dry-run" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="doing-a-dry-run" class="callout-inner">
<h3 class="callout-title">Doing a Dry Run</h3>
<div class="callout-content">
<p>A loop is a way to do many things at once — or to make many mistakes
at once if it does the wrong thing. One way to check what a loop
<em>would</em> do is to <code>echo</code> the commands it would run
instead of actually running them.</p>
<p>Suppose we want to preview the commands the following loop will
execute without actually running those commands:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="op">&gt;</span>     cat <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>What is the difference between the two loops below, and which one
would we want to run?</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="co"># Version 1</span></span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="fu">cat</span> <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="co"># Version 2</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="st">"cat </span><span class="va">$datafile</span><span class="st"> &gt;&gt; all.pdb"</span></span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Show me the solution </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<p>The second version is the one we want to run. This prints to screen
everything enclosed in the quote marks, expanding the loop variable name
because we have prefixed it with a dollar sign. It also <em>does
not</em> modify nor create the file <code>all.pdb</code>, as the
<code>&gt;&gt;</code> is treated literally as part of a string rather
than as a redirection instruction.</p>
<p>The first version appends the output from the command
<code>echo cat $datafile</code> to the file, <code>all.pdb</code>. This
file will just contain the list; <code>cat cubane.pdb</code>,
<code>cat ethane.pdb</code>, <code>cat methane.pdb</code> etc.</p>
<p>Try both versions for yourself to see the output! Be sure to open the
<code>all.pdb</code> file to view its contents.</p>
</div>
</div>
</div>
</div>
<div id="nested-loops" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="nested-loops" class="callout-inner">
<h3 class="callout-title">Nested Loops</h3>
<div class="callout-content">
<p>Suppose we want to set up a directory structure to organize some
experiments measuring reaction rate constants with different compounds
<em>and</em> different temperatures. What would be the result of the
following code:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="ex">$</span> for species in cubane ethane methane</span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a><span class="op">&gt;</span>     for <span class="ex">temperature</span> in 25 30 37 40</span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a><span class="op">&gt;</span>     do</span>
<span id="cb47-5"><a href="#cb47-5" tabindex="-1"></a><span class="op">&gt;</span>         mkdir <span class="va">$species</span><span class="ex">-</span><span class="va">$temperature</span></span>
<span id="cb47-6"><a href="#cb47-6" tabindex="-1"></a><span class="op">&gt;</span>     done</span>
<span id="cb47-7"><a href="#cb47-7" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8"> Show me the solution </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" data-bs-parent="#accordionSolution8" aria-labelledby="headingSolution8">
<div class="accordion-body">
<p>We have a nested loop, i.e. contained within another loop, so for
each species in the outer loop, the inner loop (the nested loop)
iterates over the list of temperatures, and creates a new directory for
each combination.</p>
<p>Try running the code for yourself to see which directories are
created!</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>A <code>for</code> loop repeats commands once for every thing in a
list.</li>
<li>Every <code>for</code> loop needs a variable to refer to the thing
it is currently operating on.</li>
<li>Use <code>$name</code> to expand a variable (i.e., get its value).
<code>${name}</code> can also be used.</li>
<li>Do not use spaces, quotes, or wildcard characters such as ‘*’ or ‘?’
in filenames, as it complicates variable expansion.</li>
<li>Give files consistent names that are easy to match with wildcard
patterns to make it easy to select them for looping.</li>
<li>Use the up-arrow key to scroll up through previous commands to edit
and repeat them.</li>
<li>Use <kbd>Ctrl</kbd>+<kbd>R</kbd> to search through the previously
entered commands.</li>
<li>Use <code>history</code> to display recent commands, and
<code>![number]</code> to repeat a command by number.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-06-script"><p>Content from <a href="06-script.html">Shell Scripts</a></p>
<hr>
<p>Last updated on 2024-09-06 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/06-script.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I save and re-use commands?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Write a shell script that runs a command or series of commands for a
fixed set of files.</li>
<li>Run a shell script from the command line.</li>
<li>Write a shell script that operates on a set of files defined by the
user on the command line.</li>
<li>Create pipelines that include shell scripts you, and others, have
written.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>We are finally ready to see what makes the shell such a powerful
programming environment. We are going to take the commands we repeat
frequently and save them in files so that we can re-run all those
operations again later by typing a single command. For historical
reasons, a bunch of commands saved in a file is usually called a
<strong>shell script</strong>, but make no mistake — these are actually
small programs.</p>
<p>Not only will writing shell scripts make your work faster, but also
you won’t have to retype the same commands over and over again. It will
also make it more accurate (fewer chances for typos) and more
reproducible. If you come back to your work later (or if someone else
finds your work and wants to build on it), you will be able to reproduce
the same results simply by running your script, rather than having to
remember or retype a long list of commands.</p>
<p>Let’s start by going back to <code>alkanes/</code> and creating a new
file, <code>middle.sh</code> which will become our shell script:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> cd alkanes</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre>
</div>
<p>The command <code>nano middle.sh</code> opens the file
<code>middle.sh</code> within the text editor ‘nano’ (which runs within
the shell). If the file does not exist, it will be created. We can use
the text editor to directly edit the file by inserting the following
line:</p>
<pre class="source"><code>head -n 15 octane.pdb | tail -n 5</code></pre>
<p>This is a variation on the pipe we constructed earlier, which selects
lines 11-15 of the file <code>octane.pdb</code>. Remember, we are
<em>not</em> running it as a command just yet; we are only incorporating
the commands in a file.</p>
<p>Then we save the file (<code>Ctrl-O</code> in nano) and exit the text
editor (<code>Ctrl-X</code> in nano). Check that the directory
<code>alkanes</code> now contains a file called
<code>middle.sh</code>.</p>
<p>Once we have saved the file, we can ask the shell to execute the
commands it contains. Our shell is called <code>bash</code>, so we run
the following command:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> bash middle.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM      9  H           1      -4.502   0.681   0.785  1.00  0.00
ATOM     10  H           1      -5.254  -0.243  -0.537  1.00  0.00
ATOM     11  H           1      -4.357   1.252  -0.895  1.00  0.00
ATOM     12  H           1      -3.009  -0.741  -1.467  1.00  0.00
ATOM     13  H           1      -3.172  -1.337   0.206  1.00  0.00</code></pre>
</div>
<p>Sure enough, our script’s output is exactly what we would get if we
ran that pipeline directly.</p>
<div id="text-vs.-whatever" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="text-vs.-whatever" class="callout-inner">
<h3 class="callout-title">Text vs. Whatever</h3>
<div class="callout-content">
<p>We usually call programs like Microsoft Word or LibreOffice Writer
“text editors”, but we need to be a bit more careful when it comes to
programming. By default, Microsoft Word uses <code>.docx</code> files to
store not only text, but also formatting information about fonts,
headings, and so on. This extra information isn’t stored as characters
and doesn’t mean anything to tools like <code>head</code>, which expects
input files to contain nothing but the letters, digits, and punctuation
on a standard computer keyboard. When editing programs, therefore, you
must either use a plain text editor or be careful to save files as plain
text.</p>
</div>
</div>
</div>
<p>What if we want to select lines from an arbitrary file? We could edit
<code>middle.sh</code> each time to change the filename, but that would
probably take longer than typing the command out again in the shell and
executing it with a new file name. Instead, let’s edit
<code>middle.sh</code> and make it more versatile:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre>
</div>
<p>Now, within “nano”, replace the text <code>octane.pdb</code> with the
special variable called <code>$1</code>:</p>
<pre class="source"><code>head -n 15 "$1" | tail -n 5</code></pre>
<p>Inside a shell script, <code>$1</code> means ‘the first filename (or
other argument) on the command line’. We can now run our script like
this:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> bash middle.sh octane.pdb</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM      9  H           1      -4.502   0.681   0.785  1.00  0.00
ATOM     10  H           1      -5.254  -0.243  -0.537  1.00  0.00
ATOM     11  H           1      -4.357   1.252  -0.895  1.00  0.00
ATOM     12  H           1      -3.009  -0.741  -1.467  1.00  0.00
ATOM     13  H           1      -3.172  -1.337   0.206  1.00  0.00</code></pre>
</div>
<p>or on a different file like this:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> bash middle.sh pentane.pdb</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM      9  H           1       1.324   0.350  -1.332  1.00  0.00
ATOM     10  H           1       1.271   1.378   0.122  1.00  0.00
ATOM     11  H           1      -0.074  -0.384   1.288  1.00  0.00
ATOM     12  H           1      -0.048  -1.362  -0.205  1.00  0.00
ATOM     13  H           1      -1.183   0.500  -1.412  1.00  0.00</code></pre>
</div>
<div id="double-quotes-around-arguments" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="double-quotes-around-arguments" class="callout-inner">
<h3 class="callout-title">Double-Quotes Around Arguments</h3>
<div class="callout-content">
<p>For the same reason that we put the loop variable inside
double-quotes, in case the filename happens to contain any spaces, we
surround <code>$1</code> with double-quotes.</p>
</div>
</div>
</div>
<p>Currently, we need to edit <code>middle.sh</code> each time we want
to adjust the range of lines that is returned. Let’s fix that by
configuring our script to instead use three command-line arguments.
After the first command-line argument (<code>$1</code>), each additional
argument that we provide will be accessible via the special variables
<code>$1</code>, <code>$2</code>, <code>$3</code>, which refer to the
first, second, third command-line arguments, respectively.</p>
<p>Knowing this, we can use additional arguments to define the range of
lines to be passed to <code>head</code> and <code>tail</code>
respectively:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre>
</div>
<pre class="source"><code>head -n "$2" "$1" | tail -n "$3"</code></pre>
<p>We can now run:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> bash middle.sh pentane.pdb 15 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM      9  H           1       1.324   0.350  -1.332  1.00  0.00
ATOM     10  H           1       1.271   1.378   0.122  1.00  0.00
ATOM     11  H           1      -0.074  -0.384   1.288  1.00  0.00
ATOM     12  H           1      -0.048  -1.362  -0.205  1.00  0.00
ATOM     13  H           1      -1.183   0.500  -1.412  1.00  0.00</code></pre>
</div>
<p>By changing the arguments to our command, we can change our script’s
behaviour:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> bash middle.sh pentane.pdb 20 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM     14  H           1      -1.259   1.420   0.112  1.00  0.00
ATOM     15  H           1      -2.608  -0.407   1.130  1.00  0.00
ATOM     16  H           1      -2.540  -1.303  -0.404  1.00  0.00
ATOM     17  H           1      -3.393   0.254  -0.321  1.00  0.00
TER      18              1</code></pre>
</div>
<p>This works, but it may take the next person who reads
<code>middle.sh</code> a moment to figure out what it does. We can
improve our script by adding some <strong>comments</strong> at the
top:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre>
</div>
<pre class="source"><code># Select lines from the middle of a file.
# Usage: bash middle.sh filename end_line num_lines
head -n "$2" "$1" | tail -n "$3"</code></pre>
<p>A comment starts with a <code>#</code> character and runs to the end
of the line. The computer ignores comments, but they’re invaluable for
helping people (including your future self) understand and use scripts.
The only caveat is that each time you modify the script, you should
check that the comment is still accurate. An explanation that sends the
reader in the wrong direction is worse than none at all.</p>
<p>What if we want to process many files in a single pipeline? For
example, if we want to sort our <code>.pdb</code> files by length, we
would type:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code></pre>
</div>
<p>because <code>wc -l</code> lists the number of lines in the files
(recall that <code>wc</code> stands for ‘word count’, adding the
<code>-l</code> option means ‘count lines’ instead) and
<code>sort -n</code> sorts things numerically. We could put this in a
file, but then it would only ever sort a list of <code>.pdb</code> files
in the current directory. If we want to be able to get a sorted list of
other kinds of files, we need a way to get all those names into the
script. We can’t use <code>$1</code>, <code>$2</code>, and so on because
we don’t know how many files there are. Instead, we use the special
variable <code>$@</code>, which means, ‘All of the command-line
arguments to the shell script’. We also should put <code>$@</code>
inside double-quotes to handle the case of arguments containing spaces
(<code>"$@"</code> is special syntax and is equivalent to
<code>"$1"</code> <code>"$2"</code> …).</p>
<p>Here’s an example:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> nano sorted.sh</span></code></pre>
</div>
<pre class="source"><code># Sort files by their length.
# Usage: bash sorted.sh one_or_more_filenames
wc -l "$@" | sort -n</code></pre>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> bash sorted.sh <span class="pp">*</span>.pdb ../creatures/<span class="pp">*</span>.dat</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>9 methane.pdb
12 ethane.pdb
15 propane.pdb
20 cubane.pdb
21 pentane.pdb
30 octane.pdb
163 ../creatures/basilisk.dat
163 ../creatures/minotaur.dat
163 ../creatures/unicorn.dat
596 total</code></pre>
</div>
<div id="list-unique-species" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="list-unique-species" class="callout-inner">
<h3 class="callout-title">List Unique Species</h3>
<div class="callout-content">
<p>Leah has several hundred data files, each of which is formatted like
this:</p>
<pre class="source"><code>2013-11-05,deer,5
2013-11-05,rabbit,22
2013-11-05,raccoon,7
2013-11-06,rabbit,19
2013-11-06,deer,2
2013-11-06,fox,1
2013-11-07,rabbit,18
2013-11-07,bear,1</code></pre>
<p>An example of this type of file is given in
<code>shell-lesson-data/exercise-data/animal-counts/animals.csv</code>.</p>
<p>We can use the command
<code>cut -d , -f 2 animals.csv | sort | uniq</code> to produce the
unique species in <code>animals.csv</code>. In order to avoid having to
type out this series of commands every time, a scientist may choose to
write a shell script instead.</p>
<p>Write a shell script called <code>species.sh</code> that takes any
number of filenames as command-line arguments and uses a variation of
the above command to print a list of the unique species appearing in
each of those files separately.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># Script to find unique species in csv files where species is the second data field</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="co"># This script accepts any number of file names as command line arguments</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="co"># Loop over all files</span></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="cf">for</span> file <span class="kw">in</span> <span class="va">$@</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"Unique species in </span><span class="va">$file</span><span class="st">:"</span></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a>    <span class="co"># Extract species names</span></span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a>    <span class="fu">cut</span> <span class="at">-d</span> , <span class="at">-f</span> 2 <span class="va">$file</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span></span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Suppose we have just run a series of commands that did something
useful — for example, creating a graph we’d like to use in a paper. We’d
like to be able to re-create the graph later if we need to, so we want
to save the commands in a file. Instead of typing them in again (and
potentially getting them wrong) we can do this:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="ex">$</span> history <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5 <span class="op">&gt;</span> redo-figure-3.sh</span></code></pre>
</div>
<p>The file <code>redo-figure-3.sh</code> now contains:</p>
<pre class="source"><code>297 bash goostats.sh NENE01729B.txt stats-NENE01729B.txt
298 bash goodiff.sh stats-NENE01729B.txt /data/validated/01729.txt &gt; 01729-differences.txt
299 cut -d ',' -f 2-3 01729-differences.txt &gt; 01729-time-series.txt
300 ygraph --format scatter --color bw --borders none 01729-time-series.txt figure-3.png
301 history | tail -n 5 &gt; redo-figure-3.sh</code></pre>
<p>After a moment’s work in an editor to remove the serial numbers on
the commands, and to remove the final line where we called the
<code>history</code> command, we have a completely accurate record of
how we created that figure.</p>
<div id="why-record-commands-in-the-history-before-running-them" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="why-record-commands-in-the-history-before-running-them" class="callout-inner">
<h3 class="callout-title">Why Record Commands in the History Before Running Them?</h3>
<div class="callout-content">
<p>If you run the command:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> history <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5 <span class="op">&gt;</span> recent.sh</span></code></pre>
</div>
<p>the last command in the file is the <code>history</code> command
itself, i.e., the shell has added <code>history</code> to the command
log before actually running it. In fact, the shell <em>always</em> adds
commands to the log before running them. Why do you think it does
this?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>If a command causes something to crash or hang, it might be useful to
know what that command was, in order to investigate the problem. Were
the command only be recorded after running it, we would not have a
record of the last command run in the event of a crash.</p>
</div>
</div>
</div>
</div>
<p>In practice, most people develop shell scripts by running commands at
the shell prompt a few times to make sure they’re doing the right thing,
then saving them in a file for re-use. This style of work allows people
to recycle what they discover about their data and their workflow with
one call to <code>history</code> and a bit of editing to clean up the
output and save it as a shell script.</p>
<section><h2 class="section-heading" id="nelles-pipeline-creating-a-script">Nelle’s Pipeline: Creating a Script<a class="anchor" aria-label="anchor" href="#nelles-pipeline-creating-a-script"></a>
</h2>
<hr class="half-width">
<p>Nelle’s supervisor insisted that all her analytics must be
reproducible. The easiest way to capture all the steps is in a
script.</p>
<p>First we return to Nelle’s project directory:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">$</span> cd ../../north-pacific-gyre/</span></code></pre>
</div>
<p>She creates a file using <code>nano</code> …</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> nano do-stats.sh</span></code></pre>
</div>
<p>…which contains the following:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="co"># Calculate stats for data files.</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> <span class="st">"</span><span class="va">$@</span><span class="st">"</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$datafile</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a>    <span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>She saves this in a file called <code>do-stats.sh</code> so that she
can now re-do the first stage of her analysis by typing:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="ex">$</span> bash do-stats.sh NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span></code></pre>
</div>
<p>She can also do this:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">$</span> bash do-stats.sh NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-l</span></span></code></pre>
</div>
<p>so that the output is just the number of files processed rather than
the names of the files that were processed.</p>
<p>One thing to note about Nelle’s script is that it lets the person
running it decide what files to process. She could have written it
as:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="co"># Calculate stats for Site A and Site B data files.</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$datafile</span></span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a>    <span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>The advantage is that this always selects the right files: she
doesn’t have to remember to exclude the ‘Z’ files. The disadvantage is
that it <em>always</em> selects just those files — she can’t run it on
all files (including the ‘Z’ files), or on the ‘G’ or ‘H’ files her
colleagues in Antarctica are producing, without editing the script. If
she wanted to be more adventurous, she could modify her script to check
for command-line arguments, and use <code>NENE*A.txt NENE*B.txt</code>
if none were provided. Of course, this introduces another tradeoff
between flexibility and complexity.</p>
<div id="variables-in-shell-scripts" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="variables-in-shell-scripts" class="callout-inner">
<h3 class="callout-title">Variables in Shell Scripts</h3>
<div class="callout-content">
<p>In the <code>alkanes</code> directory, imagine you have a shell
script called <code>script.sh</code> containing the following
commands:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="fu">head</span> <span class="at">-n</span> <span class="va">$2</span> <span class="va">$1</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="fu">tail</span> <span class="at">-n</span> <span class="va">$3</span> <span class="va">$1</span></span></code></pre>
</div>
<p>While you are in the <code>alkanes</code> directory, you type the
following command:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> bash script.sh <span class="st">'*.pdb'</span> 1 1</span></code></pre>
</div>
<p>Which of the following outputs would you expect to see?</p>
<ol style="list-style-type: decimal">
<li>All of the lines between the first and the last lines of each file
ending in <code>.pdb</code> in the <code>alkanes</code> directory</li>
<li>The first and the last line of each file ending in <code>.pdb</code>
in the <code>alkanes</code> directory</li>
<li>The first and the last line of each file in the <code>alkanes</code>
directory</li>
<li>An error because of the quotes around <code>*.pdb</code>
</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>The correct answer is 2.</p>
<p>The special variables <code>$1</code>, <code>$2</code> and
<code>$3</code> represent the command line arguments given to the
script, such that the commands run are:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 1 cubane.pdb ethane.pdb octane.pdb pentane.pdb propane.pdb</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="ex">$</span> tail <span class="at">-n</span> 1 cubane.pdb ethane.pdb octane.pdb pentane.pdb propane.pdb</span></code></pre>
</div>
<p>The shell does not expand <code>'*.pdb'</code> because it is enclosed
by quote marks. As such, the first argument to the script is
<code>'*.pdb'</code> which gets expanded within the script by
<code>head</code> and <code>tail</code>.</p>
</div>
</div>
</div>
</div>
<div id="find-the-longest-file-with-a-given-extension" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="find-the-longest-file-with-a-given-extension" class="callout-inner">
<h3 class="callout-title">Find the Longest File With a Given Extension</h3>
<div class="callout-content">
<p>Write a shell script called <code>longest.sh</code> that takes the
name of a directory and a filename extension as its arguments, and
prints out the name of the file with the most lines in that directory
with that extension. For example:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> bash longest.sh shell-lesson-data/exercise-data/alkanes pdb</span></code></pre>
</div>
<p>would print the name of the <code>.pdb</code> file in
<code>shell-lesson-data/exercise-data/alkanes</code> that has the most
lines.</p>
<p>Feel free to test your script on another directory e.g.</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> bash longest.sh shell-lesson-data/exercise-data/writing txt</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="co"># Shell script which takes two arguments:</span></span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="co">#    1. a directory name</span></span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a><span class="co">#    2. a file extension</span></span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a><span class="co"># and prints the name of the file in that directory</span></span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a><span class="co"># with the most lines which matches the file extension.</span></span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a></span>
<span id="cb40-7"><a href="#cb40-7" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> <span class="va">$1</span>/<span class="pp">*</span>.<span class="va">$2</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 2 <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code></pre>
</div>
<p>The first part of the pipeline, <code>wc -l $1/*.$2 | sort -n</code>,
counts the lines in each file and sorts them numerically (largest last).
When there’s more than one file, <code>wc</code> also outputs a final
summary line, giving the total number of lines across <em>all</em>
files. We use <code>tail -n 2 | head -n 1</code> to throw away this last
line.</p>
<p>With <code>wc -l $1/*.$2 | sort -n | tail -n 1</code> we’ll see the
final summary line: we can build our pipeline up in pieces to be sure we
understand the output.</p>
</div>
</div>
</div>
</div>
<div id="script-reading-comprehension" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="script-reading-comprehension" class="callout-inner">
<h3 class="callout-title">Script Reading Comprehension</h3>
<div class="callout-content">
<p>For this question, consider the
<code>shell-lesson-data/exercise-data/alkanes</code> directory once
again. This contains a number of <code>.pdb</code> files in addition to
any other files you may have created. Explain what each of the following
three scripts would do when run as <code>bash script1.sh *.pdb</code>,
<code>bash script2.sh *.pdb</code>, and
<code>bash script3.sh *.pdb</code> respectively.</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="co"># Script 1</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="bu">echo</span> <span class="pp">*</span>.<span class="pp">*</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="co"># Script 2</span></span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> <span class="va">$1</span> <span class="va">$2</span> <span class="va">$3</span></span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a>    <span class="fu">cat</span> <span class="va">$filename</span></span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="co"># Script 3</span></span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$@</span>.pdb</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Solutions </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>In each case, the shell expands the wildcard in <code>*.pdb</code>
before passing the resulting list of file names as arguments to the
script.</p>
<p>Script 1 would print out a list of all files containing a dot in
their name. The arguments passed to the script are not actually used
anywhere in the script.</p>
<p>Script 2 would print the contents of the first 3 files with a
<code>.pdb</code> file extension. <code>$1</code>, <code>$2</code>, and
<code>$3</code> refer to the first, second, and third argument
respectively.</p>
<p>Script 3 would print all the arguments to the script (i.e. all the
<code>.pdb</code> files), followed by <code>.pdb</code>. <code>$@</code>
refers to <em>all</em> the arguments given to a shell script.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb ethane.pdb methane.pdb octane.pdb pentane.pdb propane.pdb.pdb</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="debugging-scripts" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="debugging-scripts" class="callout-inner">
<h3 class="callout-title">Debugging Scripts</h3>
<div class="callout-content">
<p>Suppose you have saved the following script in a file called
<code>do-errors.sh</code> in Nelle’s <code>north-pacific-gyre</code>
directory:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="co"># Calculate stats for data files.</span></span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> <span class="st">"</span><span class="va">$@</span><span class="st">"</span></span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$datfile</span></span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a>    <span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb45-6"><a href="#cb45-6" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>When you run it from the <code>north-pacific-gyre</code>
directory:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="ex">$</span> bash do-errors.sh NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span></code></pre>
</div>
<p>the output is blank. To figure out why, re-run the script using the
<code>-x</code> option:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="ex">$</span> bash <span class="at">-x</span> do-errors.sh NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span></code></pre>
</div>
<p>What is the output showing you? Which line is responsible for the
error?</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<p>The <code>-x</code> option causes <code>bash</code> to run in debug
mode. This prints out each command as it is run, which will help you to
locate errors. In this example, we can see that <code>echo</code> isn’t
printing anything. We have made a typo in the loop variable name, and
the variable <code>datfile</code> doesn’t exist, hence returning an
empty string.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Save commands in files (usually called shell scripts) for
re-use.</li>
<li>
<code>bash [filename]</code> runs the commands saved in a file.</li>
<li>
<code>$@</code> refers to all of a shell script’s command-line
arguments.</li>
<li>
<code>$1</code>, <code>$2</code>, etc., refer to the first
command-line argument, the second command-line argument, etc.</li>
<li>Place variables in quotes if the values might have spaces in
them.</li>
<li>Letting users decide what files to process is more flexible and more
consistent with built-in Unix commands.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-07-find"><p>Content from <a href="07-find.html">Finding Things</a></p>
<hr>
<p>Last updated on 2024-09-06 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/07-find.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I find files?</li>
<li>How can I find things in files?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use <code>grep</code> to select lines from text files that match
simple patterns.</li>
<li>Use <code>find</code> to find files and directories whose names
match simple patterns.</li>
<li>Use the output of one command as the command-line argument(s) to
another command.</li>
<li>Explain what is meant by ‘text’ and ‘binary’ files, and why many
common tools don’t handle the latter well.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In the same way that many of us now use ‘Google’ as a verb meaning
‘to find’, Unix programmers often use the word ‘grep’. ‘grep’ is a
contraction of ‘global/regular expression/print’, a common sequence of
operations in early Unix text editors. It is also the name of a very
useful command-line program.</p>
<p><code>grep</code> finds and prints lines in files that match a
pattern. For our examples, we will use a file that contains three haiku
taken from a <a href="https://web.archive.org/web/19991201042211/http://salon.com/21st/chal/1998/01/26chal.html" class="external-link">1998
competition</a> in <em>Salon</em> magazine (Credit to authors Bill
Torcaso, Howard Korder, and Margaret Segall, respectively. See Haiku
Error Messsages archived <a href="https://web.archive.org/web/20000310061355/http://www.salon.com/21st/chal/1998/02/10chal2.html" class="external-link">Page
1</a> and <a href="https://web.archive.org/web/20000229135138/http://www.salon.com/21st/chal/1998/02/10chal3.html" class="external-link">Page
2</a> .). For this set of examples, we’re going to be working in the
writing subdirectory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> cd</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> cd Desktop/shell-lesson-data/exercise-data/writing</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="ex">$</span> cat haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The Tao that is seen
Is not the true Tao, until
You bring fresh toner.

With searching comes loss
and the presence of absence:
"My Thesis" not found.

Yesterday it worked
Today it is not working
Software is like that.</code></pre>
</div>
<p>Let’s find lines that contain the word ‘not’:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> grep not haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Is not the true Tao, until
"My Thesis" not found
Today it is not working</code></pre>
</div>
<p>Here, <code>not</code> is the pattern we’re searching for. The grep
command searches through the file, looking for matches to the pattern
specified. To use it type <code>grep</code>, then the pattern we’re
searching for and finally the name of the file (or files) we’re
searching in.</p>
<p>The output is the three lines in the file that contain the letters
‘not’.</p>
<p>By default, grep searches for a pattern in a case-sensitive way. In
addition, the search pattern we have selected does not have to form a
complete word, as we will see in the next example.</p>
<p>Let’s search for the pattern: ‘The’.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> grep The haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The Tao that is seen
"My Thesis" not found.</code></pre>
</div>
<p>This time, two lines that include the letters ‘The’ are outputted,
one of which contained our search pattern within a larger word,
‘Thesis’.</p>
<p>To restrict matches to lines containing the word ‘The’ on its own, we
can give <code>grep</code> the <code>-w</code> option. This will limit
matches to word boundaries.</p>
<p>Later in this lesson, we will also see how we can change the search
behavior of grep with respect to its case sensitivity.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-w</span> The haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The Tao that is seen</code></pre>
</div>
<p>Note that a ‘word boundary’ includes the start and end of a line, so
not just letters surrounded by spaces. Sometimes we don’t want to search
for a single word, but a phrase. We can also do this with
<code>grep</code> by putting the phrase in quotes.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-w</span> <span class="st">"is not"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Today it is not working</code></pre>
</div>
<p>We’ve now seen that you don’t have to have quotes around single
words, but it is useful to use quotes when searching for multiple words.
It also helps to make it easier to distinguish between the search term
or phrase and the file being searched. We will use quotes in the
remaining examples.</p>
<p>Another useful option is <code>-n</code>, which numbers the lines
that match:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="st">"it"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>5:With searching comes loss
9:Yesterday it worked
10:Today it is not working</code></pre>
</div>
<p>Here, we can see that lines 5, 9, and 10 contain the letters
‘it’.</p>
<p>We can combine options (i.e. flags) as we do with other Unix
commands. For example, let’s find the lines that contain the word ‘the’.
We can combine the option <code>-w</code> to find the lines that contain
the word ‘the’ and <code>-n</code> to number the lines that match:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="at">-w</span> <span class="st">"the"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2:Is not the true Tao, until
6:and the presence of absence:</code></pre>
</div>
<p>Now we want to use the option <code>-i</code> to make our search
case-insensitive:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="at">-w</span> <span class="at">-i</span> <span class="st">"the"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1:The Tao that is seen
2:Is not the true Tao, until
6:and the presence of absence:</code></pre>
</div>
<p>Now, we want to use the option <code>-v</code> to invert our search,
i.e., we want to output the lines that do not contain the word
‘the’.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="at">-w</span> <span class="at">-v</span> <span class="st">"the"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1:The Tao that is seen
3:You bring fresh toner.
4:
5:With searching comes loss
7:"My Thesis" not found.
8:
9:Yesterday it worked
10:Today it is not working
11:Software is like that.</code></pre>
</div>
<p>If we use the <code>-r</code> (recursive) option, <code>grep</code>
can search for a pattern recursively through a set of files in
subdirectories.</p>
<p>Let’s search recursively for <code>Yesterday</code> in the
<code>shell-lesson-data/exercise-data/writing</code> directory:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-r</span> Yesterday .</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>./LittleWomen.txt:"Yesterday, when Aunt was asleep and I was trying to be as still as a
./LittleWomen.txt:Yesterday at dinner, when an Austrian officer stared at us and then
./LittleWomen.txt:Yesterday was a quiet day spent in teaching, sewing, and writing in my
./haiku.txt:Yesterday it worked</code></pre>
</div>
<p><code>grep</code> has lots of other options. To find out what they
are, we can type:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">--help</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Usage: grep [OPTION]... PATTERN [FILE]...
Search for PATTERN in each FILE or standard input.
PATTERN is, by default, a basic regular expression (BRE).
Example: grep -i 'hello world' menu.h main.c

Regexp selection and interpretation:
  -E, --extended-regexp     PATTERN is an extended regular expression (ERE)
  -F, --fixed-strings       PATTERN is a set of newline-separated fixed strings
  -G, --basic-regexp        PATTERN is a basic regular expression (BRE)
  -P, --perl-regexp         PATTERN is a Perl regular expression
  -e, --regexp=PATTERN      use PATTERN for matching
  -f, --file=FILE           obtain PATTERN from FILE
  -i, --ignore-case         ignore case distinctions
  -w, --word-regexp         force PATTERN to match only whole words
  -x, --line-regexp         force PATTERN to match only whole lines
  -z, --null-data           a data line ends in 0 byte, not newline

Miscellaneous:
...        ...        ...</code></pre>
</div>
<div id="using-grep" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="using-grep" class="callout-inner">
<h3 class="callout-title">Using <code>grep</code>
</h3>
<div class="callout-content">
<p>Which command would result in the following output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>and the presence of absence:</code></pre>
</div>
<ol style="list-style-type: decimal">
<li><code>grep "of" haiku.txt</code></li>
<li><code>grep -E "of" haiku.txt</code></li>
<li><code>grep -w "of" haiku.txt</code></li>
<li><code>grep -i "of" haiku.txt</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>The correct answer is 3, because the <code>-w</code> option looks
only for whole-word matches. The other options will also match ‘of’ when
part of another word.</p>
</div>
</div>
</div>
</div>
<div id="wildcards" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="wildcards" class="callout-inner">
<h3 class="callout-title">Wildcards</h3>
<div class="callout-content">
<p><code>grep</code>‘s real power doesn’t come from its options, though;
it comes from the fact that patterns can include wildcards. (The
technical name for these is <strong>regular expressions</strong>, which
is what the ’re’ in ‘grep’ stands for.) Regular expressions are both
complex and powerful; if you want to do complex searches, please look at
the lesson on <a href="https://librarycarpentry.org/lc-data-intro/01-regular-expressions.html" class="external-link">our
website</a>. As a taster, we can find lines that have an ‘o’ in the
second position like this:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-E</span> <span class="st">"^.o"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>You bring fresh toner.
Today it is not working
Software is like that.</code></pre>
</div>
<p>We use the <code>-E</code> option and put the pattern in quotes to
prevent the shell from trying to interpret it. (If the pattern contained
a <code>*</code>, for example, the shell would try to expand it before
running <code>grep</code>.) The <code>^</code> in the pattern anchors
the match to the start of the line. The <code>.</code> matches a single
character (just like <code>?</code> in the shell), while the
<code>o</code> matches an actual ‘o’.</p>
</div>
</div>
</div>
<div id="tracking-a-species" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="tracking-a-species" class="callout-inner">
<h3 class="callout-title">Tracking a Species</h3>
<div class="callout-content">
<p>Leah has several hundred data files saved in one directory, each of
which is formatted like this:</p>
<pre class="source"><code>2012-11-05,deer,5
2012-11-05,rabbit,22
2012-11-05,raccoon,7
2012-11-06,rabbit,19
2012-11-06,deer,2
2012-11-06,fox,4
2012-11-07,rabbit,16
2012-11-07,bear,1</code></pre>
<p>She wants to write a shell script that takes a species as the first
command-line argument and a directory as the second argument. The script
should return one file called <code>&lt;species&gt;.txt</code>
containing a list of dates and the number of that species seen on each
date. For example using the data shown above, <code>rabbit.txt</code>
would contain:</p>
<pre class="source"><code>2012-11-05,22
2012-11-06,19
2012-11-07,16</code></pre>
<p>Below, each line contains an individual command, or pipe. Arrange
their sequence in one command in order to achieve Leah’s goal:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">cut</span> <span class="at">-d</span> : <span class="at">-f</span> 2</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="op">&gt;</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a><span class="kw">|</span></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-w</span> <span class="va">$1</span> <span class="at">-r</span> <span class="va">$2</span></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="kw">|</span></span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a><span class="va">$1</span><span class="ex">.txt</span></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a><span class="fu">cut</span> <span class="at">-d</span> , <span class="at">-f</span> 1,3</span></code></pre>
</div>
<p>Hint: use <code>man grep</code> to look for how to grep text
recursively in a directory and <code>man cut</code> to select more than
one field in a line.</p>
<p>An example of such a file is provided in
<code>shell-lesson-data/exercise-data/animal-counts/animals.csv</code></p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<pre class="source"><code>grep -w $1 -r $2 | cut -d : -f 2 | cut -d , -f 1,3 &gt; $1.txt</code></pre>
<p>Actually, you can swap the order of the two cut commands and it still
works. At the command line, try changing the order of the cut commands,
and have a look at the output from each step to see why this is the
case.</p>
<p>You would call the script above like this:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> bash count-species.sh bear .</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="little-women" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="little-women" class="callout-inner">
<h3 class="callout-title">Little Women</h3>
<div class="callout-content">
<p>You and your friend, having just finished reading <em>Little
Women</em> by Louisa May Alcott, are in an argument. Of the four sisters
in the book, Jo, Meg, Beth, and Amy, your friend thinks that Jo was the
most mentioned. You, however, are certain it was Amy. Luckily, you have
a file <code>LittleWomen.txt</code> containing the full text of the
novel
(<code>shell-lesson-data/exercise-data/writing/LittleWomen.txt</code>).
Using a <code>for</code> loop, how would you tabulate the number of
times each of the four sisters is mentioned?</p>
<p>Hint: one solution might employ the commands <code>grep</code> and
<code>wc</code> and a <code>|</code>, while another might utilize
<code>grep</code> options. There is often more than one way to solve a
programming task, so a particular solution is usually chosen based on a
combination of yielding the correct result, elegance, readability, and
speed.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Solutions </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<pre class="source"><code>for sis in Jo Meg Beth Amy
do
    echo $sis:
    grep -ow $sis LittleWomen.txt | wc -l
done</code></pre>
<p>Alternative, slightly inferior solution:</p>
<pre class="source"><code>for sis in Jo Meg Beth Amy
do
    echo $sis:
    grep -ocw $sis LittleWomen.txt
done</code></pre>
<p>This solution is inferior because <code>grep -c</code> only reports
the number of lines matched. The total number of matches reported by
this method will be lower if there is more than one match per line.</p>
<p>Perceptive observers may have noticed that character names sometimes
appear in all-uppercase in chapter titles (e.g. ‘MEG GOES TO VANITY
FAIR’). If you wanted to count these as well, you could add the
<code>-i</code> option for case-insensitivity (though in this case, it
doesn’t affect the answer to which sister is mentioned most
frequently).</p>
</div>
</div>
</div>
</div>
<p>While <code>grep</code> finds lines in files, the <code>find</code>
command finds files themselves. Again, it has a lot of options; to show
how the simplest ones work, we’ll use the
<code>shell-lesson-data/exercise-data</code> directory tree shown
below.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.
├── animal-counts/
│   └── animals.csv
├── creatures/
│   ├── basilisk.dat
│   ├── minotaur.dat
│   └── unicorn.dat
├── numbers.txt
├── alkanes/
│   ├── cubane.pdb
│   ├── ethane.pdb
│   ├── methane.pdb
│   ├── octane.pdb
│   ├── pentane.pdb
│   └── propane.pdb
└── writing/
    ├── haiku.txt
    └── LittleWomen.txt</code></pre>
</div>
<p>The <code>exercise-data</code> directory contains one file,
<code>numbers.txt</code> and four directories:
<code>animal-counts</code>, <code>creatures</code>, <code>alkanes</code>
and <code>writing</code> containing various files.</p>
<p>For our first command, let’s run <code>find .</code> (remember to run
this command from the <code>shell-lesson-data/exercise-data</code>
folder).</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">$</span> find .</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">writing</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">writing</span><span class="op">/</span><span class="va">LittleWomen.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">writing</span><span class="op">/</span><span class="va">haiku.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span><span class="op">/</span><span class="va">basilisk.dat</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span><span class="op">/</span><span class="va">unicorn.dat</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span><span class="op">/</span><span class="va">minotaur.dat</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">animal</span><span class="op">-</span><span class="va">counts</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">animal</span><span class="op">-</span><span class="va">counts</span><span class="op">/</span><span class="va">animals.csv</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">numbers.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">ethane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">propane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">octane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">pentane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">methane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">cubane.pdb</span></span></code></pre>
</div>
<p>As always, the <code>.</code> on its own means the current working
directory, which is where we want our search to start.
<code>find</code>’s output is the names of every file
<strong>and</strong> directory under the current working directory. This
can seem useless at first but <code>find</code> has many options to
filter the output and in this lesson we will discover some of them.</p>
<p>The first option in our list is <code>-type d</code> that means
‘things that are directories’. Sure enough, <code>find</code>’s output
is the names of the five directories (including <code>.</code>):</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-type</span> d</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">writing</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">animal</span><span class="op">-</span><span class="va">counts</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span></span></code></pre>
</div>
<p>Notice that the objects <code>find</code> finds are not listed in any
particular order. If we change <code>-type d</code> to
<code>-type f</code>, we get a listing of all the files instead:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-type</span> f</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span><span class="op">/</span><span class="va">writing</span><span class="op">/</span><span class="va">LittleWomen.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">writing</span><span class="op">/</span><span class="va">haiku.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span><span class="op">/</span><span class="va">basilisk.dat</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span><span class="op">/</span><span class="va">unicorn.dat</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">creatures</span><span class="op">/</span><span class="va">minotaur.dat</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">animal</span><span class="op">-</span><span class="va">counts</span><span class="op">/</span><span class="va">animals.csv</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">numbers.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">ethane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">propane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">octane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">pentane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">methane.pdb</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">alkanes</span><span class="op">/</span><span class="va">cubane.pdb</span></span></code></pre>
</div>
<p>Now let’s try matching by name:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-name</span> <span class="pp">*</span>.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span><span class="op">/</span><span class="va">numbers.txt</span></span></code></pre>
</div>
<p>We expected it to find all the text files, but it only prints out
<code>./numbers.txt</code>. The problem is that the shell expands
wildcard characters like <code>*</code> <em>before</em> commands run.
Since <code>*.txt</code> in the current directory expands to
<code>./numbers.txt</code>, the command we actually ran was:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-name</span> numbers.txt</span></code></pre>
</div>
<p><code>find</code> did what we asked; we just asked for the wrong
thing.</p>
<p>To get what we want, let’s do what we did with <code>grep</code>: put
<code>*.txt</code> in quotes to prevent the shell from expanding the
<code>*</code> wildcard. This way, <code>find</code> actually gets the
pattern <code>*.txt</code>, not the expanded filename
<code>numbers.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-name</span> <span class="st">"*.txt"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span><span class="op">/</span><span class="va">writing</span><span class="op">/</span><span class="va">LittleWomen.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">writing</span><span class="op">/</span><span class="va">haiku.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">numbers.txt</span></span></code></pre>
</div>
<div id="listing-vs.-finding" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="listing-vs.-finding" class="callout-inner">
<h3 class="callout-title">Listing vs. Finding</h3>
<div class="callout-content">
<p><code>ls</code> and <code>find</code> can be made to do similar
things given the right options, but under normal circumstances,
<code>ls</code> lists everything it can, while <code>find</code>
searches for things with certain properties and shows them.</p>
</div>
</div>
</div>
<p>As we said earlier, the command line’s power lies in combining tools.
We’ve seen how to do that with pipes; let’s look at another technique.
As we just saw, <code>find . -name "*.txt"</code> gives us a list of all
text files in or below the current directory. How can we combine that
with <code>wc -l</code> to count the lines in all those files?</p>
<p>The simplest way is to put the <code>find</code> command inside
<code>$()</code>:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="va">$(</span><span class="fu">find</span> . <span class="at">-name</span> <span class="st">"*.txt"</span><span class="va">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  21022 ./writing/LittleWomen.txt
     11 ./writing/haiku.txt
      5 ./numbers.txt
  21038 total</code></pre>
</div>
<p>When the shell executes this command, the first thing it does is run
whatever is inside the <code>$()</code>. It then replaces the
<code>$()</code> expression with that command’s output. Since the output
of <code>find</code> is the three filenames
<code>./writing/LittleWomen.txt</code>,
<code>./writing/haiku.txt</code>, and <code>./numbers.txt</code>, the
shell constructs the command:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> ./writing/LittleWomen.txt ./writing/haiku.txt ./numbers.txt</span></code></pre>
</div>
<p>which is what we wanted. This expansion is exactly what the shell
does when it expands wildcards like <code>*</code> and <code>?</code>,
but lets us use any command we want as our own ‘wildcard’.</p>
<p>It’s very common to use <code>find</code> and <code>grep</code>
together. The first finds files that match a pattern; the second looks
for lines inside those files that match another pattern. Here, for
example, we can find txt files that contain the word “searching” by
looking for the string ‘searching’ in all the <code>.txt</code> files in
the current directory:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="ex">$</span> grep <span class="st">"searching"</span> <span class="va">$(</span><span class="fu">find</span> . <span class="at">-name</span> <span class="st">"*.txt"</span><span class="va">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>./writing/LittleWomen.txt:sitting on the top step, affected to be searching for her book, but was
./writing/haiku.txt:With searching comes loss</code></pre>
</div>
<div id="matching-and-subtracting" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="matching-and-subtracting" class="callout-inner">
<h3 class="callout-title">Matching and Subtracting</h3>
<div class="callout-content">
<p>The <code>-v</code> option to <code>grep</code> inverts pattern
matching, so that only lines which do <em>not</em> match the pattern are
printed. Given that, which of the following commands will find all .dat
files in <code>creatures</code> except <code>unicorn.dat</code>? Once
you have thought about your answer, you can test the commands in the
<code>shell-lesson-data/exercise-data</code> directory.</p>
<ol style="list-style-type: decimal">
<li><code>find creatures -name "*.dat" | grep -v unicorn</code></li>
<li><code>find creatures -name *.dat | grep -v unicorn</code></li>
<li><code>grep -v "unicorn" $(find creatures -name "*.dat")</code></li>
<li>None of the above.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>Option 1 is correct. Putting the match expression in quotes prevents
the shell expanding it, so it gets passed to the <code>find</code>
command.</p>
<p>Option 2 also works in this instance because the shell tries to
expand <code>*.dat</code> but there are no <code>*.dat</code> files in
the current directory, so the wildcard expression gets passed to
<code>find</code>. We first encountered this in <a href="03-create.html">episode 3</a>.</p>
<p>Option 3 is incorrect because it searches the contents of the files
for lines which do not match ‘unicorn’, rather than searching the file
names.</p>
</div>
</div>
</div>
</div>
<div id="binary-files" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="binary-files" class="callout-inner">
<h3 class="callout-title">Binary Files</h3>
<div class="callout-content">
<p>We have focused exclusively on finding patterns in text files. What
if your data is stored as images, in databases, or in some other
format?</p>
<p>A handful of tools extend <code>grep</code> to handle a few non text
formats. But a more generalizable approach is to convert the data to
text, or extract the text-like elements from the data. On the one hand,
it makes simple things easy to do. On the other hand, complex things are
usually impossible. For example, it’s easy enough to write a program
that will extract X and Y dimensions from image files for
<code>grep</code> to play with, but how would you write something to
find values in a spreadsheet whose cells contained formulas?</p>
<p>A last option is to recognize that the shell and text processing have
their limits, and to use another programming language. When the time
comes to do this, don’t be too hard on the shell. Many modern
programming languages have borrowed a lot of ideas from it, and
imitation is also the sincerest form of praise.</p>
</div>
</div>
</div>
<p>The Unix shell is older than most of the people who use it. It has
survived so long because it is one of the most productive programming
environments ever created — maybe even <em>the</em> most productive. Its
syntax may be cryptic, but people who have mastered it can experiment
with different commands interactively, then use what they have learned
to automate their work. Graphical user interfaces may be easier to use
at first, but once learned, the productivity in the shell is unbeatable.
And as Alfred North Whitehead wrote in 1911, ‘Civilization advances by
extending the number of important operations which we can perform
without thinking about them.’</p>
<div id="find-pipeline-reading-comprehension" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="find-pipeline-reading-comprehension" class="callout-inner">
<h3 class="callout-title">
<code>find</code> Pipeline Reading
Comprehension</h3>
<div class="callout-content">
<p>Write a short explanatory comment for the following shell script:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> <span class="va">$(</span><span class="fu">find</span> . <span class="at">-name</span> <span class="st">"*.dat"</span><span class="va">)</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Find all files with a <code>.dat</code> extension recursively from
the current directory</li>
<li>Count the number of lines each of these files contains</li>
<li>Sort the output from step 2. numerically</li>
</ol>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>find</code> finds files with specific properties that match
patterns.</li>
<li>
<code>grep</code> selects lines in files that match patterns.</li>
<li>
<code>--help</code> is an option supported by many bash commands,
and programs that can be run from within Bash, to display more
information on how to use these commands or programs.</li>
<li>
<code>man [command]</code> displays the manual page for a given
command.</li>
<li>
<code>$([command])</code> inserts a command’s output in place.</li>
</ul>
</div>
</div>
</div></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/swcarpentry/shell-novice/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/swcarpentry/shell-novice/" class="external-link">Source</a></p>
				<p><a href="https://github.com/swcarpentry/shell-novice/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.7" class="external-link">sandpaper (0.16.7)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.4" class="external-link">varnish (1.0.4)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://swcarpentry.github.io/shell-novice/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://swcarpentry.github.io/shell-novice/aio.html",
  "identifier": "https://swcarpentry.github.io/shell-novice/aio.html",
  "dateCreated": "2014-10-22",
  "dateModified": "2024-09-06",
  "datePublished": "2024-09-06"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

