<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>The Unix Shell: Циклы</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Software Carpentry" src="assets/images/software-logo.svg"></div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/05-loop.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="assets/images/software-logo-sm.svg"></div>
    <div class="lesson-title-md">
      The Unix Shell
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            The Unix Shell
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html">Summary of Basic Commands</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  The Unix Shell
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 49%" class="percentage">
    49%
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: 49%" aria-valuenow="49" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/05-loop.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-intro.html">1. Введение в командную оболочку</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-filedir.html">2. Навигация по файлам и каталогам</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-create.html">3. Работа с файлами и каталогами</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-pipefilter.html">4. Каналы и фильтры</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        5. Циклы
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#%D0%BA%D0%BE%D0%BD%D0%B2%D0%B5%D0%B9%D0%B5%D1%80-%D0%BD%D0%B5%D0%BB%D0%BB%D0%B8-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2">Конвейер Нелли: обработка файлов</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-script.html">6. Скрипты оболочки</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-find.html">7. Finding Things</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li><li><a href="reference.html">Summary of Basic Commands</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="04-pipefilter.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="06-script.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="04-pipefilter.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Каналы и фильтры
        </a>
        <a class="chapter-link float-end" href="06-script.html" rel="next">
          Next: Скрипты оболочки...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Циклы</h1>
        <p>Last updated on 2024-09-07 |

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/05-loop.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>Как можно выполнить одинаковые действия для множества различных
файлов?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Написать цикл, который применяет одну или несколько команд отдельно
к каждому файлу из набора файлов.</li>
<li>Отслеживать значения, принимаемые переменной цикла во время
выполнения цикла.</li>
<li>Объяснить разницу между именем переменной и её значением.</li>
<li>Объяснить, почему в именах файлов не следует использовать пробелы и
некоторые символы пунктуации.</li>
<li>Показать, как посмотреть недавно выполненные команды.</li>
<li>Повторить недавно выполненные команды без их повторного ввода.</li>
</ul></div>
</div>
</div>
</div>
</div>
<p><strong>Циклы</strong> — это программная конструкция, которая
позволяет нам повторять команду или набор команд для каждого элемента из
списка. Это ключевой элемент повышения производительности посредством
автоматизации. Как и использование подстановочных символов и
автодополнения, циклы сокращают количество вводимых данных (а значит,
уменьшают вероятность ошибок).</p>
<p>Предположим, у нас есть несколько сотен файлов с данными о геномах,
таких как <code>basilisk.dat</code>, <code>minotaur.dat</code> и
<code>unicorn.dat</code>. Для этого примера мы будем использовать
каталог <code>exercise-data/creatures</code>, в котором есть только три
примера файлов, но принципы можно применить к гораздо большему
количеству файлов одновременно.</p>
<p>Структура этих файлов одинакова: общее название, классификация и дата
обновления представлены в первых трёх строках, а последовательности ДНК
— в следующих строках. Давайте посмотрим на файлы:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 5 basilisk.dat minotaur.dat unicorn.dat</span></code></pre>
</div>
<p>Мы хотим вывести классификацию каждого вида, которая указана во
второй строке каждого файла. Для каждого файла нам нужно выполнить
команду <code>head -n 2</code>, передав её результат команде
<code>tail -n 1</code>. Мы используем цикл для решения этой задачи, но
сначала рассмотрим общую форму цикла, используя псевдокод:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Слово "for" указывает на начало команды цикла "For"</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="cf">for</span> thing <span class="kw">in</span> list_of_things</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co"># Слово "do" указывает на начало списка выполняемых команд</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    <span class="co"># Отступы в цикле не обязательны, но улучшают читаемость</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    <span class="ex">operation_using/command</span> <span class="va">$thing</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co"># Слово "done" указывает на конец цикла</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>и мы можем применить это к нашему примеру вот так:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> for filename in basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$filename</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 2 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>basilisk.dat
CLASSIFICATION: basiliscus vulgaris
minotaur.dat
CLASSIFICATION: bos hominus
unicorn.dat
CLASSIFICATION: equus monoceros</code></pre>
</div>
<div id="следите-за-приглашением" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="следите-за-приглашением" class="callout-inner">
<h3 class="callout-title">Следите за приглашением</h3>
<div class="callout-content">
<p>При вводе нашего цикла приглашение оболочки меняется с <code>$</code>
на <code>&gt;</code>, а затем обратно. Второе приглашение
<code>&gt;</code> отличается, чтобы напомнить нам, что мы ещё не
закончили вводить полную команду. Для разделения двух команд на одной
строке можно использовать точку с запятой <code>;</code>.</p>
</div>
</div>
</div>
<p>Когда оболочка видит ключевое слово <code>for</code>, она знает, что
нужно повторить команду (или группу команд) для каждого элемента списка.
Каждый раз, когда цикл выполняется (это называется итерацией), элемент
списка последовательно присваивается переменной, а команды внутри цикла
выполняются, после чего цикл переходит к следующему элементу. Внутри
цикла мы вызываем значение переменной, поставив перед её именем знак
<code>$</code>. Этот символ сообщает интерпретатору оболочки, что это
имя переменной, и нужно подставить её значение, а не рассматривать как
текст или внешнюю команду.</p>
<p>В этом примере список — это три имени файлов:
<code>basilisk.dat</code>, <code>minotaur.dat</code> и
<code>unicorn.dat</code>. Каждый раз, когда выполняется итерация, мы
сначала используем команду <code>echo</code>, чтобы вывести текущее
значение переменной <code>$filename</code>. Это не обязательно для
результата, но полезно для наглядности. Затем мы выполняем команду
<code>head</code> для файла, на который ссылается
<code>$filename</code>. В первый раз, когда цикл выполняется,
<code>$filename</code> равно <code>basilisk.dat</code>. Интерпретатор
выполняет команду <code>head</code> для <code>basilisk.dat</code> и
передаёт первые две строки в команду <code>tail</code>, которая затем
выводит вторую строку файла. На второй итерации <code>$filename</code>
становится <code>minotaur.dat</code>, и процесс повторяется. На третьей
итерации <code>$filename</code> становится <code>unicorn.dat</code>, и
снова выполняется команда <code>head</code>, а затем <code>tail</code>.
После третьей итерации оболочка завершает цикл <code>for</code>.</p>
<div id="одинаковые-символы-разные-значения" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="одинаковые-символы-разные-значения" class="callout-inner">
<h3 class="callout-title">Одинаковые символы, разные значения</h3>
<div class="callout-content">
<p>Здесь мы видим, что <code>&gt;</code> используется как приглашение
оболочки, в то время как <code>&gt;</code> также используется для
перенаправления вывода. Аналогично, <code>$</code> используется как
приглашение оболочки, но, как мы видели ранее, также используется для
получения значения переменной.</p>
<p>Если <em>оболочка</em> выводит <code>&gt;</code> или <code>$</code>,
она ожидает, что вы что-то введёте, и эти символы являются
приглашением.</p>
<p>Если <em>вы</em> вводите <code>&gt;</code> или <code>$</code>, это
инструкция для оболочки перенаправить вывод или получить значение
переменной.</p>
</div>
</div>
</div>
<p>При использовании переменных можно также заключать их имена в
фигурные скобки, чтобы явно выделить имя переменной:
<code>$filename</code> эквивалентно <code>${filename}</code>, но
отличается от <code>${file}name</code>. Вы можете встретить такую
нотацию в программах других людей.</p>
<p>Мы назвали переменную в этом цикле <code>filename</code>, чтобы её
назначение было более очевидным для читателей. Самой оболочке всё равно,
как называется переменная; если бы мы написали этот цикл так:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> for x in basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 2 <span class="va">$x</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>или так:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> for temperature in basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 2 <span class="va">$temperature</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>он работал бы точно так же. <em>Не делайте так</em>. Программы
полезны только тогда, когда их могут понять люди, поэтому бессмысленные
имена (например, <code>x</code>) или вводящие в заблуждение имена
(например, <code>temperature</code>) увеличивают вероятность того, что
программа не будет делать то, что ожидают её пользователи.</p>
<p>В приведённых выше примерах переменные (<code>thing</code>,
<code>filename</code>, <code>x</code> и <code>temperature</code>) могли
быть названы как угодно, главное, чтобы это было понятно и тому, кто
пишет код, и тому, кто его читает.</p>
<p>Отметим также, что циклы можно использовать не только для обработки
имён файлов, но и для работы с числами или подмножествами данных.</p>
<div id="напишите-свой-цикл" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="напишите-свой-цикл" class="callout-inner">
<h3 class="callout-title">Напишите свой цикл</h3>
<div class="callout-content">
<p>Как бы вы написали цикл, который выводит все числа от 0 до 9?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Решение </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> for loop_variable in 0 1 2 3 4 5 6 7 8 9</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$loop_variable</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">0</span></span>
<span><span class="fl">1</span></span>
<span><span class="fl">2</span></span>
<span><span class="fl">3</span></span>
<span><span class="fl">4</span></span>
<span><span class="fl">5</span></span>
<span><span class="fl">6</span></span>
<span><span class="fl">7</span></span>
<span><span class="fl">8</span></span>
<span><span class="fl">9</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="переменные-в-циклах" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="переменные-в-циклах" class="callout-inner">
<h3 class="callout-title">Переменные в циклах</h3>
<div class="callout-content">
<p>Это упражнение относится к каталогу
<code>shell-lesson-data/exercise-data/alkanes</code>. Команда
<code>ls *.pdb</code> выводит следующий результат:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</code></pre>
</div>
<p>Каков результат выполнения следующего кода?</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="ex">*.pdb</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Теперь, каков результат выполнения следующего кода?</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$datafile</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Почему эти два цикла дают разные результаты?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Решение </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>Первый блок кода выводит один и тот же результат на каждой итерации
цикла. Оболочка расширяет подстановочный символ <code>*.pdb</code>
внутри тела цикла (а также до начала цикла), чтобы он соответствовал
всем файлам, оканчивающимся на <code>.pdb</code>, и затем выводит их с
помощью <code>ls</code>. Цикл будет выглядеть так:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> for datafile in cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="ex">cubane.pdb</span>  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</code></pre>
</div>
<p>Во втором блоке кода на каждой итерации цикла выводится разный файл.
Значение переменной <code>datafile</code> вычисляется с использованием
<code>$datafile</code> и затем выводится с помощью <code>ls</code>.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">cubane.pdb</span></span>
<span><span class="va">ethane.pdb</span></span>
<span><span class="va">methane.pdb</span></span>
<span><span class="va">octane.pdb</span></span>
<span><span class="va">pentane.pdb</span></span>
<span><span class="va">propane.pdb</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="ограничение-набора-файлов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="ограничение-набора-файлов" class="callout-inner">
<h3 class="callout-title">Ограничение набора файлов</h3>
<div class="callout-content">
<p>Каков будет результат выполнения следующего цикла в каталоге
<code>shell-lesson-data/exercise-data/alkanes</code>?</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> for filename in c<span class="pp">*</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$filename</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<ol style="list-style-type: decimal"><li>Файлы не будут перечислены.</li>
<li>Будут перечислены все файлы.</li>
<li>Будут перечислены только <code>cubane.pdb</code>,
<code>octane.pdb</code> и <code>pentane.pdb</code>.</li>
<li>Будет перечислен только <code>cubane.pdb</code>.</li>
</ol></div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Решение </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>Правильный ответ — 4. <code>*</code> соответствует нулю или более
символам, поэтому будет совпадение с любым именем файла, начинающимся с
буквы <code>c</code> и содержащим ноль или более других символов.</p>
</div>
</div>
</div>
</div>
<div id="ограничение-набора-файлов" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="ограничение-набора-файлов" class="callout-inner">
<h3 class="callout-title">Ограничение набора файлов<em>
(continued)</em>
</h3>
<div class="callout-content">
<p>Чем будет отличаться вывод, если вместо этого использовать следующую
команду?</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>c<span class="pp">*</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="op">&gt;</span>     ls <span class="va">$filename</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<ol style="list-style-type: decimal"><li>Будут перечислены те же файлы.</li>
<li>На этот раз будут перечислены все файлы.</li>
<li>На этот раз файлы не будут перечислены.</li>
<li>Будут перечислены файлы <code>cubane.pdb</code> и
<code>octane.pdb</code>.</li>
<li>Будет перечислен только файл <code>octane.pdb</code>.</li>
</ol></div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>Правильный ответ — 4. <code>*</code> соответствует нулю или более
символам, поэтому имя файла, в котором есть ноль или более символов
перед буквой <code>c</code> и ноль или более символов после неё, будет
совпадать.</p>
</div>
</div>
</div>
</div>
<div id="сохранение-в-файл-в-цикле-часть-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="сохранение-в-файл-в-цикле-часть-1" class="callout-inner">
<h3 class="callout-title">Сохранение в файл в цикле — Часть 1</h3>
<div class="callout-content">
<p>При запуске в каталоге
<code>shell-lesson-data/exercise-data/alkanes,</code> каков эффект этого
цикла?</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="cf">for</span> alkanes <span class="kw">in</span> <span class="pp">*</span>.pdb</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$alkanes</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>    <span class="fu">cat</span> <span class="va">$alkanes</span> <span class="op">&gt;</span> alkanes.pdb</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<ol style="list-style-type: decimal"><li>Будут выведены <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code>,
<code>pentane.pdb</code> и <code>propane.pdb</code>, а текст из
<code>propane.pdb</code> будет сохранён в файл
<code>alkanes.pdb</code>.</li>
<li>Будут выведены <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, и текст всех трёх файлов будет объединён и
сохранён в файл под названием <code>alkanes.pdb</code>.</li>
<li>Будут выведены <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code> и
<code>pentane.pdb</code>, а текст из <code>propane.pdb</code> будет
сохранён в файл <code>alkanes.pdb</code>.</li>
<li>Ничего из вышеперечисленного.</li>
</ol></div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Решение </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<p>Правильный ответ — <code>1</code>. Текст из каждого файла по очереди
записывается в файл <code>alkanes.pdb</code>. Однако файл
перезаписывается на каждой итерации цикла, поэтому конечное содержимое
файла <code>alkanes.pdb</code> будет текстом из файла
<code>propane.pdb</code>.</p>
</div>
</div>
</div>
</div>
<div id="сохранение-в-файл-в-цикле-часть-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="сохранение-в-файл-в-цикле-часть-2" class="callout-inner">
<h3 class="callout-title">Сохранение в файл в цикле — Часть 2</h3>
<div class="callout-content">
<p>Также при запуске в каталоге shell-lesson-data/exercise-data/alkanes,
каков будет результат выполнения следующего цикла?</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> <span class="pp">*</span>.pdb</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>    <span class="fu">cat</span> <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<ol style="list-style-type: decimal"><li>Весь текст из файлов <code>cubane.pdb</code>,
<code>ethane.pdb</code>, <code>methane.pdb</code>,
<code>octane.pdb</code> и <code>pentane.pdb</code> будет объединён и
сохранён в файл под названием <code>all.pdb</code>.</li>
<li>Текст из файла <code>ethane.pdb</code> будет сохранён в файл под
названием <code>all.pdb</code>.</li>
<li>Весь текст из файлов <code>cubane.pdb</code>,
<code>ethane.pdb</code>, <code>methane.pdb</code>,
<code>octane.pdb</code>, <code>pentane.pdb</code> и
<code>propane.pdb</code> будет объединён и сохранён в файл под названием
<code>all.pdb</code>.</li>
<li>Весь текст из файлов <code>cubane.pdb</code>,
<code>ethane.pdb</code>, <code>methane.pdb</code>,
<code>octane.pdb</code>, pentane.pdb и <code>propane.pdb</code> будет
напечатан на экране и сохранён в файл под названием
<code>all.pdb</code>.</li>
</ol></div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Решение </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<p>Правильный ответ — 3. Оператор <code>&gt;&gt;</code> добавляет данные
в файл, а не перезаписывает его. Поскольку вывод команды
<code>cat</code> перенаправляется, на экране ничего не будет
напечатано.</p>
</div>
</div>
</div>
</div>
<p>Продолжим наш пример в каталоге
<code>shell-lesson-data/exercise-data/creatures</code>. Вот немного
более сложный цикл:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$filename</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 100 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Оболочка начинает с расширения <code>*.dat</code>, создавая список
файлов для обработки. <strong>Тело цикла</strong> затем выполняет две
команды для каждого из этих файлов. Первая команда, <code>echo</code>,
выводит свои аргументы командной строки в стандартный вывод.
Например:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> echo hello there</span></code></pre>
</div>
<p>выведет:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>hello there</code></pre>
</div>
<p>В данном случае, поскольку оболочка расширяет <code>$filename</code>
до имени файла, <code>echo</code> <code>$filename</code> выводит имя
файла. Обратите внимание, что мы не можем записать это так:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="op">&gt;</span>     <span class="va">$filename</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 100 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>потому что тогда при первом прохождении цикла, когда
<code>$filename</code> расширится до <code>basilisk.dat</code>, оболочка
попытается запустить <code>basilisk.dat</code> как программу. Наконец,
комбинация команд <code>head</code> и <code>tail</code> выбирает строки
с 81 по 100 из любого обрабатываемого файла (предполагая, что в файле не
менее 100 строк).</p>
<div id="пробелы-в-именах" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="пробелы-в-именах" class="callout-inner">
<h3 class="callout-title">Пробелы в именах</h3>
<div class="callout-content">
<p>Пробелы используются для разделения элементов списка, по которому мы
собираемся пройти в цикле. Если один из этих элементов содержит символ
пробела, нам нужно окружить его кавычками, и то же самое сделать с
переменной цикла. Предположим, что наши файлы данных называются:</p>
<pre class="source"><code>red dragon.dat
purple unicorn.dat</code></pre>
<p>Чтобы пройти по этим файлам в цикле, нам нужно добавить двойные
кавычки следующим образом:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="st">"red dragon.dat"</span> <span class="st">"purple unicorn.dat"</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 100 <span class="st">"</span><span class="va">$filename</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Проще избегать использования пробелов (или других специальных
символов) в именах файлов.</p>
<p>Указанные файлы не существуют, поэтому, если мы запустим приведённый
выше код, команда <code>head</code> не сможет найти их; однако
возвращённое сообщение об ошибке покажет имена файлов, которые она
ожидает:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>head: cannot open ‘red dragon.dat' for reading: No such file or directory
head: cannot open ‘purple unicorn.dat' for reading: No such file or directory</code></pre>
</div>
<p>Попробуйте убрать кавычки вокруг <code>$filename</code> в приведённом
выше цикле, чтобы увидеть, как кавычки влияют на пробелы. Обратите
внимание, что при выполнении кода в каталоге <code>creatures</code> мы
получаем результат для файла <code>unicorn.dat</code>:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>head: cannot open ‘red' for reading: No such file or directory
head: cannot open ‘dragon.dat' for reading: No such file or directory
head: cannot open ‘purple' for reading: No such file or directory
CGGTACCGAA
AAGGGTCGCG
CAAGTGTTCC
...</code></pre>
</div>
</div>
</div>
</div>
<p>Мы хотим изменить каждый файл в каталоге
<code>shell-lesson-data/exercise-data/creatures</code>, но при этом
сохранить версию исходных файлов. Мы хотим скопировать исходные файлы в
новые с именами, такими как <code>original-basilisk.dat</code> и
<code>original-unicorn.dat</code>. Мы не можем использовать:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>.dat original-<span class="pp">*</span>.dat</span></code></pre>
</div>
<p>потому что это расширится до:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> cp basilisk.dat minotaur.dat unicorn.dat original-<span class="pp">*</span>.dat</span></code></pre>
</div>
<p>Команда не создаст резервные копии файлов, вместо этого мы получим
ошибку:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>cp: target `original-*.dat' is not a directory</code></pre>
</div>
<p>Эта проблема возникает, когда <code>cp</code> получает более двух
входных аргументов. В этом случае он ожидает, что последний аргумент
будет каталогом, куда можно скопировать все переданные ему файлы.
Поскольку в каталоге <code>creatures</code> нет каталога с именем
<code>original-*.dat</code>, возникает ошибка.</p>
<p>Вместо этого можно использовать цикл:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a><span class="op">&gt;</span>     cp <span class="va">$filename</span> original-<span class="va">$filename</span></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Этот цикл выполняет команду <code>cp</code> один раз для каждого
имени файла. В первый раз, когда <code>$filename</code> разворачивается
до <code>basilisk.dat</code>, оболочка выполняет:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">cp</span> basilisk.dat original-basilisk.dat</span></code></pre>
</div>
<p>Во второй раз команда будет такой:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">cp</span> minotaur.dat original-minotaur.dat</span></code></pre>
</div>
<p>В третий и последний раз команда будет такой:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="fu">cp</span> unicorn.dat original-unicorn.dat</span></code></pre>
</div>
<p>Поскольку команда <code>cp</code> обычно не выводит ничего на экран,
сложно проверить, что цикл работает правильно. Однако, как мы узнали
ранее, можно использовать команду <code>echo</code> для вывода строк, и
мы можем изменить цикл, чтобы он выводил наши команды без их
фактического выполнения. Таким образом, мы можем проверить, какие
команды будут выполнены в неизменённом цикле.</p>
<p>Следующая схема показывает, что происходит, когда модифицированный
цикл выполняется, и демонстрирует, как разумное использование echo
является хорошей техникой отладки.</p>
<figure><img src="fig/shell_script_for_loop_flow_chart.svg" alt="Цикл for “for filename in .dat; do echo cp filename original-filename; done” последовательно присваивает переменной “$filename” имена всех файлов “.dat” в текущем каталоге и выполняет команду. С файлами “basilisk.dat”, “minotaur.dat” и “unicorn.dat” в текущем каталоге цикл последовательно вызовет команду echo трижды и выведет три строки: “cp basilisk.dat original-basilisk.dat”, затем “cp minotaur.dat original-minotaur.dat” и наконец “cp unicorn.dat original-unicorn.dat”" class="figure mx-auto d-block"><div class="figcaption">Цикл for “for filename in .dat; do echo cp <span class="math inline">\(filename original-\)</span>filename; done”
последовательно присваивает переменной “$filename” имена всех файлов
“.dat” в текущем каталоге и выполняет команду. С файлами “basilisk.dat”,
“minotaur.dat” и “unicorn.dat” в текущем каталоге цикл последовательно
вызовет команду echo трижды и выведет три строки: “cp basilisk.dat
original-basilisk.dat”, затем “cp minotaur.dat original-minotaur.dat” и
наконец “cp unicorn.dat original-unicorn.dat”</div>
</figure><section><h2 class="section-heading" id="конвейер-нелли-обработка-файлов">Конвейер Нелли: обработка файлов<a class="anchor" aria-label="anchor" href="#%D0%BA%D0%BE%D0%BD%D0%B2%D0%B5%D0%B9%D0%B5%D1%80-%D0%BD%D0%B5%D0%BB%D0%BB%D0%B8-%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2"></a></h2>
<hr class="half-width"><p>Теперь Нелли готова обработать свои файлы данных с помощью
<code>goostats.sh</code> — скрипта оболочки, написанного её
руководителем. Этот скрипт вычисляет некоторые статистические данные из
файла с образцом белка и принимает два аргумента:</p>
<ol style="list-style-type: decimal"><li>входной файл (содержащий сырые данные)</li>
<li>выходной файл (для хранения вычисленных статистических данных)</li>
</ol><p>Так как она всё ещё учится работать с оболочкой, она решает поэтапно
настраивать команды, которые ей нужно выполнить. Её первый шаг —
убедиться, что она может выбрать правильные входные файлы — помните, это
те файлы, чьи имена заканчиваются на ‘A’ или ‘B’, а не на ‘Z’. Перейдя в
каталог <code>north-pacific-gyre</code>, Нелли вводит:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">$</span> cd</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="ex">$</span> cd Desktop/shell-lesson-data/north-pacific-gyre</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$datafile</span></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">NENE01729A.txt</span></span>
<span><span class="va">NENE01729B.txt</span></span>
<span><span class="va">NENE01736A.txt</span></span>
<span><span class="va">...</span></span>
<span><span class="va">NENE02043A.txt</span></span>
<span><span class="va">NENE02043B.txt</span></span></code></pre>
</div>
<p>Следующим её шагом будет решение о том, как назвать файлы, которые
создаст программа анализа <code>goostats.sh</code>. Добавление префикса
к имени каждого входного файла словом <code>stats</code> кажется простым
решением, поэтому она изменяет свой цикл следующим образом:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>NENE01729A.txt stats-NENE01729A.txt
NENE01729B.txt stats-NENE01729B.txt
NENE01736A.txt stats-NENE01736A.txt
...
NENE02043A.txt stats-NENE02043A.txt
NENE02043B.txt stats-NENE02043B.txt</code></pre>
</div>
<p>Она ещё не запускала <code>goostats.sh</code>, но теперь уверена, что
сможет выбрать правильные файлы и сгенерировать правильные имена
выходных файлов.</p>
<p>Постоянный ввод команд становится утомительным, и Нелли беспокоится о
том, что может допустить ошибку, поэтому, вместо того чтобы снова
вводить цикл, она нажимает <kbd>↑</kbd>. В ответ оболочка выводит весь
цикл на одной строке (с использованием точек с запятой для разделения
частей):</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt<span class="kw">;</span> <span class="cf">do</span> <span class="bu">echo</span> <span class="va">$datafile</span> stats-<span class="va">$datafile</span><span class="kw">;</span> <span class="cf">done</span></span></code></pre>
</div>
<p>Используя клавишу <kbd>←</kbd>, Нелли переходит к команде
<code>echo</code> и изменяет её на <code>bash goostats.sh</code>:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt<span class="kw">;</span> <span class="cf">do</span> <span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span><span class="kw">;</span> <span class="cf">done</span></span></code></pre>
</div>
<p>Когда она нажимает <kbd>Enter</kbd>, оболочка выполняет
модифицированную команду. Однако ничего не происходит — на экране нет
вывода. Через мгновение Нелли понимает, что, так как её скрипт больше
ничего не выводит на экран, она не знает, выполняется ли он вообще, и
насколько быстро. Она завершает выполнение команды, набрав
<kbd>Ctrl</kbd>+<kbd>C</kbd>, использует <kbd>↑</kbd> для повторного
ввода команды и редактирует её, чтобы она выглядела так:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="ex">$</span> for datafile in NENE<span class="pp">*</span>A.txt NENE<span class="pp">*</span>B.txt<span class="kw">;</span> <span class="cf">do</span> <span class="bu">echo</span> <span class="va">$datafile</span><span class="kw">;</span></span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="fu">bash</span> goostats.sh <span class="va">$datafile</span> stats-<span class="va">$datafile</span><span class="kw">;</span> <span class="cf">done</span></span></code></pre>
</div>
<div id="начало-и-конец-строки" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="начало-и-конец-строки" class="callout-inner">
<h3 class="callout-title">Начало и конец строки</h3>
<div class="callout-content">
<p>Мы можем перемещаться к началу строки в оболочке, набрав
<kbd>Ctrl</kbd>+<kbd>A</kbd>, и к концу строки, используя
<kbd>Ctrl</kbd>+<kbd>E</kbd>.</p>
</div>
</div>
</div>
<p>Теперь при выполнении программы выводится одна строка каждые пять
секунд:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">NENE01729A.txt</span></span>
<span><span class="va">NENE01729B.txt</span></span>
<span><span class="va">NENE01736A.txt</span></span>
<span><span class="va">...</span></span></code></pre>
</div>
<p>1518 умножить на 5 секунд, разделить на 60 — это означает, что её
скрипт будет выполняться около двух часов. В качестве последней проверки
она открывает другое окно терминала, заходит в каталог
<code>north-pacific-gyre</code> и использует команду
<code>cat stats-NENE01729B.txt</code>, чтобы проверить один из выходных
файлов. Всё выглядит хорошо, так что она решает пойти выпить кофе и
почитать.</p>
<div id="те-кто-помнят-прошлое-могут-повторить-его-в-будущем" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="те-кто-помнят-прошлое-могут-повторить-его-в-будущем" class="callout-inner">
<h3 class="callout-title">Те кто помнят прошлое, могут повторить его в будущем</h3>
<div class="callout-content">
<p>Ещё один способ повторить предыдущую работу — это использовать
команду <code>history</code> для получения списка последних нескольких
сотен выполненных команд и затем использовать <code>!123</code> (где
‘123’ заменяется номером команды), чтобы повторить одну из этих команд.
Например, если Нелли вводит следующее:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="ex">$</span> history <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>456  for datafile in NENE*A.txt NENE*B.txt; do   echo $datafile stats-$datafile; done
457  for datafile in NENE*A.txt NENE*B.txt; do echo $datafile stats-$datafile; done
458  for datafile in NENE*A.txt NENE*B.txt; do bash goostats.sh $datafile stats-$datafile; done
459  for datafile in NENE*A.txt NENE*B.txt; do echo $datafile; bash goostats.sh $datafile
stats-$datafile; done
460  history | tail -n 5</code></pre>
</div>
<p>она может снова запустить <code>goostats.sh</code> для файлов, просто
введя <code>!459</code>.</p>
</div>
</div>
</div>
<div id="другие-команды-истории" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="другие-команды-истории" class="callout-inner">
<h3 class="callout-title">Другие команды истории</h3>
<div class="callout-content">
<p>Существует несколько других команд для работы с историей.</p>
<ul><li>
<kbd>Ctrl</kbd>+<kbd>R</kbd> запускает режим поиска по истории
‘reverse-i-search’ и находит самую последнюю команду в вашей истории,
соответствующую введённому тексту. Нажмите <kbd>Ctrl</kbd>+<kbd>R</kbd>
ещё раз (или несколько раз), чтобы найти более ранние совпадения. Затем
можно использовать клавиши со стрелками влево и вправо, чтобы выбрать
эту строку, отредактировать её и нажать <kbd>Return</kbd> для выполнения
команды.</li>
<li>
<code>!!</code> выводит предыдущую команду (возможно, вы найдёте это
более удобным, чем использование <kbd>↑</kbd>).</li>
<li>
<code>!$</code> выводит последнее слово предыдущей команды. Это
может быть полезно чаще, чем вы думаете: после выполнения команды
<code>bash goostats.sh NENE01729B.txt stats-NENE01729B.txt</code> вы
можете ввести <code>less !$</code>, чтобы просмотреть файл
<code>stats-NENE01729B.txt</code>, что быстрее, чем использовать
<kbd>↑</kbd> и редактировать командную строку.</li>
</ul></div>
</div>
</div>
<div id="пробный-запуск" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="пробный-запуск" class="callout-inner">
<h3 class="callout-title">Пробный запуск</h3>
<div class="callout-content">
<p>Цикл позволяет выполнять множество действий сразу — или допустить
множество ошибок, если он выполняет что-то неправильно. Один из способов
проверить, что <em>сделает</em> цикл — это вывести команды, которые он
бы запустил, вместо их фактического выполнения с помощью echo.</p>
<p>Предположим, мы хотим предварительно просмотреть команды, которые
выполнит следующий цикл, не запуская их:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="op">&gt;</span>     cat <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>В чём разница между двумя циклами ниже, и какой из них мы бы хотели
запустить?</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="co"># Version 1</span></span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="fu">cat</span> <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="co"># Version 2</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="st">"cat </span><span class="va">$datafile</span><span class="st"> &gt;&gt; all.pdb"</span></span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Решение </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<p>Вторая версия — та, которую мы хотим запустить. Она выводит на экран
всё, что заключено в кавычки, расширяя переменную цикла, так как мы
поставили перед ней знак доллара. При этом не создаётся и не изменяется
файл <code>all.pdb</code>, так как <code>&gt;&gt;</code> воспринимается
буквально как часть строки, а не как инструкция перенаправления.</p>
<p>Первая версия добавляет вывод команды <code>echo cat $datafile</code>
в файл <code>all.pdb</code>. Этот файл будет содержать только список
команд: <code>cat cubane.pdb</code>, <code>cat ethane.pdb</code>,
<code>cat methane.pdb</code> и т.д.</p>
<p>Попробуйте обе версии самостоятельно, чтобы увидеть результат! Не
забудьте открыть файл <code>all.pdb</code>, чтобы посмотреть его
содержимое.</p>
</div>
</div>
</div>
</div>
<div id="вложенные-циклы" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="вложенные-циклы" class="callout-inner">
<h3 class="callout-title">Вложенные циклы</h3>
<div class="callout-content">
<p>Предположим, что мы хотим создать структуру каталогов для организации
экспериментов, измеряющих константы скорости реакции с разными
соединениями и при разных температурах. Каков будет результат выполнения
следующего кода:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="ex">$</span> for species in cubane ethane methane</span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a><span class="op">&gt;</span>     for <span class="ex">temperature</span> in 25 30 37 40</span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a><span class="op">&gt;</span>     do</span>
<span id="cb47-5"><a href="#cb47-5" tabindex="-1"></a><span class="op">&gt;</span>         mkdir <span class="va">$species</span><span class="ex">-</span><span class="va">$temperature</span></span>
<span id="cb47-6"><a href="#cb47-6" tabindex="-1"></a><span class="op">&gt;</span>     done</span>
<span id="cb47-7"><a href="#cb47-7" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8"> Решение </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" data-bs-parent="#accordionSolution8" aria-labelledby="headingSolution8">
<div class="accordion-body">
<p>Мы имеем дело с вложенным циклом, то есть цикл находится внутри
другого цикла. Поэтому для каждого вещества во внешнем цикле, внутренний
цикл (вложенный цикл) проходит по списку температур и создаёт новый
каталог для каждой комбинации.</p>
<p>Попробуйте запустить этот код самостоятельно, чтобы увидеть, какие
каталоги будут созданы!</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul><li>Цикл <code>for</code> повторяет команды для каждого элемента
списка.</li>
<li>Каждый цикл <code>for</code> требует переменную, чтобы ссылаться на
элемент, с которым он в данный момент работает.</li>
<li>Используйте <code>$name</code>, чтобы развернуть переменную (то есть
получить её значение). Можно также использовать
<code>${name}</code>.</li>
<li>Не используйте пробелы, кавычки или символы подстановки, такие как
’*’ или ‘?’ в именах файлов, так как это усложняет развёртывание
переменных.</li>
<li>Давайте файлам последовательные имена, которые легко сопоставить с
шаблонами подстановки, чтобы было проще выбирать их для циклов.</li>
<li>Используйте клавишу со стрелкой вверх, чтобы пролистать предыдущие
команды и повторить их с изменениями.</li>
<li>Используйте <kbd>Ctrl</kbd>+<kbd>R</kbd>, чтобы искать ранее
введённые команды.</li>
<li>Используйте команду <code>history</code> для отображения последних
команд и <code>![number]</code>, чтобы повторить команду по её
номеру.</li>
</ul></div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="04-pipefilter.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="06-script.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="04-pipefilter.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Каналы и фильтры
        </a>
        <a class="chapter-link float-end" href="06-script.html" rel="next">
          Next: Скрипты оболочки...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/swcarpentry/shell-novice/edit/main/episodes/05-loop.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/swcarpentry/shell-novice/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/swcarpentry/shell-novice/" class="external-link">Source</a></p>
				<p><a href="https://github.com/swcarpentry/shell-novice/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.7" class="external-link">sandpaper (0.16.7)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.4" class="external-link">varnish (1.0.4)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://swcarpentry.github.io/shell-novice/05-loop.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Циклы",
  "creativeWorkStatus": "active",
  "url": "https://swcarpentry.github.io/shell-novice/05-loop.html",
  "identifier": "https://swcarpentry.github.io/shell-novice/05-loop.html",
  "dateCreated": "2014-10-22",
  "dateModified": "2024-09-07",
  "datePublished": "2024-09-07"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

